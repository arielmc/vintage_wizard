/*! For license information please see main.2c8a1d01.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return j(e(t))}catch(ai){}}return null}var R=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function z(e){return{current:e}}function U(e){0>F||(e.current=M[F],M[F]=null,F--)}function V(e,t){F++,M[F]=e.current,e.current=t}var B,H,q=z(null),W=z(null),K=z(null),G=z(null);function Q(e,t){switch(V(K,t),V(W,e),V(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(q),V(q,e)}function Y(){U(q),U(W),U(K)}function X(e){null!==e.memoizedState&&V(G,e);var t=q.current,n=bd(t,e.type);t!==n&&(V(W,e),V(q,n))}function $(e){W.current===e&&(U(q),U(W)),G.current===e&&(U(G),dh._currentValue=L)}function J(e){if(void 0===B)try{throw Error()}catch(ai){var t=ai.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",H=-1<ai.stack.indexOf("\n    at")?" (<anonymous>)":-1<ai.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+H}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(ai){var r=ai}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(ai){return"\nError generating stack: "+ai.message+"\n"+ai.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/ke|0)|0},xe=Math.log,ke=Math.LN2;var Se=256,_e=262144,Ee=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=Ne(r):0!==(a&=o)?s=Ne(a):n||0!==(n=o&~e)&&(s=Ne(n)):0!==(o=r&~i)?s=Ne(o):0!==a?s=Ne(a):n||0!==(n=r&~e)&&(s=Ne(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function je(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Oe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:Th(e.type)}function ze(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,Be="__reactProps$"+Ue,He="__reactContainer$"+Ue,qe="__reactEvents$"+Ue,We="__reactListeners$"+Ue,Ke="__reactHandles$"+Ue,Ge="__reactResources$"+Ue,Qe="__reactMarker$"+Ue;function Ye(e){delete e[Ve],delete e[Be],delete e[qe],delete e[We],delete e[Ke]}function Xe(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[Ve])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(at,s)&&(it.test(s)?ot[s]=!0:(at[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,dt(t)):null!=n?wt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Nt(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Nt(e,i,t[i])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function jt(){}var Rt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Lt=null;function Mt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Be]||null;if(!s)throw Error(a(90));yt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ft=!1;function zt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Ot||null!==Lt)&&(eu(),Ot&&(t=Ot,e=Lt,Lt=Ot=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){Bt=!1}var qt=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,s="value"in qt?qt.value:qt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Kt=s.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Xt(){return!1}function $t(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Yt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=f({},tn,{view:0,detail:0}),sn=$t(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=$t(an),ln=$t(f({},an,{dataTransfer:0})),cn=$t(f({},rn,{relatedTarget:0})),un=$t(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=$t(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=$t(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=$t(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=$t(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=$t(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),xn=$t(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=$t(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=$t(f({},tn,{newState:0,oldState:0})),_n=[9,13,27,32],En=Vt&&"CompositionEvent"in window,Nn=null;Vt&&"documentMode"in document&&(Nn=document.documentMode);var Tn=Vt&&"TextEvent"in window&&!Nn,Cn=Vt&&(!En||Nn&&8<Nn&&11>=Nn),In=String.fromCharCode(32),An=!1;function Pn(e,t){switch(e){case"keyup":return-1!==_n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Ln(e,t,n,r){Ot?Lt?Lt.push(r):Lt=[r]:Ot=r,0<(t=sd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Fn=null;function zn(e){Xu(e,0)}function Un(e){if(pt(Je(e)))return e}function Vn(e,t){if("change"===e)return t}var Bn=!1;if(Vt){var Hn;if(Vt){var qn="oninput"in document;if(!qn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),qn="function"===typeof Wn.oninput}Hn=qn}else Hn=!1;Bn=Hn&&(!document.documentMode||9<document.documentMode)}function Kn(){Mn&&(Mn.detachEvent("onpropertychange",Gn),Fn=Mn=null)}function Gn(e){if("value"===e.propertyName&&Un(Fn)){var t=[];Ln(t,Fn,e,Dt(e)),zt(zn,t)}}function Qn(e,t,n){"focusin"===e?(Kn(),Fn=n,(Mn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Fn)}function Xn(e,t){if("click"===e)return Un(t)}function $n(e,t){if("input"===e||"change"===e)return Un(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Vt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==mt(r)||("selectionStart"in(r=ar)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=sd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Vt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),vr=mr("animationiteration"),yr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),xr=mr("transitioncancel"),kr=mr("transitionend"),Sr=new Map,_r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Sr.set(e,t),rt(t,[e])}_r.push("scrollEnd");var Nr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Cr=0,Ir=0;function Ar(){for(var e=Cr,t=Ir=Cr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var s=Tr[t];Tr[t++]=null;var i=Tr[t];if(Tr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Dr(n,s,i)}}function Pr(e,t,n,r){Tr[Cr++]=e,Tr[Cr++]=t,Tr[Cr++]=n,Tr[Cr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function jr(e,t,n,r){return Pr(e,t,n,r),Or(e)}function Rr(e,t){return Pr(e,null,null,t),Or(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-we(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Or(e){if(50<Wc)throw Wc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Mr(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)zr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Fr(31,n,t,s)).elementType=T,e.lanes=i,e;case v:return Hr(n.children,s,i,t);case y:o=8,s|=24;break;case b:return(e=Fr(12,n,t,2|s)).elementType=b,e.lanes=i,e;case S:return(e=Fr(13,n,t,s)).elementType=S,e.lanes=i,e;case _:return(e=Fr(19,n,t,s)).elementType=_,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case k:o=11;break e;case E:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Xr=0,$r=null,Jr=0,Zr=[],es=0,ts=null,ns=1,rs="";function ss(e,t){Yr[Xr++]=Jr,Yr[Xr++]=$r,$r=e,Jr=t}function is(e,t,n){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ts=e;var r=ns;e=rs;var s=32-we(r)-1;r&=~(1<<s),n+=1;var i=32-we(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ns=1<<32-we(t)+s|n<<s|r,rs=i+e}else ns=1<<i|n<<s|r,rs=e}function as(e){null!==e.return&&(ss(e,1),is(e,1,0))}function os(e){for(;e===$r;)$r=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null;for(;e===ts;)ts=Zr[--es],Zr[es]=null,rs=Zr[--es],Zr[es]=null,ns=Zr[--es],Zr[es]=null}function ls(e,t){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ns=t.id,rs=t.overflow,ts=e}var cs=null,us=null,ds=!1,hs=null,fs=!1,ps=Error(a(519));function ms(e){throw xs(Qr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ps}function gs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ve]=e,t[Be]=r,n){case"dialog":$u("cancel",t),$u("close",t);break;case"iframe":case"object":case"embed":$u("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)$u(Qu[n],t);break;case"source":$u("error",t);break;case"img":case"image":case"link":$u("error",t),$u("load",t);break;case"details":$u("toggle",t);break;case"input":$u("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":$u("invalid",t);break;case"textarea":$u("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&($u("beforetoggle",t),$u("toggle",t)),null!=r.onScroll&&$u("scroll",t),null!=r.onScrollEnd&&$u("scrollend",t),null!=r.onClick&&(t.onclick=jt),t=!0):t=!1,t||ms(e,!0)}function vs(e){for(cs=e.return;cs;)switch(cs.tag){case 5:case 31:case 13:return void(fs=!1);case 27:case 3:return void(fs=!0);default:cs=cs.return}}function ys(e){if(e!==cs)return!1;if(!ds)return vs(e),ds=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&us&&ms(e),vs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));us=Ld(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));us=Ld(e)}else 27===n?(n=us,Td(e.type)?(e=Od,Od=null,us=e):us=n):us=cs?Dd(e.stateNode.nextSibling):null;return!0}function bs(){us=cs=null,ds=!1}function ws(){var e=hs;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),hs=null),e}function xs(e){null===hs?hs=[e]:hs.push(e)}var ks=z(null),Ss=null,_s=null;function Es(e,t,n){V(ks,t._currentValue),t._currentValue=n}function Ns(e){e._currentValue=ks.current,U(ks)}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Ts(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Ts(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Is(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Jn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}s=s.return}null!==e&&Cs(t,e,n,r),t.flags|=262144}function As(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ps(e){Ss=e,_s=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function js(e){return Ds(Ss,e)}function Rs(e,t){return null===Ss&&Ps(e),Ds(e,t)}function Ds(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===_s){if(null===e)throw Error(a(308));_s=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _s=_s.next=t;return n}var Os="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ls=r.unstable_scheduleCallback,Ms=r.unstable_NormalPriority,Fs={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zs(){return{controller:new Os,data:new Map,refCount:0}}function Us(e){e.refCount--,0===e.refCount&&Ls(Ms,function(){e.controller.abort()})}var Vs=null,Bs=0,Hs=0,qs=null;function Ws(){if(0===--Bs&&null!==Vs){null!==qs&&(qs.status="fulfilled");var e=Vs;Vs=null,Hs=0,qs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ks=D.S;D.S=function(e,t){Dc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Vs){var n=Vs=[];Bs=0,Hs=Hu(),qs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bs++,t.then(Ws,Ws)}(0,t),null!==Ks&&Ks(e,t)};var Gs=z(null);function Qs(){var e=Gs.current;return null!==e?e:mc.pooledCache}function Ys(e,t){V(Gs,null===t?Gs.current:t.pool)}function Xs(){var e=Qs();return null===e?null:{parent:Fs._currentValue,pool:e}}var $s=Error(a(460)),Js=Error(a(474)),Zs=Error(a(542)),ei={then:function(){}};function ti(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ni(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(jt,jt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(jt,jt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw si=t,$s}}function ri(e){try{return(0,e._init)(e._payload)}catch(ai){if(null!==ai&&"object"===typeof ai&&"function"===typeof ai.then)throw si=ai,$s;throw ai}}var si=null;function ii(){if(null===si)throw Error(a(459));var e=si;return si=null,e}function oi(e){if(e===$s||e===Zs)throw Error(a(483))}var li=null,ci=0;function ui(e){var t=ci;return ci+=1,null===li&&(li=[]),ni(li,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&ri(i)===t.type)?(di(t=s(t,n.props),n),t.return=e,t):(di(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return di(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Kr(t,e.mode,n)).return=e,t;case N:return h(e,t=ri(t),n)}if(R(t)||A(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ui(t),n);if(t.$$typeof===x)return h(e,Rs(e,t),n);hi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case N:return f(e,t,n=ri(n),r)}if(R(n)||A(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ui(n),r);if(n.$$typeof===x)return f(e,t,Rs(e,n),r);hi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return p(e,t,n,r=ri(r),s)}if(R(r)||A(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return p(e,t,n,ui(r),s);if(r.$$typeof===x)return p(e,t,n,Rs(t,r),s);hi(t,r)}return null}function y(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===v&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===v){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ri(b)===c.type){n(l,c.sibling),di(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===v?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(di(d=Br(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Kr(u,l.mode,d)).return=l,l=d}return o(l);case N:return y(l,c,u=ri(u),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(s,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),a=i(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(s,d),ds&&ss(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return ds&&ss(s,m),c}for(d=r(d);m<o.length;m++)null!==(g=p(d,s,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),ds&&ss(s,m),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(s,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(s,m),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(s,m),ds&&ss(s,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return ds&&ss(s,g),u}for(m=r(m);!y.done;g++,y=l.next())null!==(y=p(m,s,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=i(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(s,e)}),ds&&ss(s,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return y(l,c,ui(u),d);if(u.$$typeof===x)return y(l,c,Rs(l,u),d);hi(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ci=0;var s=y(e,t,n,r);return li=null,s}catch(ai){if(ai===$s||ai===Zs)throw ai;var i=Fr(29,ai,null,e.mode);return i.lanes=r,i.return=e,i}}}var pi=fi(!0),mi=fi(!1),gi=!1;function vi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Or(e),Dr(e,null,n),t}return Pr(e,r,t,n),Or(e)}function xi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function ki(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Si=!1;function _i(){if(Si){if(null!==qs)throw qs}}function Ei(e,t,n,r){Si=!1;var s=e.updateQueue;gi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(vc&h)===h:(r&h)===h){0!==h&&h===Hs&&(Si=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(v,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(v,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:gi=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function Ni(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Ti(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ni(n[e],t)}var Ci=z(null),Ii=z(0);function Ai(e,t){V(Ii,e=Sc),V(Ci,t),Sc=e|t.baseLanes}function Pi(){V(Ii,Sc),V(Ci,Ci.current)}function ji(){Sc=Ii.current,U(Ci),U(Ii)}var Ri=z(null),Di=null;function Oi(e){var t=e.alternate;V(Ui,1&Ui.current),V(Ri,e),null===Di&&(null===t||null!==Ci.current||null!==t.memoizedState)&&(Di=e)}function Li(e){V(Ui,Ui.current),V(Ri,e),null===Di&&(Di=e)}function Mi(e){22===e.tag?(V(Ui,Ui.current),V(Ri,e),null===Di&&(Di=e)):Fi()}function Fi(){V(Ui,Ui.current),V(Ri,Ri.current)}function zi(e){U(Ri),Di===e&&(Di=null),U(Ui)}var Ui=z(0);function Vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||jd(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=0,Hi=null,qi=null,Wi=null,Ki=!1,Gi=!1,Qi=!1,Yi=0,Xi=0,$i=null,Ji=0;function Zi(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,s,i){return Bi=i,Hi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?vo:yo,Qi=!1,i=n(r,s),Qi=!1,Gi&&(i=ra(t,n,r,s)),na(e),i}function na(e){D.H=go;var t=null!==qi&&null!==qi.next;if(Bi=0,Wi=qi=Hi=null,Ki=!1,Xi=0,$i=null,t)throw Error(a(300));null===e||Do||null!==(e=e.dependencies)&&As(e)&&(Do=!0)}function ra(e,t,n,r){Hi=e;var s=0;do{if(Gi&&($i=null),Xi=0,Gi=!1,25<=s)throw Error(a(301));if(s+=1,Wi=qi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=bo,i=t(n,r)}while(Gi);return i}function sa(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?ua(t):t,e=e.useState()[0],(null!==qi?qi.memoizedState:null)!==e&&(Hi.flags|=1024),t}function ia(){var e=0!==Yi;return Yi=0,e}function aa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oa(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}Bi=0,Wi=qi=Hi=null,Gi=!1,Xi=Yi=0,$i=null}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function ca(){if(null===qi){var e=Hi.alternate;e=null!==e?e.memoizedState:null}else e=qi.next;var t=null===Wi?Hi.memoizedState:Wi.next;if(null!==t)Wi=t,qi=e;else{if(null===e){if(null===Hi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(qi=e).memoizedState,baseState:qi.baseState,baseQueue:qi.baseQueue,queue:qi.queue,next:null},null===Wi?Hi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ua(e){var t=Xi;return Xi+=1,null===$i&&($i=[]),e=ni($i,e,t),t=Hi,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?vo:yo),e}function da(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ua(e);if(e.$$typeof===x)return js(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=Hi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Hi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function fa(e,t){return"function"===typeof t?t(e):t}function pa(e){return ma(ca(),qi,e)}function ma(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(vc&h)===h:(Bi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hs&&(d=!0);else{if((Bi&f)===f){u=u.next,f===Hs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,Hi.lanes|=f,Ec|=f}h=u.action,Qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,Hi.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Jn(i,e.memoizedState)&&(Do=!0,d&&null!==(n=qs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ga(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Jn(i,t.memoizedState)||(Do=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function va(e,t,n){var r=Hi,s=ca(),i=ds;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Jn((qi||s).memoizedState,n);if(o&&(s.memoizedState=n,Do=!0),s=s.queue,Ba(wa.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Wi&&1&Wi.memoizedState.tag){if(r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,s,n,t),null),null===mc)throw Error(a(349));i||0!==(127&Bi)||ya(r,t,n)}return n}function ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Hi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ba(e,t,n,r){t.value=n,t.getSnapshot=r,xa(t)&&ka(e)}function wa(e,t,n){return n(function(){xa(t)&&ka(e)})}function xa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function ka(e){var t=Rr(e,2);null!==t&&Yc(t,e,2)}function Sa(e){var t=la();if("function"===typeof e){var n=e;if(e=n(),Qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function _a(e,t,n,r){return e.baseState=n,ma(e,qi,"function"===typeof r?r:fa)}function Ea(e,t,n,r,s){if(fo(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),Ta(e,t,o)}catch(c){Ia(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),D.T=i}}else try{Ta(e,t,i=n(s,r))}catch(u){Ia(e,t,u)}}function Ta(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ca(e,t,n)},function(n){return Ia(e,t,n)}):Ca(e,t,n)}function Ca(e,t,n){t.status="fulfilled",t.value=n,Aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Na(e,n)))}function Ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Aa(t),t=t.next}while(t!==r)}e.action=null}function Aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pa(e,t){return t}function ja(e,t){if(ds){var n=mc.formState;if(null!==n){e:{var r=Hi;if(ds){if(us){t:{for(var s=us,i=fs;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=Dd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){us=Dd(s.nextSibling),r="F!"===s.data;break e}}ms(r)}r=!1}r&&(t=n[0])}}return(n=la()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},n.queue=r,n=co.bind(null,Hi,r),r.dispatch=n,r=Sa(!1),i=ho.bind(null,Hi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=la()).queue=s,n=Ea.bind(null,Hi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ra(e){return Da(ca(),qi,e)}function Da(e,t,n){if(t=ma(e,t,Pa)[0],e=pa(fa)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ua(t)}catch(ai){if(ai===$s)throw Zs;throw ai}else r=t;var s=(t=ca()).queue,i=s.dispatch;return n!==t.memoizedState&&(Hi.flags|=2048,Ma(9,{destroy:void 0},Oa.bind(null,s,n),null)),[r,i,e]}function Oa(e,t){e.action=t}function La(e){var t=ca(),n=qi;if(null!==n)return Da(t,n,e);ca(),t=t.memoizedState;var r=(n=ca()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Hi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return ca().memoizedState}function za(e,t,n,r){var s=la();Hi.flags|=e,s.memoizedState=Ma(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ua(e,t,n,r){var s=ca();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==qi&&null!==r&&ea(r,qi.memoizedState.deps)?s.memoizedState=Ma(t,i,n,r):(Hi.flags|=e,s.memoizedState=Ma(1|t,i,n,r))}function Va(e,t){za(8390656,8,e,t)}function Ba(e,t){Ua(2048,8,e,t)}function Ha(e){var t=ca().memoizedState;return function(e){Hi.flags|=4;var t=Hi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Hi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function qa(e,t){return Ua(4,2,e,t)}function Wa(e,t){return Ua(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ga(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ea(t,r[1]))return r[0];if(r=e(),Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function $a(e,t,n){return void 0===n||0!==(1073741824&Bi)&&0===(261930&vc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Hi.lanes|=e,Ec|=e,n)}function Ja(e,t,n,r){return Jn(n,t)?n:null!==Ci.current?(e=$a(e,n,r),Jn(e,t)||(Do=!0),e):0===(42&Bi)||0!==(1073741824&Bi)&&0===(261930&vc)?(Do=!0,e.memoizedState=n):(e=Qc(),Hi.lanes|=e,Ec|=e,t)}function Za(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,ho(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else uo(e,t,r,Gc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{O.p=i,null!==a&&null!==o.types&&(a.types=o.types),D.T=a}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=no(e).queue;Za(e,s,t,L,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Gc())}function so(){return js(dh)}function io(){return ca().memoizedState}function ao(){return ca().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=wi(t,e=bi(n),n);return null!==r&&(Yc(r,t,n),xi(r,t,n)),t={cache:zs()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?po(t,n):null!==(n=jr(e,t,n,r))&&(Yc(n,e,r),mo(n,t,r))}function co(e,t,n){uo(e,t,n,Gc())}function uo(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))po(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Jn(o,a))return Pr(e,t,s,0),null===mc&&Ar(),!1}catch(l){}if(null!==(n=jr(e,t,s,r)))return Yc(n,e,r),mo(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:Hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(a(479))}else null!==(t=jr(e,n,r,2))&&Yc(t,e,2)}function fo(e){var t=e.alternate;return e===Hi||null!==t&&t===Hi}function po(e,t){Gi=Ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var go={readContext:js,use:da,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};go.useEffectEvent=Zi;var vo={readContext:js,use:da,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:Va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){za(4,2,e,t)},useMemo:function(e,t){var n=la();t=void 0===t?null:t;var r=e();if(Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=la();if(void 0!==n){var s=n(t);if(Qi){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=lo.bind(null,Hi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},la().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=co.bind(null,Hi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return $a(la(),e,t)},useTransition:function(){var e=Sa(!1);return e=Za.bind(null,Hi,e.queue,!0,!1),la().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Hi,s=la();if(ds){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===mc)throw Error(a(349));0!==(127&vc)||ya(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Va(wa.bind(null,r,i,e),[e]),r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,i,n,t),null),n},useId:function(){var e=la(),t=mc.identifierPrefix;if(ds){var n=rs;t="_"+t+"R_"+(n=(ns&~(1<<32-we(ns)-1)).toString(32)+n),0<(n=Yi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Ji++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:ja,useActionState:ja,useOptimistic:function(e){var t=la();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,Hi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return la().memoizedState=oo.bind(null,Hi)},useEffectEvent:function(e){var t=la(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:js,use:da,useCallback:Ya,useContext:js,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Xa,useReducer:pa,useRef:Fa,useState:function(){return pa(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){return Ja(ca(),qi.memoizedState,e,t)},useTransition:function(){var e=pa(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:va,useId:io,useHostTransitionStatus:so,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){return _a(ca(),0,e,t)},useMemoCache:ha,useCacheRefresh:ao};yo.useEffectEvent=Ha;var bo={readContext:js,use:da,useCallback:Ya,useContext:js,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:qa,useLayoutEffect:Wa,useMemo:Xa,useReducer:ga,useRef:Fa,useState:function(){return ga(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=ca();return null===qi?$a(n,e,t):Ja(n,qi.memoizedState,e,t)},useTransition:function(){var e=ga(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:va,useId:io,useHostTransitionStatus:so,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=ca();return null!==qi?_a(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:ao};function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=Ha;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=wi(e,s,r))&&(Yc(t,e,r),xi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=wi(e,s,r))&&(Yc(t,e,r),xi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=bi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wi(e,r,n))&&(Yc(t,e,n),xi(t,e,n))}};function ko(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(s,i))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function _o(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=f({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Eo(e){Nr(e)}function No(e){console.error(e)}function To(e){Nr(e)}function Co(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Io(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ao(e,t,n){return(n=bi(n)).tag=3,n.payload={element:null},n.callback=function(){Co(e,t)},n}function Po(e){return(e=bi(e)).tag=3,e}function jo(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){Io(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Io(t,n,r),"function"!==typeof s&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(a(461)),Do=!1;function Oo(e,t,n,r){t.child=null===e?mi(t,null,n,r):pi(t,e.child,n,r)}function Lo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ps(t),r=ta(e,t,n,a,i,s),o=ia(),null===e||Do?(ds&&o&&as(t),t.flags|=1,Oo(e,t,r,s),t.child):(aa(e,t,s),il(e,t,s))}function Mo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||zr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fo(e,t,i,r,s))}if(i=e.child,!al(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(a,r)&&e.ref===t.ref)return il(e,t,s)}return t.flags|=1,(e=Ur(i,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Zn(i,r)&&e.ref===t.ref){if(Do=!1,t.pendingProps=r=i,!al(e,s))return t.lanes=e.lanes,il(e,t,s);0!==(131072&e.flags)&&(Do=!0)}}return Wo(e,t,n,r,s)}function zo(e,t,n,r){var s=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~i}else r=0,t.child=null;return Vo(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Vo(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ys(0,null!==i?i.cachePool:null),null!==i?Ai(t,i):Pi(),Mi(t)}else null!==i?(Ys(0,i.cachePool),Ai(t,i),Fi(),t.memoizedState=null):(null!==e&&Ys(0,null),Pi(),Fi());return Oo(e,t,s,n),t.child}function Uo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Vo(e,t,n,r,s){var i=Qs();return i=null===i?null:{parent:Fs._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ys(0,null),Pi(),Mi(t),null!==e&&Is(e,t,r,!0),t.childLanes=s,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ho(e,t,n){return pi(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function qo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,s){return Ps(t),n=ta(e,t,n,r,void 0,s),r=ia(),null===e||Do?(ds&&r&&as(t),t.flags|=1,Oo(e,t,n,s),t.child):(aa(e,t,s),il(e,t,s))}function Ko(e,t,n,r,s,i){return Ps(t),t.updateQueue=null,n=ra(t,r,n,s),na(e),r=ia(),null===e||Do?(ds&&r&&as(t),t.flags|=1,Oo(e,t,n,i),t.child):(aa(e,t,i),il(e,t,i))}function Go(e,t,n,r,s){if(Ps(t),null===t.stateNode){var i=Lr,a=n.contextType;"object"===typeof a&&null!==a&&(i=js(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=xo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},vi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?js(a):Lr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(wo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&xo.enqueueReplaceState(i,i.state,null),Ei(t,r,i,s),_i(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=_o(n,o);i.props=l;var c=i.context,u=n.contextType;a=Lr,"object"===typeof u&&null!==u&&(a=js(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&So(t,i,r,a),gi=!1;var h=t.memoizedState;i.state=h,Ei(t,r,i,s),_i(),c=t.memoizedState,o||h!==c||gi?("function"===typeof d&&(wo(t,n,d,r),c=t.memoizedState),(l=gi||ko(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,yi(e,t),u=_o(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=js(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&So(t,i,r,l),gi=!1,h=t.memoizedState,i.state=h,Ei(t,r,i,s),_i();var f=t.memoizedState;a!==d||h!==f||gi||null!==e&&null!==e.dependencies&&As(e.dependencies)?("function"===typeof o&&(wo(t,n,o,r),f=t.memoizedState),(u=gi||ko(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&As(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,qo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=pi(t,e.child,null,s),t.child=pi(t,null,n,s)):Oo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=il(e,t,s),e}function Qo(e,t,n,r){return bs(),t.flags|=256,Oo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Xs()}}function $o(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function Jo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ui.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ds){if(i?Oi(t):Fi(),(e=us)?null!==(e=null!==(e=Pd(e,fs))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw ms(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Fi(),l=el({mode:"hidden",children:l},i=t.mode),s=Hr(s,i,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Xo(n),s.childLanes=$o(e,r,n),t.memoizedState=Yo,Uo(null,s)):(Oi(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Oi(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),l=s.fallback,i=t.mode,s=el({mode:"visible",children:s.children},i),(l=Hr(l,i,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,pi(t,e.child,null,n),(s=t.child).memoizedState=Xo(n),s.childLanes=$o(e,r,n),t.memoizedState=Yo,t=Uo(null,s));else if(Oi(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,xs({value:s,source:null,stack:null}),t=tl(e,t,n)}else if(Do||Is(e,t,n,!1),r=0!==(n&e.childLanes),Do||r){if(null!==(r=mc)&&(0!==(s=Oe(r,n))&&s!==c.retryLane))throw c.retryLane=s,Rr(e,s),Yc(r,e,s),Ro;jd(l)||ou(),t=tl(e,t,n)}else jd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,us=Dd(l.nextSibling),cs=t,ds=!0,hs=null,fs=!1,null!==e&&ls(t,e),(t=Zo(t,s.children)).flags|=4096);return t}return i?(Fi(),l=s.fallback,i=t.mode,u=(c=e.child).sibling,(s=Ur(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Hr(l,i,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Uo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(i=l.cachePool)?(c=Fs._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Xs(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=$o(e,r,n),t.memoizedState=Yo,Uo(e.child,s)):(Oi(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function tl(e,t,n){return pi(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function rl(e,t,n,r,s,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s,a.treeForkCount=i)}function sl(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;r=r.children;var a=Ui.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,V(Ui,a),Oo(e,t,r,n),r=ds?Jr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Vi(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),rl(t,!1,s,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Vi(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}rl(t,!0,n,null,i,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Is(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!As(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Do=!0;else{if(!al(e,n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Es(0,Fs,e.memoizedState.cache),bs();break;case 27:case 5:X(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Es(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Li(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Oi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Oi(t),null!==(e=il(e,t,n))?e.sibling:null);Oi(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Is(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return sl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),V(Ui,Ui.current),r)break;return null;case 22:return t.lanes=0,zo(e,t,n,t.pendingProps);case 24:Es(0,Fs,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,ds&&0!==(1048576&t.flags)&&is(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ri(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===k){t.tag=11,t=Lo(null,t,e,r,n);break e}if(s===E){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=j(e)||e,Error(a(306,t,""))}zr(e)?(r=_o(e,r),t.tag=1,t=Go(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return Go(e,t,r=t.type,s=_o(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,yi(e,t),Ei(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Es(0,Fs,r),r!==i.cache&&Cs(t,[Fs],n,!0),_i(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qo(e,t,r,n);break e}if(r!==s){xs(s=Qr(Error(a(424)),t)),t=Qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(us=Dd(e.firstChild),cs=t,ds=!0,hs=null,fs=!0,n=mi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bs(),r===s){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return qo(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ds||(n=t.type,e=t.pendingProps,(r=vd(K.current).createElement(n))[Ve]=t,r[Be]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&ds&&(r=t.stateNode=Fd(t.type,t.pendingProps,K.current),cs=t,fs=!0,s=us,Td(t.type)?(Od=s,us=Dd(r.firstChild)):us=s),Oo(e,t,t.pendingProps.children,n),qo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ds&&((s=r=us)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=Dd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fs))?(t.stateNode=r,cs=t,us=Dd(r.firstChild),fs=!1,s=!0):s=!1),s||ms(t)),X(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,wd(s,i)?r=null:null!==o&&wd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ta(e,t,sa,null,null,n),dh._currentValue=s),qo(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&ds&&((e=n=us)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}(n,t.pendingProps,fs))?(t.stateNode=n,cs=t,us=null,e=!0):e=!1),e||ms(t)),null;case 13:return Jo(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=pi(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Es(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ps(t),r=r(s=js(s)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ds){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,Uo(null,e);if(Li(t),(e=us)?null!==(e=null!==(e=Pd(e,fs))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw ms(t);return t.lanes=536870912,null}return Bo(t,r)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Li(t),s)if(256&t.flags)t.flags&=-257,t=Ho(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Do||Is(e,t,n,!1),s=0!==(n&e.childLanes),Do||s){if(null!==(r=mc)&&0!==(o=Oe(r,n))&&o!==i.retryLane)throw i.retryLane=o,Rr(e,o),Yc(r,e,o),Ro;ou(),t=Ho(e,t,n)}else e=i.treeContext,us=Dd(o.nextSibling),cs=t,ds=!0,hs=null,fs=!1,null!==e&&ls(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return zo(e,t,n,t.pendingProps);case 24:return Ps(t),r=js(Fs),null===e?(null===(s=Qs())&&(s=mc,i=zs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},vi(t),Es(0,Fs,s)):(0!==(e.lanes&n)&&(yi(e,t),Ei(t,null,null,n),_i()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),Es(0,Fs,r)):(r=i.cache,Es(0,Fs,r),r!==s.cache&&Cs(t,[Fs],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw si=ei,Js;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!su())throw si=ei,Js;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ae():536870912,e.lanes|=t,Ic|=t)}function hl(e,t){if(!ds)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pl(e,t,n){var r=t.pendingProps;switch(os(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ns(Fs),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ys(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ws())),fl(t),null;case 26:var s=t.type,i=t.memoizedState;return null===e?(ll(t),null!==i?(fl(t),ul(t,i)):(fl(t),cl(t,s,0,0,n))):i?i!==e.memoizedState?(ll(t),fl(t),ul(t,i)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,s,0,0,n)),null;case 27:if($(t),n=K.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}e=q.current,ys(t)?gs(t):(e=Fd(s,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if($(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}if(i=q.current,ys(t))gs(t);else{var o=vd(K.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}i[Ve]=t,i[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(fd(i,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=K.current,ys(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=cs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||ms(t,!0)}else(e=vd(e).createTextNode(r))[Ve]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=ys(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Ve]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(0!==(128&t.flags))throw Error(a(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=ys(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Ve]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),s=!1}else s=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&ed(t.stateNode.containerInfo),fl(t),null;case 10:return Ns(t.type),fl(t),null;case 19:if(U(Ui),null===(r=t.memoizedState))return fl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)hl(r,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Vi(e))){for(t.flags|=128,hl(r,!1),e=i.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return V(Ui,1&Ui.current|2),ds&&ss(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=Vi(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ds)return fl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ui.current,V(Ui,s?1&n|2:1&n),ds&&ss(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return zi(t),ji(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Gs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ns(Fs),fl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function ml(e,t){switch(os(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ns(Fs),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(a(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Ui),null;case 4:return Y(),null;case 10:return Ns(t.type),null;case 22:case 23:return zi(t),ji(),null!==e&&U(Gs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ns(Fs),null;default:return null}}function gl(e,t){switch(os(t),t.tag){case 3:Ns(Fs),Y();break;case 26:case 27:case 5:$(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:U(Ui);break;case 10:Ns(t.type);break;case 22:case 23:zi(t),ji(),null!==e&&U(Gs);break;case 24:Ns(Fs)}}function vl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){_u(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){_u(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){_u(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ti(t,n)}catch(r){_u(e,e.return,r)}}}function wl(e,t,n){n.props=_o(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){_u(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){_u(e,t,s)}}function kl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){_u(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){_u(e,t,i)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){_u(e,e.return,s)}}function _l(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||dd(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&dd(e,t,f,p,r,h)}}return void yt(e,o,l,c,u,d,i,s);case"select":for(i in p=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||dd(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&dd(e,t,s,i,r,c)}return t=l,n=o,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&dd(e,t,o,s,r,i)}return void kt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else dd(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else dd(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:dd(e,t,u,f,r,p)}return;default:if(Ct(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&hd(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||hd(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&dd(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||dd(e,t,h,f,r,p)}(r,e.type,n,t),r[Be]=t}catch(s){_u(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Td(e.type)||4===e.tag}function Nl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Td(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jt));else if(4!==r&&(27===r&&Td(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Td(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);fd(t,r,n),t[Ve]=e,t[Be]=n}catch(i){_u(e,e.return,i)}}var Al=!1,Pl=!1,jl=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&vl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){_u(n,n.return,a)}else{var s=_o(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){_u(n,n.return,o)}}64&r&&bl(n),512&r&&xl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ti(e,t)}catch(a){_u(n,n.return,a)}}break;case 27:null===t&&4&r&&Il(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&xl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Vl(e,n);break;case 13:Yl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Cu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Al)){t=null!==t&&null!==t.memoizedState||Pl,s=Al;var i=Pl;Al=r,(Pl=t)&&!i?$l(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Al=s,Pl=i}break;case 30:break;default:Yl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function zl(e,t,n){for(n=n.child;null!==n;)Ul(e,t,n),n=n.sibling}function Ul(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(i){}switch(n.tag){case 26:Pl||kl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||kl(n,t);var r=Ml,s=Fl;Td(n.type)&&(Ml=n.stateNode,Fl=!1),zl(e,t,n),zd(n.stateNode),Ml=r,Fl=s;break;case 5:Pl||kl(n,t);case 6:if(r=Ml,s=Fl,Ml=null,zl(e,t,n),Fl=s,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(a){_u(n,t,a)}else try{Ml.removeChild(n.stateNode)}catch(a){_u(n,t,a)}break;case 18:null!==Ml&&(Fl?(Cd(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Cd(Ml,n.stateNode));break;case 4:r=Ml,s=Fl,Ml=n.stateNode.containerInfo,Fl=!0,zl(e,t,n),Ml=r,Fl=s;break;case 0:case 11:case 14:case 15:yl(2,n,t),Pl||yl(4,n,t),zl(e,t,n);break;case 1:Pl||(kl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&wl(n,t,r)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Pl=(r=Pl)||null!==n.memoizedState,zl(e,t,n),Pl=r;break;default:zl(e,t,n)}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){_u(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){_u(t,t.return,n)}}function Hl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Iu.bind(null,e,t);t.then(r,r)}})}function ql(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Td(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(a(160));Ul(i,o,s),Ml=null,Fl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ql(t,e),Gl(e),4&r&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:ql(t,e),Gl(e),512&r&&(Pl||null===n||kl(n,n.return)),64&r&&Al&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Wl;if(ql(t,e),Gl(e),512&r&&(Pl||null===n||kl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Qe]||i[Ve]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),fd(i,r,n),i[Ve]=e,et(i),r=i;break e;case"link":var o=rh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=rh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Ve]=e,et(i),r=i}e.stateNode=r}else sh(s,e.type,e.stateNode);else e.stateNode=Jd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?sh(s,e.type,e.stateNode):Jd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_l(e,e.memoizedProps,n.memoizedProps)}break;case 27:ql(t,e),Gl(e),512&r&&(Pl||null===n||kl(n,n.return)),null!==n&&4&r&&_l(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ql(t,e),Gl(e),512&r&&(Pl||null===n||kl(n,n.return)),32&e.flags){s=e.stateNode;try{_t(s,"")}catch(m){_u(e,e.return,m)}}4&r&&null!=e.stateNode&&_l(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(jl=!0);break;case 6:if(ql(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){_u(e,e.return,m)}}break;case 3:if(nh=null,s=Wl,Wl=Bd(t.containerInfo),ql(t,e),Wl=s,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){_u(e,e.return,m)}jl&&(jl=!1,Ql(e));break;case 4:r=Wl,Wl=Bd(e.stateNode.containerInfo),ql(t,e),Gl(e),Wl=r;break;case 12:default:ql(t,e),Gl(e);break;case 31:case 19:ql(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 13:ql(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Hl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Al,d=Pl;if(Al=u||s,Pl=d||c,ql(t,e),Pl=d,Al=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||Al||Pl||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){_u(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){_u(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;s?Id(p,!0):Id(c.stateNode,!1)}catch(m){_u(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Hl(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;Cl(e,Nl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(_t(i,""),n.flags&=-33),Cl(e,Nl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Tl(e,Nl(e),o);break;default:throw Error(a(161))}}catch(l){_u(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Xl(t);break;case 1:kl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&wl(t,t.return,n),Xl(t);break;case 27:zd(t.stateNode);case 26:case 5:kl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function $l(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:$l(s,i,n),vl(4,i);break;case 1:if($l(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){_u(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Ni(l[s],o)}catch(c){_u(r,r.return,c)}}n&&64&a&&bl(i),xl(i,i.return);break;case 27:Il(i);case 26:case 5:$l(s,i,n),n&&null===r&&4&a&&Sl(i),xl(i,i.return);break;case 12:$l(s,i,n);break;case 31:$l(s,i,n),n&&4&a&&Vl(s,i);break;case 13:$l(s,i,n),n&&4&a&&Bl(s,i);break;case 22:null===i.memoizedState&&$l(s,i,n),xl(i,i.return);break;case 30:break;default:$l(s,i,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Us(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&s&&vl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Us(e)));break;case 12:if(2048&s){ec(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){_u(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?ec(e,t,n,r):rc(e,t):2&i._visibility?ec(e,t,n,r):(i._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&Jl(a,t);break;case 24:ec(e,t,n,r),2048&s&&Zl(t.alternate,t)}}function nc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:nc(i,a,o,l,s),vl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?nc(i,a,o,l,s):rc(i,a):(u._visibility|=2,nc(i,a,o,l,s)),s&&2048&c&&Jl(a.alternate,a);break;case 24:nc(i,a,o,l,s),s&&2048&c&&Zl(a.alternate,a);break;default:nc(i,a,o,l,s)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:rc(n,r),2048&s&&Jl(r.alternate,r);break;case 24:rc(n,r),2048&s&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var sc=8192;function ic(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Gd(r.href),i=t.querySelector(Qd(s));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Yd(r),(s=Ud.get(s))&&eh(r,s),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Wl;Wl=Bd(e.stateNode.containerInfo),ic(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sc,sc=16777216,ic(e,t,n),sc=r):ic(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Dl;){var n=Dl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Us(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Dl=r;else e:for(n=e;null!==Dl;){var s=(r=Dl).sibling,i=r.return;if(Ll(r),r===n){Dl=null;break e}if(null!==s){s.return=i,Dl=s;break e}Dl=i}}}var hc={getCacheForType:function(e){var t=js(Fs),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return js(Fs).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,pc=0,mc=null,gc=null,vc=0,yc=0,bc=null,wc=!1,xc=!1,kc=!1,Sc=0,_c=0,Ec=0,Nc=0,Tc=0,Cc=0,Ic=0,Ac=null,Pc=null,jc=!1,Rc=0,Dc=0,Oc=1/0,Lc=null,Mc=null,Fc=0,zc=null,Uc=null,Vc=0,Bc=0,Hc=null,qc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&pc)&&0!==vc?vc&-vc:null!==D.T?Hu():Fe()}function Qc(){if(0===Cc)if(0===(536870912&vc)||ds){var e=_e;0===(3932160&(_e<<=1))&&(_e=262144),Cc=e}else Cc=536870912;return null!==(e=Ri.current)&&(e.flags|=32),Cc}function Yc(e,t,n){(e!==mc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,vc,Cc,!1)),je(e,n),0!==(2&pc)&&e===mc||(e===mc&&(0===(2&pc)&&(Nc|=n),4===_c&&Zc(e,vc,Cc,!1)),Lu(e))}function Xc(e,t,n){if(0!==(6&pc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),s=r?function(e,t){var n=pc;pc|=2;var r=iu(),s=au();mc!==e||vc!==t?(Lc=null,Oc=le()+500,nu(e,t)):xc=Ce(e,t);e:for(;;)try{if(0!==yc&&null!==gc){t=gc;var i=bc;t:switch(yc){case 1:yc=0,bc=null,fu(e,t,i,1);break;case 2:case 9:if(ti(i)){yc=0,bc=null,hu(t);break}t=function(){2!==yc&&9!==yc||mc!==e||(yc=7),Lu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ti(i)?(yc=0,bc=null,hu(t)):(yc=0,bc=null,fu(e,t,i,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ih(o):l.stateNode.complete){yc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,pu(u)):gc=null}break t}}yc=0,bc=null,fu(e,t,i,5);break;case 6:yc=0,bc=null,fu(e,t,i,6);break;case 8:tu(),_c=6;break e;default:throw Error(a(462))}}uu();break}catch(d){ru(e,d)}return _s=Ss=null,D.H=r,D.A=s,pc=n,null!==gc?0:(mc=null,vc=0,Ar(),_c)}(e,t):lu(e,t,!0),i=r;;){if(0===s){xc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Jc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=Ac;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(kc&&!c){l.errorRecoveryDisabledLanes|=i,Nc|=i,s=4;break e}i=Pc,Pc=s,null!==i&&(null===Pc?Pc=i:Pc.push.apply(Pc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Cc,!wc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Rc+300-le())){if(Zc(r,t,Cc,!wc),0!==Te(r,0,!0))break e;Vc=t,r.timeoutHandle=kd($c.bind(null,r,n,Pc,Lc,jc,t,Cc,Nc,Ic,wc,i,"Throttled",-0,0),s)}else $c(r,n,Pc,Lc,jc,t,Cc,Nc,Ic,wc,i,null,-0,0)}break}s=lu(e,t,!1),i=!1}Lu(e)}function $c(e,t,n,r,s,i,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jt});var p=(62914560&i)===i?Rc-le():(4194048&i)===i?Dc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],i=s.transferSize,a=s.initiatorType,o=s.duration;if(i&&o&&pd(a)){for(a=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&pd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+a)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,p),null!==p)return Vc=i,e.cancelPendingCommit=p(gu.bind(null,e,t,i,n,r,s,a,o,l,u,d,null,h,f)),void Zc(e,i,a,!c)}gu(e,t,i,n,r,s,a,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Tc,t&=~Nc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-we(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Re(e,n,t)}function eu(){return 0!==(6&pc)||(Mu(0,!1),!1)}function tu(){if(null!==gc){if(0===yc)var e=gc.return;else _s=Ss=null,oa(e=gc),li=null,ci=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc=0,tu(),mc=e,gc=n=Ur(e.current,null),vc=t,yc=0,bc=null,wc=!1,xc=Ce(e,t),kc=!1,Ic=Cc=Tc=Nc=Ec=_c=0,Pc=Ac=null,jc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-we(r),i=1<<s;t|=e[s],r&=~i}return Sc=t,Ar(),n}function ru(e,t){Hi=null,D.H=go,t===$s||t===Zs?(t=ii(),yc=3):t===Js?(t=ii(),yc=4):yc=t===Ro?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(_c=1,Co(e,Qr(t,e.current)))}function su(){var e=Ri.current;return null===e||((4194048&vc)===vc?null===Di:((62914560&vc)===vc||0!==(536870912&vc))&&e===Di)}function iu(){var e=D.H;return D.H=go,null===e?go:e}function au(){var e=D.A;return D.A=hc,e}function ou(){_c=4,wc||(4194048&vc)!==vc&&null!==Ri.current||(xc=!0),0===(134217727&Ec)&&0===(134217727&Nc)||null===mc||Zc(mc,vc,Cc,!1)}function lu(e,t,n){var r=pc;pc|=2;var s=iu(),i=au();mc===e&&vc===t||(Lc=null,nu(e,t)),t=!1;var a=_c;e:for(;;)try{if(0!==yc&&null!==gc){var o=gc,l=bc;switch(yc){case 8:tu(),a=6;break e;case 3:case 2:case 9:case 6:null===Ri.current&&(t=!0);var c=yc;if(yc=0,bc=null,fu(e,o,l,c),n&&xc){a=0;break e}break;default:c=yc,yc=0,bc=null,fu(e,o,l,c)}}cu(),a=_c;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,_s=Ss=null,pc=r,D.H=s,D.A=i,null===gc&&(mc=null,vc=0,Ar()),a}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!ae();)du(gc)}function du(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:oa(t);default:gl(n,t),t=ol(n,t=gc=Vr(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?pu(e):gc=t}function fu(e,t,n,r){_s=Ss=null,oa(t),li=null,ci=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Is(t,n,s,!0),null!==(n=Ri.current)){switch(n.tag){case 31:case 13:return null===Di?ou():null===n.alternate&&0===_c&&(_c=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,s)),!1;case 22:return n.flags|=65536,r===ei?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,s)),!1}throw Error(a(435,n.tag))}return Eu(e,r,s),ou(),!1}if(ds)return null!==(t=Ri.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ps&&xs(Qr(e=Error(a(422),{cause:r}),n))):(r!==ps&&xs(Qr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Qr(r,n),ki(e,s=Ao(e.stateNode,r,s)),4!==_c&&(_c=2)),!1;var i=Error(a(520),{cause:r});if(i=Qr(i,n),null===Ac?Ac=[i]:Ac.push(i),4!==_c&&(_c=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ki(n,e=Ao(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Mc||!Mc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,jo(s=Po(s),e,n,r),ki(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,vc))return _c=1,Co(e,Qr(n,e.current)),void(gc=null)}catch(i){if(null!==s)throw gc=s,i;return _c=1,Co(e,Qr(n,e.current)),void(gc=null)}32768&t.flags?(ds||1===r?e=!0:xc||0!==(536870912&vc)?e=!1:(wc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ri.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,wc);e=t.return;var n=pl(t.alternate,t,Sc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===_c&&(_c=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);_c=6,gc=null}function gu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Fc);if(0!==(6&pc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Ir,o,l,c),e===mc&&(gc=mc=null,vc=0),Uc=t,zc=e,Vc=n,Bc=i,Hc=s,qc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=O.p,O.p=2,o=pc,pc|=4;try{!function(e,t){if(e=e.containerInfo,md=wh,sr(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},wh=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){switch(i=(t=Dl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=_o(n.type,s);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){_u(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ad(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ad(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}}(e,t)}finally{pc=o,O.p=s,D.T=r}}Fc=1,vu(),yu(),bu()}}function vu(){if(1===Fc){Fc=0;var e=zc,t=Uc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=pc;pc|=4;try{Kl(t,e);var i=gd,a=rr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&sr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var v=tr(o,m),y=tr(o,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}wh=!!md,gd=md=null}finally{pc=s,O.p=r,D.T=n}}e.current=t,Fc=2}}function yu(){if(2===Fc){Fc=0;var e=zc,t=Uc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=pc;pc|=4;try{Ol(e,t.alternate,t)}finally{pc=s,O.p=r,D.T=n}}Fc=3}}function bu(){if(4===Fc||3===Fc){Fc=0,oe();var e=zc,t=Uc,n=Vc,r=qc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Uc=zc=null,wu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Mc=null),Me(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=O.p,O.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,O.p=s}}0!==(3&Vc)&&xu(),Lu(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Mu(0,!1)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Us(t)))}function xu(){return vu(),yu(),bu(),ku()}function ku(){if(5!==Fc)return!1;var e=zc,t=Bc;Bc=0;var n=Me(Vc),r=D.T,s=O.p;try{O.p=32>n?32:n,D.T=null,n=Hc,Hc=null;var i=zc,o=Vc;if(Fc=0,Uc=zc=null,Vc=0,0!==(6&pc))throw Error(a(331));var l=pc;if(pc|=4,cc(i.current),tc(i,i.current,o,n),pc=l,Mu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,i)}catch(c){}return!0}finally{O.p=s,D.T=r,wu(e,t)}}function Su(e,t,n){t=Qr(n,t),null!==(e=wi(e,t=Ao(e.stateNode,t,2),2))&&(je(e,2),Lu(e))}function _u(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Qr(n,e),null!==(r=wi(t,n=Po(2),2))&&(jo(n,r,t,e),je(r,2),Lu(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(kc=!0,s.add(n),e=Nu.bind(null,e,t,n),t.then(e,e))}function Nu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(vc&n)===n&&(4===_c||3===_c&&(62914560&vc)===vc&&300>le()-Rc?0===(2&pc)&&nu(e,0):Tc|=n,Ic===vc&&(Ic=0)),Lu(e)}function Tu(e,t){0===t&&(t=Ae()),null!==(e=Rr(e,t))&&(je(e,t),Lu(e))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tu(e,n)}var Au=null,Pu=null,ju=!1,Ru=!1,Du=!1,Ou=0;function Lu(e){e!==Pu&&null===e.next&&(null===Pu?Au=Pu=e:Pu=Pu.next=e),Ru=!0,ju||(ju=!0,Ed(function(){0!==(6&pc)?se(ue,Fu):zu()}))}function Mu(e,t){if(!Du&&Ru){Du=!0;do{for(var n=!1,r=Au;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Bu(r,i))}else i=vc,0===(3&(i=Te(r,r===mc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ce(r,i)||(n=!0,Bu(r,i));r=r.next}}while(n);Du=!1}}function Fu(){zu()}function zu(){Ru=ju=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Au;null!==r;){var s=r.next,i=Uu(r,t);0===i?(r.next=null,null===n?Au=s:n.next=s,null===s&&(Pu=n)):(n=r,(0!==e||0!==(3&i))&&(Ru=!0)),r=s}0!==Fc&&5!==Fc||Mu(e,!1),0!==Ou&&(Ou=0)}function Uu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-we(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=vc,n=Te(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Vu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Vu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=vc;return 0===(r=Te(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),Uu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Vu.bind(null,e):null)}function Bu(e,t){if(xu())return null;Xc(e,t,!0)}function Hu(){if(0===Ou){var e=Hs;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Ou=e}return Ou}function qu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<_r.length;Ku++){var Gu=_r[Ku];Er(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Er(gr,"onAnimationEnd"),Er(vr,"onAnimationIteration"),Er(yr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(br,"onTransitionRun"),Er(wr,"onTransitionStart"),Er(xr,"onTransitionCancel"),Er(kr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Nr(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){Nr(u)}s.currentTarget=null,i=l}}}}function $u(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function td(e,t,n,r){switch(Th(t)){case 2:var s=xh;break;case 8:s=kh;break;default:s=Sh}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=Xe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}zt(function(){var r=i,s=Dt(n),a=[];e:{var o=Sr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case vr:case yr:c=un;break;case kr:c=xn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=kn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&d.push(rd(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[He])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Je(c),p=null==u?o:Je(u),(o=new d(g,m+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,Xe(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var v=m;v;v=d(v))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&ad(a,o,c,d,!1),null!==u&&null!==h&&ad(a,h,u,d,!0)}if("select"===(c=(o=r?Je(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Vn;else if(On(o))if(Bn)y=$n;else{y=Yn;var b=Qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Ct(r.elementType)&&(y=Vn):y=Xn;switch(y&&(y=y(e,r))?Ln(a,y,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wt(o,"number",o.value)),b=r?Je(r):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(ar=b,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,s);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(a,n,s)}var w;if(En)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Rn?Pn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Rn&&(w=Gt()):(Wt="value"in(qt=s)?qt.value:qt.textContent,Rn=!0)),0<(b=sd(r,x)).length&&(x=new hn(x,e,null,n,s),a.push({event:x,listeners:b}),w?x.data=w:null!==(w=jn(n))&&(x.data=w))),(w=Tn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(An=!0,In);case"textInput":return(e=t.data)===In&&An?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!En&&Pn(e,t)?(e=Gt(),Kt=Wt=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=sd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),a.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=qu((s[Be]||null).action),a=r.submitter;a&&null!==(t=(t=a[Be]||null)?qu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Wu(s,a):new FormData(s);to(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Wu(s,a):new FormData(s),to(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Xu(a,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Ut(e,n))&&r.unshift(rd(e,s,i)),null!=(s=Ut(e,t))&&r.push(rd(e,s,i))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ut(n,i))&&a.unshift(rd(n,c,l)):s||null!=(c=Ut(n,i))&&a.push(rd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||_t(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&_t(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Tt(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&dd(e,t,"name",s.name,s,null),dd(e,t,"formEncType",s.formEncType,s,null),dd(e,t,"formMethod",s.formMethod,s,null),dd(e,t,"formTarget",s.formTarget,s,null)):(dd(e,t,"encType",s.encType,s,null),dd(e,t,"method",s.method,s,null),dd(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=jt);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":$u("beforetoggle",e),$u("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hd(e,t,n,r,s,i){switch(n){case"style":Tt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?_t(e,r):("number"===typeof r||"bigint"===typeof r)&&_t(e,""+r);break;case"onScroll":null!=r&&$u("scroll",e);break;case"onScrollEnd":null!=r&&$u("scrollend",e);break;case"onClick":null!=r&&(e.onclick=jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Be]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$u("error",e),$u("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,r,o,n,null)}}return i&&dd(e,t,"srcSet",n.srcSet,n,null),void(s&&dd(e,t,"src",n.src,n,null));case"input":$u("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:dd(e,t,s,d,n,null)}}return void bt(e,r,l,c,u,o,i,!1);case"select":for(i in $u("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:dd(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?xt(e,!!s,t,!1):null!=n&&xt(e,!!s,n,!0));case"textarea":for(o in $u("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:dd(e,t,o,l,n,null)}return void St(e,s,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else dd(e,t,c,s,n,null);return;case"dialog":$u("beforetoggle",e),$u("toggle",e),$u("cancel",e),$u("close",e);break;case"iframe":case"object":$u("load",e);break;case"video":case"audio":for(s=0;s<Qu.length;s++)$u(Qu[s],e);break;case"image":$u("error",e),$u("load",e);break;case"details":$u("toggle",e);break;case"embed":case"source":case"link":$u("error",e),$u("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,u,s,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&hd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&dd(e,t,l,s,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var md=null,gd=null;function vd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var kd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,_d="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _d?function(e){return _d.resolve(null).then(e).catch(Nd)}:kd;function Nd(e){setTimeout(function(){throw e})}function Td(e){return"head"===e}function Cd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)zd(e.ownerDocument.documentElement);else if("head"===n){zd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[Qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&zd(e.ownerDocument.body);n=s}while(n);Wh(t)}function Id(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ad(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ad(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Pd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}function jd(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=vd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function zd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Ud=new Map,Vd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=O.d;O.d={f:function(){var e=Hd.f(),t=eu();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):Hd.r(e)},D:function(e){Hd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){Hd.L(e,t,n);var r=qd;if(r&&e&&t){var s='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+vt(n.imageSizes)+'"]')):s+='[href="'+vt(e)+'"]';var i=s;switch(t){case"style":i=Gd(e);break;case"script":i=Xd(e)}Ud.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ud.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Qd(i))||"script"===t&&r.querySelector($d(i))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var n=qd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+vt(r)+'"][href="'+vt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Xd(e)}if(!Ud.has(i)&&(e=f({rel:"modulepreload",href:e},t),Ud.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector($d(i)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Hd.X(e,t);var n=qd;if(n&&e){var r=Ze(n).hoistableScripts,s=Xd(e),i=r.get(s);i||((i=n.querySelector($d(s)))||(e=f({src:e,async:!0},t),(t=Ud.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Hd.S(e,t,n);var r=qd;if(r&&e){var s=Ze(r).hoistableStyles,i=Gd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Qd(i)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ud.get(i))&&eh(e,n);var l=a=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Hd.M(e,t);var n=qd;if(n&&e){var r=Ze(n).hoistableScripts,s=Xd(e),i=r.get(s);i||((i=n.querySelector($d(s)))||(e=f({src:e,async:!0,type:"module"},t),(t=Ud.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var qd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=qd;if(r&&"string"===typeof t&&t){var s=vt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Vd.has(s)||(Vd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var s,i,o,l,c=(c=K.current)?Bd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ud.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),fd(i,"link",o),et(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gd(e){return'href="'+vt(e)+'"'}function Qd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+vt(e)+'"]'}function $d(e){return"script[async]"+e}function Jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",s),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Gd(n.href);var i=e.querySelector(Qd(s));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Yd(n),(s=Ud.get(s))&&eh(r,s),et(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(i,"link",r),t.state.loading|=4,Zd(i,n.precedence,e),t.instance=i;case"script":return i=Xd(n.src),(s=e.querySelector($d(i)))?(t.instance=s,et(s),s):(r=n,(s=Ud.get(i))&&th(r=f({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),fd(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,s=nh=new Map;s.set(n,r)}else(r=(s=nh).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Qe]||i[Ve]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function sh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=oh.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var dh={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function hh(e,t,n,r,s,i,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,r,s,i,a,o,l,c,u,d){return e=new hh(e,t,n,a,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Fr(3,null,null,t),e.current=i,i.stateNode=e,(t=zs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},vi(i),e}function ph(e){return e?e=Lr:Lr}function mh(e,t,n,r,s,i){s=ph(s),null===r.context?r.context=s:r.pendingContext=s,(r=bi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=wi(e,r,t))&&(Yc(n,0,t),xi(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function vh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Yc(t,0,67108864),vh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Rr(e,t=Le(t));null!==n&&Yc(n,0,t),vh(e,t)}}var wh=!0;function xh(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=2,Sh(e,t,n,r)}finally{O.p=i,D.T=s}}function kh(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=8,Sh(e,t,n,r)}finally{O.p=i,D.T=s}}function Sh(e,t,n,r){if(wh){var s=_h(r);if(null===s)nd(e,t,r,Eh,n),Lh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ih=Mh(Ih,e,t,n,r,s),!0;case"dragenter":return Ah=Mh(Ah,e,t,n,r,s),!0;case"mouseover":return Ph=Mh(Ph,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return jh.set(i,Mh(jh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rh.set(i,Mh(Rh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==s;){var i=$e(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Ne(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-we(a);o.entanglements[1]|=l,a&=~l}Lu(i),0===(6&pc)&&(Oc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Rr(i,2))&&Yc(o,0,2),eu(),vh(i,2)}if(null===(i=_h(r))&&nd(e,t,r,Eh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else nd(e,t,r,null,n)}}function _h(e){return Nh(e=Dt(e))}var Eh=null;function Nh(e){if(Eh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Th(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Ch=!1,Ih=null,Ah=null,Ph=null,jh=new Map,Rh=new Map,Dh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":Ih=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Ph=null;break;case"pointerover":case"pointerout":jh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Mh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=$e(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Xe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void ze(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void ze(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_h(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function Uh(e,t,n){zh(e)&&n.delete(t)}function Vh(){Ch=!1,null!==Ih&&zh(Ih)&&(Ih=null),null!==Ah&&zh(Ah)&&(Ah=null),null!==Ph&&zh(Ph)&&(Ph=null),jh.forEach(Uh),Rh.forEach(Uh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ch||(Ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vh)))}var Hh=null;function qh(e){Hh!==e&&(Hh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hh===e&&(Hh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===Nh(r||n))continue;break}var i=$e(n);null!==i&&(e.splice(t,3),t-=3,to(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Wh(e){function t(t){return Bh(t,e)}null!==Ih&&Bh(Ih,e),null!==Ah&&Bh(Ah,e),null!==Ph&&Bh(Ph,e),jh.forEach(t),Rh.forEach(t);for(var n=0;n<Dh.length;n++){var r=Dh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dh.length&&null===(n=Dh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Dh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Be]||null;if("function"===typeof i)a||qh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Be]||null)o=a.formAction;else if(null!==Nh(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),qh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Gh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));mh(t.current,Gc(),e,t,null,null)},Qh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mh(e.current,2,null,e,null,null),eu(),t[He]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dh.length&&0!==t&&t<Dh[n].priority;n++);Dh.splice(n,0,e),0===n&&Fh(e)}};var Yh=s.version;if("19.2.0"!==Yh)throw Error(a(527,Yh,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return d(s),e;if(i===r)return d(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{ve=$h.inject(Xh),ye=$h}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=Eo,i=No,l=To;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,r,null,s,i,l,Kh),e[He]=t.current,ed(e),new Gh(t)}},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=w.prototype=new b;x.constructor=w,g(x,y.prototype),x.isPureReactComponent=!0;var k=Array.isArray;function S(){}var _={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function N(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return A((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+I(e,0):i,k(a)?(s="",null!=u&&(s=u.replace(C,"$&/")+"/"),A(a,t,s,"",function(e){return e})):null!=a&&(T(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+u,a=N(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===i?".":i+":";if(k(e))for(var m=0;m<e.length;m++)u+=A(i=e[m],t,s,o=f+I(i,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=A(i=i.value,t,s,o=f+I(i,m++),a);else if("object"===o){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],s=0;return A(e,r,"","",function(e){return t.call(n,e,s++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=D,t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)!E.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return N(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return N(e,i,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),s=_.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,R)}catch(i){R(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return _.H.useEffect(e,t)},t.useEffectEvent=function(e){return _.H.useEffectEvent(e)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,_||(_=!0,S());else{var t=r(u);null!==t&&j(k,t.startTime-e)}}var S,_=!1,E=-1,N=5,T=-1;function C(){return!!v||!(t.unstable_now()-T<N)}function I(){if(v=!1,_){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(E),E=-1),p=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&j(k,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?S():_=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=I,S=function(){P.postMessage(null)}}else S=function(){y(I,0)};function j(e,n){E=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,j(k,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,_||(_=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),s=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new f;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p=function(e){return function(e){const t=d(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},m=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const v=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&m(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t;return null===(t=v())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},b=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function k(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function S(e){return(await fetch(e,{credentials:"include"})).ok}const _={};let E=!1;function N(e,t){if("undefined"===typeof window||"undefined"===typeof document||!k(window.location.host)||_[e]===t||_[e]||E)return;function n(e){return"__firebase__banner__".concat(e)}_[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(_))_[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{E=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function I(){return!C()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(e){return!1}}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new P(n,i,t)}}const R=/\{\$([^}]+)}/g;function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(O(n)&&O(i)){if(!D(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function F(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U(){}function V(e){return e&&e._delegate?e._delegate:e}class B{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const H="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:H})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===H?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;return this.component?this.component.multipleInstances?e:H:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class W{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const K=[];var G;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(G||(G={}));const Q={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Y=G.INFO,X={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},$=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class J{constructor(e){this.name=e,this._logLevel=Y,this._logHandler=$,this._userLogHandler=null,K.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...t),this._logHandler(this,G.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...t),this._logHandler(this,G.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.INFO,...t),this._logHandler(this,G.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.WARN,...t),this._logHandler(this,G.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.ERROR,...t),this._logHandler(this,G.ERROR,...t)}}let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,ie=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ue(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ue(this),t,...r);return re.set(i,t.sort?t.sort():[t]),ce(i)}}function le(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});ne.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ae):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ce(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&te.set(t,e)}).catch(()=>{}),ie.set(t,e),t}(e);if(se.has(e))return se.get(e);const t=le(e);return t!==e&&(se.set(e,t),ie.set(t,e)),t}const ue=e=>ie.get(e);const de=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],fe=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fe.get(t))return fe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=he.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!de.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return fe.set(t,i),i}ae=(e=>u(u({},e),{},{get:(t,n,r)=>pe(t,n)||e.get(t,n,r),has:(t,n)=>!!pe(t,n)||e.has(t,n)}))(ae);class me{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ge="@firebase/app",ve="0.14.6",ye=new J("@firebase/app"),be="@firebase/app-compat",we="@firebase/analytics-compat",xe="@firebase/analytics",ke="@firebase/app-check-compat",Se="@firebase/app-check",_e="@firebase/auth",Ee="@firebase/auth-compat",Ne="@firebase/database",Te="@firebase/data-connect",Ce="@firebase/database-compat",Ie="@firebase/functions",Ae="@firebase/functions-compat",Pe="@firebase/installations",je="@firebase/installations-compat",Re="@firebase/messaging",De="@firebase/messaging-compat",Oe="@firebase/performance",Le="@firebase/performance-compat",Me="@firebase/remote-config",Fe="@firebase/remote-config-compat",ze="@firebase/storage",Ue="@firebase/storage-compat",Ve="@firebase/firestore",Be="@firebase/ai",He="@firebase/firestore-compat",qe="firebase",We="[DEFAULT]",Ke={[ge]:"fire-core",[be]:"fire-core-compat",[xe]:"fire-analytics",[we]:"fire-analytics-compat",[Se]:"fire-app-check",[ke]:"fire-app-check-compat",[_e]:"fire-auth",[Ee]:"fire-auth-compat",[Ne]:"fire-rtdb",[Te]:"fire-data-connect",[Ce]:"fire-rtdb-compat",[Ie]:"fire-fn",[Ae]:"fire-fn-compat",[Pe]:"fire-iid",[je]:"fire-iid-compat",[Re]:"fire-fcm",[De]:"fire-fcm-compat",[Oe]:"fire-perf",[Le]:"fire-perf-compat",[Me]:"fire-rc",[Fe]:"fire-rc-compat",[ze]:"fire-gcs",[Ue]:"fire-gcs-compat",[Ve]:"fire-fst",[He]:"fire-fst-compat",[Be]:"fire-vertex","fire-js":"fire-js",[qe]:"fire-js-all"},Ge=new Map,Qe=new Map,Ye=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){ye.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e){const t=e.name;if(Ye.has(t))return ye.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);for(const n of Ge.values())Xe(n,e);for(const n of Qe.values())Xe(n,e);return!0}function Je(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new j("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new B("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="12.6.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=u({name:We,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw et.create("bad-app-name",{appName:String(s)});if(n||(n=b()),!n)throw et.create("no-options");const i=Ge.get(s);if(i){if(D(n,i.options)&&D(r,i.config))return i;throw et.create("duplicate-app",{appName:s})}const a=new W(s);for(const l of Ye.values())a.addComponent(l);const o=new tt(n,r,a);return Ge.set(s,o),o}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;const t=Ge.get(e);if(!t&&e===We&&b())return rt();if(!t)throw et.create("no-app",{appName:e});return t}function it(e,t,n){var r;let s=null!==(r=Ke[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ye.warn(e.join(" "))}$e(new B("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const at="firebase-heartbeat-store";let ot=null;function lt(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ce(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ce(a.result),e.oldVersion,e.newVersion,ce(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(at)}catch(n){console.warn(n)}}}).catch(e=>{throw et.create("idb-open",{originalErrorMessage:e.message})})),ot}async function ct(e,t){try{const n=(await lt()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(t,ut(e)),await n.done}catch(n){if(n instanceof P)ye.warn(n.message);else{const e=et.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ye.warn(e.message)}}}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ft(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ht();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ye.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=p(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ye.warn(t),""}}}function ht(){return(new Date).toISOString().substring(0,10)}class ft{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!A()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await lt()).transaction(at),n=await t.objectStore(at).get(ut(e));return await t.done,n}catch(t){if(t instanceof P)ye.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ye.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return p(JSON.stringify({version:2,heartbeats:e})).length}var mt;mt="",$e(new B("platform-logger",e=>new me(e),"PRIVATE")),$e(new B("heartbeat",e=>new dt(e),"PRIVATE")),it(ge,ve,mt),it(ge,ve,"esm2020"),it("fire-js","");it("firebase","12.6.0","app");const gt=["providerId"],vt=["uid","auth","stsTokenManager"],yt=["providerId","signInMethod"];function bt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wt=bt,xt=new j("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kt=new J("@firebase/auth");function St(e){if(kt.logLevel<=G.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kt.error("Auth (".concat(nt,"): ").concat(e),...n)}}function _t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw It(e,...n)}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return It(e,...n)}function Nt(e,t,n){const r=u(u({},wt()),{},{[t]:n});return new j("auth","Firebase",r).create(t,{appName:e.name})}function Tt(e){return Nt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ct(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_t(e,"argument-error"),Nt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return xt.create(e,...n)}function At(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw It(t,...r)}}function Pt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw St(t),new Error(t)}function jt(e,t){e||Pt(t)}function Rt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Lt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Mt{constructor(e,t){this.shortDelay=e,this.longDelay=t,jt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Lt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ft(e,t){jt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class zt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ut={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Vt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bt=new Mt(3e4,6e4);function Ht(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function qt(e,t,n,r){return Wt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=L(u({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&k(e.emulatorConfig.host)&&(l.credentials="include"),zt.fetch()(await Gt(e,e.config.apiHost,n,a),l)})}async function Wt(e,t,n){e._canInitEmulator=!1;const r=u(u({},Ut),t);try{const t=new Yt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Xt(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Nt(e,o,a);_t(e,o)}}catch(s){if(s instanceof P)throw s;_t(e,"network-request-failed",{message:String(s)})}}async function Kt(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await qt(e,t,n,r,s);return"mfaPendingCredential"in i&&_t(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gt(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Ft(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Vt.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Qt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Et(this.auth,"network-request-failed")),Bt.get())})}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Et(e,t,r);return s.customData._tokenResponse=n,s}function $t(e){return void 0!==e&&void 0!==e.enterprise}class Jt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zt(e,t){return qt(e,"GET","/v2/recaptchaConfig",Ht(e,t))}async function en(e,t){return qt(e,"POST","/v1/accounts:lookup",t)}function tn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function nn(e){return 1e3*Number(e)}function rn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return St("JWT malformed, contained fewer than 3 sections"),null;try{const e=m(n);return e?JSON.parse(e):(St("Failed to decode base64 JWT payload"),null)}catch(s){return St("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function sn(e){const t=rn(e);return At(t,"internal-error"),At("undefined"!==typeof t.exp,"internal-error"),At("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function an(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof P&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class on{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ln{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tn(this.lastLoginAt),this.creationTime=tn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cn(e){var t;const n=e.auth,r=await e.getIdToken(),s=await an(e,en(n,{idToken:r}));At(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?un(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ln(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function un(e){return e.map(e=>{let{providerId:t}=e,n=i(e,gt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At("undefined"!==typeof e.idToken,"internal-error"),At("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):sn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){At(0!==e.length,"internal-error");const t=sn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Wt(e,{},async()=>{const n=L({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Gt(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&k(e.emulatorConfig.host)&&(o.credentials="include"),zt.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new dn;return n&&(At("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(At("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(At("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dn,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function hn(e,t){At("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class fn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,vt);this.providerId="firebase",this.proactiveRefresh=new on(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ln(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await an(this,this.stsTokenManager.getToken(this.auth,e));return At(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=V(e),r=await n.getIdToken(t),s=rn(r);At(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:tn(nn(s.auth_time)),issuedAtTime:tn(nn(s.iat)),expirationTime:tn(nn(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=V(e);await cn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fn(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await cn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await an(this,async function(e,t){return qt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:k,stsTokenManager:S}=t;At(b&&S,e,"internal-error");const _=dn.fromJSON(this.name,S);At("string"===typeof b,e,"internal-error"),hn(d,e.name),hn(h,e.name),At("boolean"===typeof w,e,"internal-error"),At("boolean"===typeof x,e,"internal-error"),hn(f,e.name),hn(p,e.name),hn(m,e.name),hn(g,e.name),hn(v,e.name),hn(y,e.name);const E=new fn({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:_,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(E.providerData=k.map(e=>u({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new dn;r.updateFromServerResponse(t);const s=new fn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await cn(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];At(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?un(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),a=new dn;a.updateFromIdToken(n);const o=new fn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ln(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const pn=new Map;function mn(e){jt(e instanceof Function,"Expected a class definition");let t=pn.get(e);return t?(jt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}class gn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gn.type="NONE";const vn=gn;function yn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class bn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=yn(this.userKey,r.apiKey,s),this.fullPersistenceKey=yn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await en(this.auth,{idToken:e}).catch(()=>{});return t?fn._fromGetAccountInfoResponse(this.auth,t,e):null}return fn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new bn(mn(vn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||mn(vn);const i=yn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await en(e,{idToken:t}).catch(()=>{});if(!r)break;n=await fn._fromGetAccountInfoResponse(e,r,t)}else n=fn._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new bn(s,e,n)):new bn(s,e,n)}}function wn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_n(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nn(t))return"Blackberry";if(Tn(t))return"Webos";if(kn(t))return"Safari";if((t.includes("chrome/")||Sn(t))&&!t.includes("edge/"))return"Chrome";if(En(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function kn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function In(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return Cn(e)||En(e)||Tn(e)||Nn(e)||/windows phone/i.test(e)||_n(e)}function Pn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=wn(T());break;case"Worker":t="".concat(wn(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class jn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Rn{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Dn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ln(this),this.idTokenSubscription=new Ln(this),this.beforeStateQueue=new jn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mn(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await bn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await en(this,{idToken:e}),n=await fn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,i;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(Tt(this));const t=e?V(e):null;return t&&At(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qt(e,"GET","/v2/passwordPolicy",Ht(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Rn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new j("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qt(e,"POST","/v2/accounts:revokeToken",Ht(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mn(e)||this._popupRedirectResolver;At(t,this,"argument-error"),this.redirectPersistenceManager=await bn.create(this,[mn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(kt.logLevel<=G.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kt.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function On(e){return V(e)}class Ln{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new z(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fn(e){return Mn.loadJS(e)}function zn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Un{constructor(){this.enterprise=new Vn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Vn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Bn="NO_RECAPTCHA";class Hn{constructor(e){this.type="recaptcha-enterprise",this.auth=On(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;$t(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Bn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Un).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Zt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Jt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&$t(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Mn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Fn(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function qn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Hn(e);let a;if(s)a=Bn;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Wn(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await qn(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await qn(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const s=await qn(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await qn(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await qn(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Kn(e){const t=On(e),n=await Zt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Hn(t).verify()}}function Gn(e,t,n){const r=On(e);At(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=Qn(t),{host:a,port:o}=function(e){const t=Qn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Yn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Yn(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return At(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void At(D(c,r.config.emulator)&&D(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,k(a)?(S("".concat(i,"//").concat(a).concat(l)),N("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Qn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Yn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Xn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pt("not implemented")}_getIdTokenResponse(e){return Pt("not implemented")}_linkToIdToken(e,t){return Pt("not implemented")}_getReauthenticationResolver(e){return Pt("not implemented")}}async function $n(e,t){return qt(e,"POST","/v1/accounts:signUp",t)}async function Jn(e,t){return Kt(e,"POST","/v1/accounts:signInWithPassword",Ht(e,t))}class Zn extends Xn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Zn(e,t,"password")}static _fromEmailAndCode(e,t){return new Zn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Wn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Jn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Wn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$n,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithEmailLink",Ht(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function er(e,t){return Kt(e,"POST","/v1/accounts:signInWithIdp",Ht(e,t))}class tr extends Xn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_t("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,yt);if(!n||!r)return null;const a=new tr(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return er(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,er(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,er(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}async function nr(e,t){return qt(e,"POST","/v1/accounts:sendVerificationCode",Ht(e,t))}const rr={USER_NOT_FOUND:"user-not-found"};class sr extends Xn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Kt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ht(e,u(u({},t),{},{operation:"REAUTH"})),rr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new sr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class ir{constructor(e){var t,n,r,s,i,a;const o=M(F(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);At(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=M(F(e)).link,n=t?M(F(t)).deep_link_id:null,r=M(F(e)).deep_link_id;return(r?M(F(r)).link:null)||r||n||t||e}(e);try{return new ir(t)}catch(n){return null}}}class ar{constructor(){this.providerId=ar.PROVIDER_ID}static credential(e,t){return Zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ir.parseLink(t);return At(n,"argument-error"),Zn._fromEmailAndCode(e,n.code,n.tenantId)}}ar.PROVIDER_ID="password",ar.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ar.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class or{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lr extends or{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cr extends lr{constructor(){super("facebook.com")}static credential(e){return tr._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return cr.credential(t.oauthAccessToken)}catch(n){return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com",cr.PROVIDER_ID="facebook.com";class ur extends lr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tr._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ur.credential(n,r)}catch(s){return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com",ur.PROVIDER_ID="google.com";class dr extends lr{constructor(){super("github.com")}static credential(e){return tr._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return dr.credential(t.oauthAccessToken)}catch(n){return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com",dr.PROVIDER_ID="github.com";class hr extends lr{constructor(){super("twitter.com")}static credential(e,t){return tr._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return hr.credential(n,r)}catch(s){return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com",hr.PROVIDER_ID="twitter.com";class fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await fn._fromIdTokenResponse(e,n,r),i=pr(n);return new fr({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=pr(n);return new fr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function pr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class mr extends P{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,mr.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new mr(e,t,n,r)}}function gr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw mr._fromErrorAndOperation(e,n,t,r);throw n})}async function vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await an(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return fr._forOperation(e,"link",r)}async function yr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(Tt(r));const s="reauthenticate";try{const i=await an(e,gr(r,s,t,e),n);At(i.idToken,r,"internal-error");const a=rn(i.idToken);At(a,r,"internal-error");const{sub:o}=a;return At(e.uid===o,r,"user-mismatch"),fr._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&_t(r,"user-mismatch"),i}}async function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Tt(e));const r="signIn",s=await gr(e,r,t),i=await fr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}function wr(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:start",Ht(e,t))}new WeakMap;const xr="__sak";class kr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xr,"1"),this.storage.removeItem(xr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Sr extends kr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=An(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);In()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sr.type="LOCAL";const _r=Sr;function Er(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Nr(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Tr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Nr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Er(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Nr(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Nr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Er(n);const s=setInterval(()=>{const e=Er(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Tr.type="COOKIE";class Cr extends kr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Cr.type="SESSION";const Ir=Cr;class Ar{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ar(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ar.receivers=[];class jr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Pr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Rr(){return window}function Dr(){return"undefined"!==typeof Rr().WorkerGlobalScope&&"function"===typeof Rr().importScripts}const Or="firebaseLocalStorageDb",Lr="firebaseLocalStorage",Mr="fbase_key";class Fr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zr(e,t){return e.transaction([Lr],t?"readwrite":"readonly").objectStore(Lr)}function Ur(){const e=indexedDB.open(Or,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Lr,{keyPath:Mr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Lr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Or);return new Fr(e).toPromise()}(),t(await Ur()))})})}async function Vr(e,t,n){const r=zr(e,!0).put({[Mr]:t,value:n});return new Fr(r).toPromise()}function Br(e,t){const n=zr(e,!0).delete(t);return new Fr(n).toPromise()}class Hr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ur()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ar._getInstance(Dr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new jr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ur();return await Vr(e,xr,"1"),await Br(e,xr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zr(e,!1).get(t),r=await new Fr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Br(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zr(e,!1).getAll();return new Fr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Hr.type="LOCAL";const qr=Hr;function Wr(e,t){return qt(e,"POST","/v2/accounts/mfaSignIn:start",Ht(e,t))}zn("rcb"),new Mt(3e4,6e4);const Kr="recaptcha";async function Gr(e,t,n){if(!e._getRecaptchaConfig())try{await Kn(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){At("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Wn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Bn){At((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return wr(e,await Qr(e,t,n))}return wr(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;At("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;At(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Wn(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Bn){At((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return Wr(e,await Qr(e,t,n))}return Wr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Wn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Bn){At((null===n||void 0===n?void 0:n.type)===Kr,e,"argument-error");return nr(e,await Qr(e,t,n))}return nr(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Qr(e,t,n){At(n.type===Kr,e,"argument-error");const r=await n.verify();At("string"===typeof r,e,"argument-error");const s=u({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Yr{constructor(e){this.providerId=Yr.PROVIDER_ID,this.auth=On(e)}verifyPhoneNumber(e,t){return Gr(this.auth,e,V(t))}static credential(e,t){return sr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yr.credentialFromTaggedObject(t)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?sr._fromTokenResponse(n,r):null}}function Xr(e,t){return t?mn(t):(At(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yr.PROVIDER_ID="phone",Yr.PHONE_SIGN_IN_METHOD="phone";class $r extends Xn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return er(e,this._buildIdpRequest())}_linkToIdToken(e,t){return er(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return er(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jr(e){return br(e.auth,new $r(e),e.bypassAuthState)}function Zr(e){const{auth:t,user:n}=e;return At(n,t,"internal-error"),yr(n,new $r(e),e.bypassAuthState)}async function es(e){const{auth:t,user:n}=e;return At(n,t,"internal-error"),vr(n,new $r(e),e.bypassAuthState)}class ts{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jr;case"linkViaPopup":case"linkViaRedirect":return es;case"reauthViaPopup":case"reauthViaRedirect":return Zr;default:_t(this.auth,"internal-error")}}resolve(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ns=new Mt(2e3,1e4);class rs extends ts{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return At(e,this.auth,"internal-error"),e}async onExecution(){jt(1===this.filter.length,"Popup operations only handle one event");const e=Pr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Et(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Et(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ns.get())};e()}}rs.currentPopupAction=null;const ss=new Map;class is extends ts{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ss.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cs(t),r=ls(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ss.set(this.auth._key(),e)}return this.bypassAuthState||ss.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function as(e,t){return ls(e)._set(cs(t),"true")}function os(e,t){ss.set(e._key(),t)}function ls(e){return mn(e._redirectPersistence)}function cs(e){return yn("pendingRedirect",e.config.apiKey,e.name)}function us(e,t,n){return async function(e,t,n){if(Ze(e.app))return Promise.reject(Tt(e));const r=On(e);Ct(e,t,or),await r._initializationPromise;const s=Xr(r,n);return await as(s,r),s._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}async function ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Tt(e));const r=On(e),s=Xr(r,t),i=new is(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class hs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ps(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ps(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Et(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fs(e))}saveEventToCache(e){this.cachedEventUids.add(fs(e)),this.lastProcessedEventTime=Date.now()}}function fs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ps(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gs=/^https?/;async function vs(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return qt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ys(r))return}catch(n){}_t(e,"unauthorized-domain")}function ys(e){const t=Rt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!gs.test(n))return!1;if(ms.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const bs=new Mt(3e4,6e4);function ws(){const e=Rr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function xs(e){return new Promise((t,n)=>{var r,s;function i(){ws(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ws(),n(Et(e,"network-request-failed"))},timeout:bs.get()})}if(null!==(r=Rr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=Rr().gapi)||void 0===s||!s.load){const t=zn("iframefcb");return Rr()[t]=()=>{gapi.load?i():n(Et(e,"network-request-failed"))},Fn("".concat(Mn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw ks=null,e})}let ks=null;const Ss=new Mt(5e3,15e3),_s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Es=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ns(e){const t=e.config;At(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ft(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},s=Es.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(L(r).slice(1))}async function Ts(e){const t=await function(e){return ks=ks||xs(e),ks}(e),n=Rr().gapi;return At(n,e,"internal-error"),t.open({where:document.body,url:Ns(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_s,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Et(e,"network-request-failed"),i=Rr().setTimeout(()=>{r(s)},Ss.get());function a(){Rr().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Cs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Is{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function As(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=u(u({},Cs),{},{width:r.toString(),height:s.toString(),top:i,left:a}),c=T().toLowerCase();n&&(o=Sn(c)?"_blank":n),xn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Cn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Is(null);const h=window.open(t||"",o,d);At(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Is(h)}const Ps="__/auth/handler",js="emulator/auth/handler",Rs=encodeURIComponent("fac");async function Ds(e,t,n,r,s,i){At(e.config.authDomain,e,"auth-domain-config-required"),At(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:s};if(t instanceof or){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof lr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Rs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ps);return Ft(t,js)}(e),"?").concat(L(o).slice(1)).concat(c)}const Os="webStorageSupport";const Ls=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ir,this._completeRedirectFn=ds,this._overrideRedirectResult=os}async _openPopup(e,t,n,r){var s;jt(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return As(e,await Ds(e,t,n,Rt(),r),Pr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Rr().location.href=e}(await Ds(e,t,n,Rt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(jt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ts(e),n=new hs(e);return t.register("authEvent",t=>{At(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Os,{type:Os},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Os];void 0!==s&&t(!!s),_t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return An()||kn()||Cn()}};var Ms="@firebase/auth",Fs="1.11.1";class zs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Us=w("authIdTokenMaxAge")||300;let Vs=null;var Bs;Mn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Et("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Bs="Browser",$e(new B("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;At(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Bs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(Bs)},c=new Dn(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$e(new B("auth-internal",e=>(e=>new zs(e))(On(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Ms,Fs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Bs)),it(Ms,Fs,"esm2020");var Hs,qs,Ws="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ks={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let i,a=e.g[3];i=t+(a^n&(s^a))+r[0]+3614090360&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[1]+3905402710&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[2]+606105819&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[3]+3250441966&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[4]+4118548399&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[5]+1200080426&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[7]+4249261313&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[8]+1770035416&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[9]+2336552879&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[11]+2304563134&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[12]+1804603682&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[13]+4254626195&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[15]+1236535329&4294967295,i=t+(s^a&((n=s+(i<<22&4294967295|i>>>10))^s))+r[1]+4129170786&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[11]+643717713&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[0]+3921069994&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[5]+3593408605&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[15]+3634488961&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[4]+3889429448&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[9]+568446438&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[3]+4107603335&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[8]+1163531501&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[13]+2850285829&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[7]+1735328473&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[12]+2368359562&4294967295,i=t+((n=s+(i<<20&4294967295|i>>>12))^s^a)+r[5]+4294588738&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[8]+2272392833&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[11]+1839030562&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[14]+4259657740&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[1]+2763975236&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[4]+1272893353&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[7]+4139469664&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[10]+3200236656&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[13]+681279174&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[0]+3936430074&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[3]+3572445317&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[6]+76029189&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[9]+3654602809&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[12]+3873151461&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[15]+530742520&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[2]+3299628645&4294967295,i=t+(s^((n=s+(i<<23&4294967295|i>>>9))|~a))+r[0]+4096336452&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[7]+1126891415&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[14]+2878612391&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[12]+1700485571&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[3]+2399980690&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[10]+4293915773&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[8]+1873313359&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[15]+4264355552&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[6]+2734768916&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[4]+4149444226&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[11]+3174756917&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[2]+718787259&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,s=this.C;let i=this.h,a=0;for(;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function i(e){return-128<=e&&e<128?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);c.l(e)<=0&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||c.l(e)>0;)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const s=e.g.length-n,i=[];for(let r=0;r<s;r++)i[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const s=g(n,t).g;let i=(((n=f(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let s=0;for(let r=0;r<=t;r++){let t=s+(65535&this.i(r))+(65535&e.i(r)),i=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);s=i>>>16,t&=65535,i&=65535,n[r]=i<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(let t=0;t<e.g.length;t++){const r=this.i(s)>>>16,i=65535&this.i(s),a=e.i(t)>>>16,o=65535&e.i(t);n[2*s+2*t]+=i*o,p(n,2*s+2*t),n[2*s+2*t+1]+=r*o,p(n,2*s+2*t+1),n[2*s+2*t+1]+=i*a,p(n,2*s+2*t+1),n[2*s+2*t+2]+=r*a,p(n,2*s+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,qs=Ks.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let s=o;for(let o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+i),n);i<8?(i=a(Math.pow(n,i)),s=s.j(i).add(a(e))):(s=s.j(r),s=s.add(a(e)))}return s},Hs=Ks.Integer=r}).apply("undefined"!==typeof Ws?Ws:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Gs,Qs,Ys,Xs,$s,Js,Zs,ei,ti="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ni={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ti&&ti];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var s=s||{},i=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){i.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function _(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},_.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,_),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var C="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++I,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=i>=0)&&Array.prototype.splice.call(s,i,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let s=0;s<e.length;++s){const i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}L.prototype.add=function(e,t,n,r,s){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const a=F(e,t,r,s);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new A(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,s){if(r&&r.once)return H(e,t,n,r,s);if(Array.isArray(t)){for(let i=0;i<t.length;i++)V(e,t[i],n,r,s);return null}return n=X(n),e&&e[C]?e.J(t,n,a(r)?!!r.capture:!!r,s):B(e,t,n,!1,r,s)}function B(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");const o=a(s)?!!s.capture:!!s;let l=Q(e);if(l||(e[z]=l=new L(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)H(e,t[i],n,r,s);return null}return n=X(n),e&&e[C]?e.K(t,n,a(r)?!!r.capture:!!r,s):B(e,t,n,!0,r,s)}function q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[C]?(e=e.i,(i=String(t).toString())in e.g&&((n=F(t=e.g[i],n,r,s))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,s)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[C])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[z]=null)):P(e)}}}function K(e){return e in U?U[e]:U[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[z])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function $(){S.call(this),this.i=new L(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new _(t,e);else if(t instanceof _)t.target=t.target||e;else{var s=t;O(t=new _(r,e),s)}let i,a;if(s=!0,n)for(a=n.length-1;a>=0;a--)i=t.g=n[a],s=Z(i,r,!0,t)&&s;if(i=t.g=e,s=Z(i,r,!0,t)&&s,s=Z(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)i=t.g=n[a],s=Z(i,r,!1,t)&&s}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let i=0;i<t.length;++i){const a=t[i];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u($,S),$.prototype[C]=!0,$.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function se(e){j(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),se(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,ae=i.JSON.parse,oe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){_.call(this,"d")}function he(){_.call(this,"c")}u(de,_),u(he,_);var fe={},pe=null;function me(){return pe=pe||new $}function ge(e){_.call(this,fe.Ia,e)}function ve(e){const t=me();J(t,new ge(t))}function ye(e,t){_.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();J(t,new ye(t,e))}function we(e,t){_.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ie(i)}catch(i){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,_),fe.STAT_EVENT="statevent",u(ye,_),fe.Ja="timingevent",u(we,_),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var _e,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ce(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(Te,le),Te.prototype.g=function(){return new XMLHttpRequest},_e=new Te;var je={},Re={};function De(e,t,n){e.M=1,e.A=it(et(t)),e.u=n,e.R=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(re[0]=s.toString()),s=re);for(let i=0;i<s.length;i++){const e=V(n,s[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i){var a="",o=i.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,ze(e,e.H)}function ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ue(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,se(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Ht(n)}Xt(n),be(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!N(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let l=s[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=l[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,st(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ue(o),Fe(o)),r.g=a}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||4!=l||7==c||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=zt(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),Ve(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(s&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Be(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Re){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==je){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),He(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$t(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),Ve(this)}else Se(this.i,this.l,n,null),He(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=Ie(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),Ve(this)}}}catch(Li){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),be(17)),Be(this),this.m=2,Ve(this)):ze(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function st(e,t,n){e.i.set(t,n)}function it(e){return st(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ce(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,i=null;r>=0?(s=e[n].substring(0,r),i=e[n].substring(r+1)):s=e[n],t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function yt(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function St(){this.g=new oe}function _t(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Nt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ct(e)}function Ct(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return j(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ce(n):st(e,t,n))}function Pt(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=Ce(n);n=yt(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+Ce(n[t])),e.push(r)}}return this.i=e.join("&")},u(_t,le),_t.prototype.g=function(){return new Et(this.i,this.h)},u(Et,$),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ct(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ct(this)),this.g&&(this.readyState=3,Ct(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):Ct(this),3==this.readyState&&Nt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Pt,$);var jt=/^https?$/i,Rt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ot(e),Mt(e)}function Ot(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof s)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match(Je)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!jt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Ot(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(st(n,"SID",e.M),st(n,"RID",t),st(n,"TYPE","terminate"),Gt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=it(et(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Ht(e){e.g&&($t(e),e.g.cancel(),e.g=null)}function qt(e){Ht(e),e.v&&(i.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||x(),b||(y(),b=!0),w.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);st(r,"SID",e.M),st(r,"RID",n),st(r,"AID",e.K),Gt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),De(n,r,t)}function Gt(e,t){e.H&&j(e.H,function(e,n){st(t,n,e)}),e.l&&j({},function(e,n){st(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var i=s[c].g;const n=s[c].map;if((i-=t)<0)t=Math.max(0,s[c].g-100),l=!1;else try{i="req"+i+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ie(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(si){throw e.push(i+"type="+encodeURIComponent("_badmap")),si}}catch(si){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||x(),b||(y(),b=!0),w.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function $t(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);st(t,"RID","rpc"),st(t,"SID",e.M),st(t,"AID",e.K),st(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&st(t,"TO",e.ia),st(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=it(et(t)),n.u=null,n.R=!0,Oe(n,e)}function Zt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),$t(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;J(r=me(),new we(r,n)),Wt(e)}else Yt(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(r,"https"),it(r),t?function(e,t){const n=new ke;if(i.Image){const r=new Image;r.onload=c(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new ke;const n=new AbortController,r=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(r),kt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),s&&nt(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&st(r,n,t),st(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new _t({ab:n})):new Pt(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){$.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_e.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Dt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Dt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Ae(this,this.j,e);let i=this.o;if(this.U&&(i?(i=R(i),O(i,this.U)):i=this.U),null!==this.u||this.R||(s.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,s,t),st(n=et(this.J),"RID",e),st(n,"CVER",22),this.G&&st(n,"X-HTTP-Session-Id",this.G),Gt(this,n),i&&(this.R?t="headers="+Ce(It(i))+"&"+t:this.u&&At(n,this.u,i)),Ye(this.h,s),this.Ra&&st(n,"TYPE","init"),this.S?(st(n,"$req",t),st(n,"SID","null"),s.U=!0,De(s,n,null)):De(s,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Ht(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,$),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ie(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){J(this.g,"a")},hn.prototype.qa=function(e){J(this.g,new un(e))},hn.prototype.pa=function(e){J(this.g,new dn)},hn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,ei=ni.createWebChannelTransport=function(){return new ln},Zs=ni.getStatEventTarget=function(){return me()},Js=ni.Event=fe,$s=ni.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,Xs=ni.ErrorCode=Ee,Ne.COMPLETE="complete",Ys=ni.EventType=Ne,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",$.prototype.listen=$.prototype.J,Qs=ni.WebChannel=ce,ni.FetchXmlHttpFactory=_t,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,Gs=ni.XhrIo=Pt}).apply("undefined"!==typeof ti?ti:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ri="@firebase/firestore",si="4.9.2";class ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");let ai="12.3.0";const oi=new J("@firebase/firestore");function li(){return oi.logLevel}function ci(e){if(oi.logLevel<=G.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(hi);oi.debug("Firestore (".concat(ai,"): ").concat(e),...s)}}function ui(e){if(oi.logLevel<=G.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(hi);oi.error("Firestore (".concat(ai,"): ").concat(e),...s)}}function di(e){if(oi.logLevel<=G.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(hi);oi.warn("Firestore (".concat(ai,"): ").concat(e),...s)}}function hi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function fi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,pi(e,r,n)}function pi(e,t,n){let r="FIRESTORE (".concat(ai,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ui(r),new Error(r)}function mi(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||pi(t,s,r)}function gi(e,t){return e}const vi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yi extends P{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class xi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ii.UNAUTHENTICATED))}shutdown(){}}class ki{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Si{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bi,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ci("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ci("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ci("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mi("string"==typeof t.accessToken,31837,{l:t}),new wi(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mi(null===e||"string"==typeof e,2055,{h:e}),new ii(e)}}class _i{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ei{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _i(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ni{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ti{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mi(void 0===this.o,3512);const n=e=>{null!=e.error&&ci("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ci("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ci("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ci("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ni(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(mi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Ni(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ci(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ii{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ci(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Ai(e,t){return e<t?-1:e>t?1:0}function Pi(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return Di(n)===Di(s)?Ai(n,s):Di(n)?1:-1}return Ai(e.length,t.length)}const ji=55296,Ri=57343;function Di(e){const t=e.charCodeAt(0);return t>=ji&&t<=Ri}function Oi(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Li="__name__";class Mi{constructor(e,t,n){void 0===t?t=0:t>e.length&&fi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&fi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Mi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Mi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Ai(e.length,t.length)}static compareSegments(e,t){const n=Mi.isNumericId(e),r=Mi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Mi.extractNumericId(e).compare(Mi.extractNumericId(t)):Pi(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class Fi extends Mi{construct(e,t,n){return new Fi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new yi(vi.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Fi(e)}static emptyPath(){return new Fi([])}}const zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends Mi{construct(e,t,n){return new Ui(e,t,n)}static isValidIdentifier(e){return zi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Li}static keyField(){return new Ui([Li])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new yi(vi.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yi(vi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yi(vi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new yi(vi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ui(t)}static emptyPath(){return new Ui([])}}class Vi{constructor(e){this.path=e}static fromPath(e){return new Vi(Fi.fromString(e))}static fromName(e){return new Vi(Fi.fromString(e).popFirst(5))}static empty(){return new Vi(Fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vi(new Fi(e.slice()))}}function Bi(e,t,n){if(!n)throw new yi(vi.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hi(e){if(!Vi.isDocumentKey(e))throw new yi(vi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function qi(e){if(Vi.isDocumentKey(e))throw new yi(vi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wi(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ki(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":fi(12329,{type:typeof e})}function Gi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yi(vi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ki(e);throw new yi(vi.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Qi(e,t){const n={typeString:e};return t&&(n.value=t),n}function Yi(e,t){if(!Wi(e))throw new yi(vi.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new yi(vi.INVALID_ARGUMENT,n);return!0}const Xi=-62135596800,$i=1e6;class Ji{static now(){return Ji.fromMillis(Date.now())}static fromDate(e){return Ji.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*$i);return new Ji(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yi(vi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yi(vi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xi)throw new yi(vi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yi(vi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$i}_compareTo(e){return this.seconds===e.seconds?Ai(this.nanoseconds,e.nanoseconds):Ai(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ji._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yi(e,Ji._jsonSchema))return new Ji(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xi;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ji._jsonSchemaVersion="firestore/timestamp/1.0",Ji._jsonSchema={type:Qi("string",Ji._jsonSchemaVersion),seconds:Qi("number"),nanoseconds:Qi("number")};class Zi{static fromTimestamp(e){return new Zi(e)}static min(){return new Zi(new Ji(0,0))}static max(){return new Zi(new Ji(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ea=-1;class ta{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ta.UNKNOWN_ID=-1;function na(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Zi.fromTimestamp(1e9===r?new Ji(n+1,0):new Ji(n,r));return new sa(s,Vi.empty(),t)}function ra(e){return new sa(e.readTime,e.key,ea)}class sa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new sa(Zi.min(),Vi.empty(),ea)}static max(){return new sa(Zi.max(),Vi.empty(),ea)}}function ia(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Vi.comparator(e.documentKey,t.documentKey),0!==n?n:Ai(e.largestBatchId,t.largestBatchId))}const aa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function la(e){if(e.code!==vi.FAILED_PRECONDITION||e.message!==aa)throw e;ci("LocalStore","Unexpectedly lost primary lease")}class ca{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ca((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ca?t:ca.resolve(t)}catch(e){return ca.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ca.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ca.reject(t)}static resolve(e){return new ca((t,n)=>{t(e)})}static reject(e){return new ca((t,n)=>{n(e)})}static waitFor(e){return new ca((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=ca.resolve(!1);for(const n of e)t=t.next(e=>e?ca.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ca((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new ca((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function ua(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function da(e){return"IndexedDbTransactionError"===e.name}class ha{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ha.ce=-1;const fa=-1;function pa(e){return null==e}function ma(e){return 0===e&&1/e==-1/0}function ga(e){return"number"==typeof e&&Number.isInteger(e)&&!ma(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const va="\x01";function ya(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wa(t)),t=ba(e.get(n),t);return wa(t)}function ba(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case va:n+="\x01\x11";break;default:n+=t}}return n}function wa(e){return e+va+"\x01"}const xa="remoteDocuments",ka="owner",Sa="mutationQueues",_a="mutations";const Ea="documentMutations",Na="remoteDocumentsV14",Ta="remoteDocumentGlobal",Ca="targets",Ia="targetDocuments",Aa="targetGlobal",Pa="collectionParents",ja="clientMetadata",Ra="bundles",Da="namedQueries",Oa="indexConfiguration",La="indexState",Ma="indexEntries",Fa="documentOverlays",za="globals",Ua=[Sa,_a,Ea,xa,Ca,ka,Aa,Ia,ja,Ta,Pa,Ra,Da],Va=[Sa,_a,Ea,Na,Ca,ka,Aa,Ia,ja,Ta,Pa,Ra,Da,Fa],Ba=Va,Ha=[...Ba,Oa,La,Ma];function qa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ka(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ga{constructor(e,t){this.comparator=e,this.root=t||Ya.EMPTY}insert(e,t){return new Ga(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ya.BLACK,null,null))}remove(e){return new Ga(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ya.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}}class Qa{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ya{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ya.RED,this.left=null!=r?r:Ya.EMPTY,this.right=null!=s?s:Ya.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ya(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ya.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ya.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ya.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ya.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fi(27949);return e+(this.isRed()?0:1)}}Ya.EMPTY=null,Ya.RED=!0,Ya.BLACK=!1,Ya.EMPTY=new class{constructor(){this.size=0}get key(){throw fi(57766)}get value(){throw fi(16141)}get color(){throw fi(16727)}get left(){throw fi(29726)}get right(){throw fi(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ya(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xa{constructor(e){this.comparator=e,this.data=new Ga(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $a(this.data.getIterator())}getIteratorFrom(e){return new $a(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Xa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xa(this.comparator);return t.data=e,t}}class $a{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ja{constructor(e){this.fields=e,e.sort(Ui.comparator)}static empty(){return new Ja([])}unionWith(e){let t=new Xa(Ui.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ja(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Za extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class eo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Za("Invalid base64 string: "+e):e}}(e);return new eo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new eo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ai(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}eo.EMPTY_BYTE_STRING=new eo("");const to=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(e){if(mi(!!e,39018),"string"==typeof e){let t=0;const n=to.exec(e);if(mi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ro(e.seconds),nanos:ro(e.nanos)}}function ro(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function so(e){return"string"==typeof e?eo.fromBase64String(e):eo.fromUint8Array(e)}const io="server_timestamp",ao="__type__",oo="__previous_value__",lo="__local_write_time__";function co(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ao])||void 0===t?void 0:t.stringValue)===io}function uo(e){const t=e.mapValue.fields[oo];return co(t)?uo(t):t}function ho(e){const t=no(e.mapValue.fields[lo].timestampValue);return new Ji(t.seconds,t.nanos)}class fo{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const po="(default)";class mo{constructor(e,t){this.projectId=e,this.database=t||po}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===po}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}const go="__type__",vo="__max__",yo={mapValue:{fields:{__type__:{stringValue:vo}}}},bo="__vector__",wo="value";function xo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?co(e)?4:Fo(e)?9007199254740991:Lo(e)?10:11:fi(28295,{value:e})}function ko(e,t){if(e===t)return!0;const n=xo(e);if(n!==xo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ho(e).isEqual(ho(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=no(e.timestampValue),r=no(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return so(e.bytesValue).isEqual(so(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ro(e.geoPointValue.latitude)===ro(t.geoPointValue.latitude)&&ro(e.geoPointValue.longitude)===ro(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ro(e.integerValue)===ro(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ro(e.doubleValue),r=ro(t.doubleValue);return n===r?ma(n)===ma(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Oi(e.arrayValue.values||[],t.arrayValue.values||[],ko);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(qa(n)!==qa(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!ko(n[s],r[s])))return!1;return!0}(e,t);default:return fi(52216,{left:e})}}function So(e,t){return void 0!==(e.values||[]).find(e=>ko(e,t))}function _o(e,t){if(e===t)return 0;const n=xo(e),r=xo(t);if(n!==r)return Ai(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ai(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ro(e.integerValue||e.doubleValue),r=ro(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Eo(e.timestampValue,t.timestampValue);case 4:return Eo(ho(e),ho(t));case 5:return Pi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=so(e),r=so(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Ai(n[s],r[s]);if(0!==e)return e}return Ai(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ai(ro(e.latitude),ro(t.latitude));return 0!==n?n:Ai(ro(e.longitude),ro(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return No(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[wo])||void 0===n?void 0:n.arrayValue,c=null===(r=o[wo])||void 0===r?void 0:r.arrayValue,u=Ai((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:No(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===yo.mapValue&&t===yo.mapValue)return 0;if(e===yo.mapValue)return 1;if(t===yo.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Pi(r[a],i[a]);if(0!==e)return e;const t=_o(n[r[a]],s[i[a]]);if(0!==t)return t}return Ai(r.length,i.length)}(e.mapValue,t.mapValue);default:throw fi(23264,{he:n})}}function Eo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ai(e,t);const n=no(e),r=no(t),s=Ai(n.seconds,r.seconds);return 0!==s?s:Ai(n.nanos,r.nanos)}function No(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=_o(n[s],r[s]);if(e)return e}return Ai(n.length,r.length)}function To(e){return Co(e)}function Co(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=no(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return so(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Vi.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Co(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Co(e.fields[s]));return n+"}"}(e.mapValue):fi(61005,{value:e})}function Io(e){switch(xo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=uo(e);return t?16+Io(t):16;case 5:return 2*e.stringValue.length;case 6:return so(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Io(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Wa(e.fields,(e,n)=>{t+=e.length+Io(n)}),t}(e.mapValue);default:throw fi(13486,{value:e})}}function Ao(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Po(e){return!!e&&"integerValue"in e}function jo(e){return!!e&&"arrayValue"in e}function Ro(e){return!!e&&"nullValue"in e}function Do(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Oo(e){return!!e&&"mapValue"in e}function Lo(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[go])||void 0===t?void 0:t.stringValue)===bo}function Mo(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Wa(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Mo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Mo(e.arrayValue.values[n]);return t}return u({},e)}function Fo(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===vo}class zo{constructor(e){this.value=e}static empty(){return new zo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Oo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mo(t)}setAll(e){let t=Ui.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Mo(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Oo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ko(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Oo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Wa(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new zo(Mo(this.value))}}function Uo(e){const t=[];return Wa(e.fields,(e,n)=>{const r=new Ui([e]);if(Oo(n)){const e=Uo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ja(t)}class Vo{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Vo(e,0,Zi.min(),Zi.min(),Zi.min(),zo.empty(),0)}static newFoundDocument(e,t,n,r){return new Vo(e,1,t,Zi.min(),n,r,0)}static newNoDocument(e,t){return new Vo(e,2,t,Zi.min(),Zi.min(),zo.empty(),0)}static newUnknownDocument(e,t){return new Vo(e,3,t,Zi.min(),Zi.min(),zo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zi.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zi.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Bo{constructor(e,t){this.position=e,this.inclusive=t}}function Ho(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?Vi.comparator(Vi.fromName(a.referenceValue),n.key):_o(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function qo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ko(e.position[n],t.position[n]))return!1;return!0}class Wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ko(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Go{}class Qo extends Go{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nl(e,t,n):"array-contains"===t?new al(e,n):"in"===t?new ol(e,n):"not-in"===t?new ll(e,n):"array-contains-any"===t?new cl(e,n):new Qo(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new rl(e,n):new sl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(_o(t,this.value)):null!==t&&xo(this.value)===xo(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yo extends Go{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Yo(e,t)}matches(e){return Xo(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xo(e){return"and"===e.op}function $o(e){return Jo(e)&&Xo(e)}function Jo(e){for(const t of e.filters)if(t instanceof Yo)return!1;return!0}function Zo(e){if(e instanceof Qo)return e.field.canonicalString()+e.op.toString()+To(e.value);if($o(e))return e.filters.map(e=>Zo(e)).join(",");{const t=e.filters.map(e=>Zo(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function el(e,t){return e instanceof Qo?function(e,t){return t instanceof Qo&&e.op===t.op&&e.field.isEqual(t.field)&&ko(e.value,t.value)}(e,t):e instanceof Yo?function(e,t){return t instanceof Yo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&el(n,t.filters[r]),!0)}(e,t):void fi(19439)}function tl(e){return e instanceof Qo?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(To(e.value))}(e):e instanceof Yo?function(e){return e.op.toString()+" {"+e.getFilters().map(tl).join(" ,")+"}"}(e):"Filter"}class nl extends Qo{constructor(e,t,n){super(e,t,n),this.key=Vi.fromName(n.referenceValue)}matches(e){const t=Vi.comparator(e.key,this.key);return this.matchesComparison(t)}}class rl extends Qo{constructor(e,t){super(e,"in",t),this.keys=il("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sl extends Qo{constructor(e,t){super(e,"not-in",t),this.keys=il("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function il(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Vi.fromName(e.referenceValue))}class al extends Qo{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jo(t)&&So(t.arrayValue,this.value)}}class ol extends Qo{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&So(this.value.arrayValue,t)}}class ll extends Qo{constructor(e,t){super(e,"not-in",t)}matches(e){if(So(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!So(this.value.arrayValue,t)}}class cl extends Qo{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>So(this.value.arrayValue,e))}}class ul{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function dl(e){return new ul(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hl(e){const t=gi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Zo(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),pa(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>To(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>To(e)).join(",")),t.Te=e}return t.Te}function fl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ko(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!el(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qo(e.startAt,t.startAt)&&qo(e.endAt,t.endAt)}function pl(e){return Vi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ml{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gl(e,t,n,r,s,i,a,o){return new ml(e,t,n,r,s,i,a,o)}function vl(e){return new ml(e)}function yl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bl(e){return null!==e.collectionGroup}function wl(e){const t=gi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Xa(Ui.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Wo(r,n))}),e.has(Ui.keyField().canonicalString())||t.Ie.push(new Wo(Ui.keyField(),n))}return t.Ie}function xl(e){const t=gi(e);return t.Ee||(t.Ee=kl(t,wl(e))),t.Ee}function kl(e,t){if("F"===e.limitType)return dl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Wo(e.field,t)});const n=e.endAt?new Bo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Bo(e.startAt.position,e.startAt.inclusive):null;return dl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sl(e,t){const n=e.filters.concat([t]);return new ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function _l(e,t,n){return new ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function El(e,t){return fl(xl(e),xl(t))&&e.limitType===t.limitType}function Nl(e){return"".concat(hl(xl(e)),"|lt:").concat(e.limitType)}function Tl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>tl(e)).join(", "),"]")),pa(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>To(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>To(e)).join(",")),"Target(".concat(t,")")}(xl(e)),"; limitType=").concat(e.limitType,")")}function Cl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of wl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ho(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wl(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ho(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wl(e),t))}(e,t)}function Il(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Al(e){return(t,n)=>{let r=!1;for(const s of wl(e)){const e=Pl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Pl(e,t,n){const r=e.field.isKeyField()?Vi.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?_o(r,s):fi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fi(19790,{direction:e.dir})}}class jl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ka(this.inner)}size(){return this.innerSize}}const Rl=new Ga(Vi.comparator);function Dl(){return Rl}const Ol=new Ga(Vi.comparator);function Ll(){let e=Ol;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Ml(e){let t=Ol;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Fl(){return Ul()}function zl(){return Ul()}function Ul(){return new jl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Vl=new Ga(Vi.comparator),Bl=new Xa(Vi.comparator);function Hl(){let e=Bl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ql=new Xa(Ai);function Wl(){return ql}function Kl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ma(t)?"-0":t}}function Gl(e){return{integerValue:""+e}}function Ql(e,t){return ga(t)?Gl(t):Kl(e,t)}class Yl{constructor(){this._=void 0}}function Xl(e,t,n){return e instanceof Zl?function(e,t){const n={fields:{[ao]:{stringValue:io},[lo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&co(t)&&(t=uo(t)),t&&(n.fields[oo]=t),{mapValue:n}}(n,t):e instanceof ec?tc(e,t):e instanceof nc?rc(e,t):function(e,t){const n=Jl(e,t),r=ic(n)+ic(e.Ae);return Po(n)&&Po(e.Ae)?Gl(r):Kl(e.serializer,r)}(e,t)}function $l(e,t,n){return e instanceof ec?tc(e,t):e instanceof nc?rc(e,t):n}function Jl(e,t){return e instanceof sc?function(e){return Po(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Zl extends Yl{}class ec extends Yl{constructor(e){super(),this.elements=e}}function tc(e,t){const n=ac(t);for(const r of e.elements)n.some(e=>ko(e,r))||n.push(r);return{arrayValue:{values:n}}}class nc extends Yl{constructor(e){super(),this.elements=e}}function rc(e,t){let n=ac(t);for(const r of e.elements)n=n.filter(e=>!ko(e,r));return{arrayValue:{values:n}}}class sc extends Yl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ic(e){return ro(e.integerValue||e.doubleValue)}function ac(e){return jo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class oc{constructor(e,t){this.field=e,this.transform=t}}class lc{constructor(e,t){this.version=e,this.transformResults=t}}class cc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cc}static exists(e){return new cc(void 0,e)}static updateTime(e){return new cc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class dc{}function hc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kc(e.key,cc.none()):new vc(e.key,e.data,cc.none());{const n=e.data,r=zo.empty();let s=new Xa(Ui.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new yc(e.key,r,new Ja(s.toArray()),cc.none())}}function fc(e,t,n){e instanceof vc?function(e,t,n){const r=e.value.clone(),s=wc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yc?function(e,t,n){if(!uc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=wc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(bc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pc(e,t,n,r){return e instanceof vc?function(e,t,n,r){if(!uc(e.precondition,t))return n;const s=e.value.clone(),i=xc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof yc?function(e,t,n,r){if(!uc(e.precondition,t))return n;const s=xc(e.fieldTransforms,r,t),i=t.data;return i.setAll(bc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return uc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Jl(r.transform,e||null);null!=s&&(null===n&&(n=zo.empty()),n.set(r.field,s))}return n||null}function gc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Oi(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ec&&t instanceof ec||e instanceof nc&&t instanceof nc?Oi(e.elements,t.elements,ko):e instanceof sc&&t instanceof sc?ko(e.Ae,t.Ae):e instanceof Zl&&t instanceof Zl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vc extends dc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yc extends dc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function wc(e,t,n){const r=new Map;mi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,$l(a,o,n[s]))}return r}function xc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Xl(e,i,t))}return r}class kc extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sc extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _c{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&fc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=pc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=pc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zl();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=hc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Zi.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Hl())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(e,t)=>gc(e,t))&&Oi(this.baseMutations,e.baseMutations,(e,t)=>gc(e,t))}}class Ec{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Vl;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ec(e,t,n,r)}}class Nc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Tc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cc,Ic;function Ac(e){switch(e){case vi.OK:return fi(64938);case vi.CANCELLED:case vi.UNKNOWN:case vi.DEADLINE_EXCEEDED:case vi.RESOURCE_EXHAUSTED:case vi.INTERNAL:case vi.UNAVAILABLE:case vi.UNAUTHENTICATED:return!1;case vi.INVALID_ARGUMENT:case vi.NOT_FOUND:case vi.ALREADY_EXISTS:case vi.PERMISSION_DENIED:case vi.FAILED_PRECONDITION:case vi.ABORTED:case vi.OUT_OF_RANGE:case vi.UNIMPLEMENTED:case vi.DATA_LOSS:return!0;default:return fi(15467,{code:e})}}function Pc(e){if(void 0===e)return ui("GRPC error has no .code"),vi.UNKNOWN;switch(e){case Cc.OK:return vi.OK;case Cc.CANCELLED:return vi.CANCELLED;case Cc.UNKNOWN:return vi.UNKNOWN;case Cc.DEADLINE_EXCEEDED:return vi.DEADLINE_EXCEEDED;case Cc.RESOURCE_EXHAUSTED:return vi.RESOURCE_EXHAUSTED;case Cc.INTERNAL:return vi.INTERNAL;case Cc.UNAVAILABLE:return vi.UNAVAILABLE;case Cc.UNAUTHENTICATED:return vi.UNAUTHENTICATED;case Cc.INVALID_ARGUMENT:return vi.INVALID_ARGUMENT;case Cc.NOT_FOUND:return vi.NOT_FOUND;case Cc.ALREADY_EXISTS:return vi.ALREADY_EXISTS;case Cc.PERMISSION_DENIED:return vi.PERMISSION_DENIED;case Cc.FAILED_PRECONDITION:return vi.FAILED_PRECONDITION;case Cc.ABORTED:return vi.ABORTED;case Cc.OUT_OF_RANGE:return vi.OUT_OF_RANGE;case Cc.UNIMPLEMENTED:return vi.UNIMPLEMENTED;case Cc.DATA_LOSS:return vi.DATA_LOSS;default:return fi(39323,{code:e})}}(Ic=Cc||(Cc={}))[Ic.OK=0]="OK",Ic[Ic.CANCELLED=1]="CANCELLED",Ic[Ic.UNKNOWN=2]="UNKNOWN",Ic[Ic.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ic[Ic.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ic[Ic.NOT_FOUND=5]="NOT_FOUND",Ic[Ic.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ic[Ic.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ic[Ic.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ic[Ic.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ic[Ic.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ic[Ic.ABORTED=10]="ABORTED",Ic[Ic.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ic[Ic.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ic[Ic.INTERNAL=13]="INTERNAL",Ic[Ic.UNAVAILABLE=14]="UNAVAILABLE",Ic[Ic.DATA_LOSS=15]="DATA_LOSS";let jc=null;function Rc(){return new TextEncoder}const Dc=new Hs([4294967295,4294967295],0);function Oc(e){const t=Rc().encode(e),n=new qs;return n.update(t),new Uint8Array(n.digest())}function Lc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Hs([n,r],0),new Hs([s,i],0)]}class Mc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Fc("Invalid padding: ".concat(t));if(n<0)throw new Fc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Fc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Fc("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Hs.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Hs.fromNumber(n)));return 1===r.compare(Dc)&&(r=new Hs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Oc(e),[n,r]=Lc(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Mc(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Oc(e),[n,r]=Lc(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zc{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zc(Zi.min(),r,new Ga(Ai),Dl(),Hl())}}class Uc{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Uc(n,t,Hl(),Hl(),Hl())}}class Vc{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Bc{constructor(e,t){this.targetId=e,this.Ce=t}}class Hc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class qc{constructor(){this.ve=0,this.Fe=Gc(),this.Me=eo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Hl(),t=Hl(),n=Hl();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fi(38017,{changeType:s})}}),new Uc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Gc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wc{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dl(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ga(Ai)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:fi(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(pl(i))if(0===n){const e=new Vi(i.path);this.et(t,e,Vo.newNoDocument(e,Zi.min()))}else mi(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=jc)||void 0===s||s.lt(function(e,t,n,r,s){var i,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=so(n).toUint8Array()}catch(e){if(e instanceof Za)return di("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Mc(i,r,s)}catch(e){return di(e instanceof Fc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&pl(s.target)){const t=new Vi(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Vo.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Hl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new zc(e,t,this.Ye,this.je,n);return this.je=Dl(),this.Je=Kc(),this.He=Kc(),this.Ye=new Ga(Ai),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xa(Ai),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xa(Ai),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ci("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new Ga(Vi.comparator)}function Gc(){return new Ga(Vi.comparator)}const Qc={asc:"ASCENDING",desc:"DESCENDING"},Yc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xc={and:"AND",or:"OR"};class $c{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jc(e,t){return e.useProto3Json||pa(t)?t:{value:t}}function Zc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function eu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tu(e,t){return Zc(e,t.toTimestamp())}function nu(e){return mi(!!e,49232),Zi.fromTimestamp(function(e){const t=no(e);return new Ji(t.seconds,t.nanos)}(e))}function ru(e,t){return su(e,t).canonicalString()}function su(e,t){const n=function(e){return new Fi(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function iu(e){const t=Fi.fromString(e);return mi(Eu(t),10190,{key:t.toString()}),t}function au(e,t){return ru(e.databaseId,t.path)}function ou(e,t){const n=iu(t);if(n.get(1)!==e.databaseId.projectId)throw new yi(vi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yi(vi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vi(du(n))}function lu(e,t){return ru(e.databaseId,t)}function cu(e){const t=iu(e);return 4===t.length?Fi.emptyPath():du(t)}function uu(e){return new Fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function du(e){return mi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function hu(e,t,n){return{name:au(e,t),fields:n.value.mapValue.fields}}function fu(e,t){let n;if(t instanceof vc)n={update:hu(e,t.key,t.value)};else if(t instanceof kc)n={delete:au(e,t.key)};else if(t instanceof yc)n={update:hu(e,t.key,t.data),updateMask:_u(t.fieldMask)};else{if(!(t instanceof Sc))return fi(16599,{Vt:t.type});n={verify:au(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Zl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ec)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw fi(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:tu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fi(27497)}(e,t.precondition)),n}function pu(e,t){return{documents:[lu(e,t.path)]}}function mu(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lu(e,s);const i=function(e){if(0!==e.length)return Su(Yo.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:xu(e.field),direction:yu(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Jc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function gu(e){let t=cu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){mi(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=vu(e);return t instanceof Yo&&$o(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Wo(ku(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,pa(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Bo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Bo(n,t)}(n.endAt)),gl(t,s,a,i,o,"F",l,c)}function vu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ku(e.unaryFilter.field);return Qo.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ku(e.unaryFilter.field);return Qo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ku(e.unaryFilter.field);return Qo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ku(e.unaryFilter.field);return Qo.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fi(61313);default:return fi(60726)}}(e):void 0!==e.fieldFilter?function(e){return Qo.create(ku(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fi(58110);default:return fi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Yo.create(e.compositeFilter.filters.map(e=>vu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fi(1026)}}(e.compositeFilter.op))}(e):fi(30097,{filter:e})}function yu(e){return Qc[e]}function bu(e){return Yc[e]}function wu(e){return Xc[e]}function xu(e){return{fieldPath:e.canonicalString()}}function ku(e){return Ui.fromServerFormat(e.fieldPath)}function Su(e){return e instanceof Qo?function(e){if("=="===e.op){if(Do(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NAN"}};if(Ro(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Do(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NOT_NAN"}};if(Ro(e.value))return{unaryFilter:{field:xu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(e.field),op:bu(e.op),value:e.value}}}(e):e instanceof Yo?function(e){const t=e.getFilters().map(e=>Su(e));return 1===t.length?t[0]:{compositeFilter:{op:wu(e.op),filters:t}}}(e):fi(54877,{filter:e})}function _u(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Eu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Nu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zi.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zi.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:eo.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Nu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Tu{constructor(e){this.yt=e}}function Cu(e){const t=gu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_l(t,t.limit,"L"):t}class Iu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ro(e.integerValue));else if("doubleValue"in e){const n=ro(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ma(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=no(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(so(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Fo(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Lo(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):fi(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=wo,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(ro(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Vi.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Iu.Kt=new Iu;class Au{constructor(){this.Cn=new Pu}addToCollectionParentIndex(e,t){return this.Cn.add(t),ca.resolve()}getCollectionParents(e,t){return ca.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ca.resolve()}deleteFieldIndex(e,t){return ca.resolve()}deleteAllFieldIndexes(e){return ca.resolve()}createTargetIndexes(e,t){return ca.resolve()}getDocumentsMatchingTarget(e,t){return ca.resolve(null)}getIndexType(e,t){return ca.resolve(0)}getFieldIndexes(e,t){return ca.resolve([])}getNextCollectionGroupToUpdate(e){return ca.resolve(null)}getMinOffset(e,t){return ca.resolve(sa.min())}getMinOffsetFromCollectionGroup(e,t){return ca.resolve(sa.min())}updateCollectionGroup(e,t,n){return ca.resolve()}updateIndexEntries(e,t){return ca.resolve()}}class Pu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xa(Fi.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Xa(Fi.comparator)).toArray()}}new Uint8Array(0);const ju={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ru=41943040;class Du{static withCacheSize(e){return new Du(e,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Du.DEFAULT_COLLECTION_PERCENTILE=10,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Du.DEFAULT=new Du(Ru,Du.DEFAULT_COLLECTION_PERCENTILE,Du.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Du.DISABLED=new Du(-1,0,0);class Ou{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ou(0)}static cr(){return new Ou(-1)}}const Lu="LruGarbageCollector",Mu=1048576;function Fu(e,t){let[n,r]=e,[s,i]=t;const a=Ai(n,s);return 0===a?Ai(r,i):a}class zu{constructor(e){this.Ir=e,this.buffer=new Xa(Fu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Fu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ci(Lu,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){da(e)?ci(Lu,"Ignoring IndexedDB error during garbage collection: ",e):await la(e)}await this.Vr(3e5)})}}class Vu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ca.resolve(ha.ce);const n=new zu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ci("LruGarbageCollector","Garbage collection skipped; disabled"),ca.resolve(ju)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ci("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ju):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ci("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),li()<=G.DEBUG&&ci("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ca.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Bu(e,t){return new Vu(e,t)}class Hu{constructor(){this.changes=new jl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ca.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class qu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&pc(n.mutation,e,Ja.empty(),Ji.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Hl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hl();const r=Fl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ll();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Fl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Hl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Dl();const i=Ul(),a=Ul();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof yc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),pc(a.mutation,t,a.mutation.getFieldMask(),Ji.now())):i.set(t.key,Ja.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new qu(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Ul();let r=new Ga((e,t)=>e-t),s=Hl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Ja.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Hl()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=zl();l.forEach(e=>{if(!s.has(e)){const r=hc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ca.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Vi.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ca.resolve(Fl());let a=ea,o=s;return i.next(t=>ca.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?ca.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Hl())).next(e=>({batchId:a,changes:Ml(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Vi(t)).next(e=>{let t=Ll();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Ll();return this.indexManager.getCollectionParents(e,s).next(a=>ca.forEach(a,a=>{const o=function(e,t){return new ml(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Vo.newInvalidDocument(r)))});let n=Ll();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&pc(i.mutation,r,Ja.empty(),Ji.now()),Cl(t,r)&&(n=n.insert(e,r))}),n})}}class Ku{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ca.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:nu(e.createTime)}}(t)),ca.resolve()}getNamedQuery(e,t){return ca.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Cu(e.bundledQuery),readTime:nu(e.readTime)}}(t)),ca.resolve()}}class Gu{constructor(){this.overlays=new Ga(Vi.comparator),this.qr=new Map}getOverlay(e,t){return ca.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fl();return ca.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ca.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ca.resolve()}getOverlaysForCollection(e,t,n){const r=Fl(),s=t.length+1,i=new Vi(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ca.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Ga((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Fl(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Fl(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ca.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Nc(t,n));let s=this.qr.get(t);void 0===s&&(s=Hl(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class Qu{constructor(){this.sessionToken=eo.EMPTY_BYTE_STRING}getSessionToken(e){return ca.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ca.resolve()}}class Yu{constructor(){this.Qr=new Xa(Xu.$r),this.Ur=new Xa(Xu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Xu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Xu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Vi(new Fi([])),n=new Xu(t,e),r=new Xu(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Vi(new Fi([])),n=new Xu(t,e),r=new Xu(t,e+1);let s=Hl();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Xu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Xu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Vi.comparator(e.key,t.key)||Ai(e.Yr,t.Yr)}static Kr(e,t){return Ai(e.Yr,t.Yr)||Vi.comparator(e.key,t.key)}}class $u{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xa(Xu.$r)}checkEmpty(e){return ca.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new _c(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new Xu(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ca.resolve(i)}lookupMutationBatch(e,t){return ca.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return ca.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ca.resolve(0===this.mutationQueue.length?fa:this.tr-1)}getAllMutationBatches(e){return ca.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xu(t,0),r=new Xu(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),ca.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xa(Ai);return t.forEach(e=>{const t=new Xu(e,0),r=new Xu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ca.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Vi.isDocumentKey(s)||(s=s.child(""));const i=new Xu(new Vi(s),0);let a=new Xa(Ai);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),ca.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){mi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ca.forEach(t.mutations,r=>{const s=new Xu(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Xu(t,0),r=this.Zr.firstAfterOrEqual(n);return ca.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ca.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ju{constructor(e){this.ri=e,this.docs=new Ga(Vi.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ca.resolve(n?n.document.mutableCopy():Vo.newInvalidDocument(t))}getEntries(e,t){let n=Dl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vo.newInvalidDocument(e))}),ca.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Dl();const i=t.path,a=new Vi(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ia(ra(a),n)<=0||(r.has(a.key)||Cl(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return ca.resolve(s)}getAllFromCollectionGroup(e,t,n,r){fi(9500)}ii(e,t){return ca.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Zu(this)}getSize(e){return ca.resolve(this.size)}}class Zu extends Hu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ca.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ed{constructor(e){this.persistence=e,this.si=new jl(e=>hl(e),fl),this.lastRemoteSnapshotVersion=Zi.min(),this.highestTargetId=0,this.oi=0,this._i=new Yu,this.targetCount=0,this.ai=Ou.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ca.resolve()}getLastRemoteSnapshotVersion(e){return ca.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ca.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ca.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ca.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ou(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ca.resolve()}updateTargetData(e,t){return this.Pr(t),ca.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ca.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ca.waitFor(s).next(()=>r)}getTargetCount(e){return ca.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ca.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ca.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ca.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ca.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ca.resolve(n)}containsKey(e,t){return ca.resolve(this._i.containsKey(t))}}class td{constructor(e,t){this.ui={},this.overlays={},this.ci=new ha(0),this.li=!1,this.li=!0,this.hi=new Qu,this.referenceDelegate=e(this),this.Pi=new ed(this),this.indexManager=new Au,this.remoteDocumentCache=function(e){return new Ju(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Tu(t),this.Ii=new Ku(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new $u(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ci("MemoryPersistence","Starting transaction:",e);const r=new nd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ca.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class nd extends oa{constructor(e){super(),this.currentSequenceNumber=e}}class rd{constructor(e){this.persistence=e,this.Ri=new Yu,this.Vi=null}static mi(e){return new rd(e)}get fi(){if(this.Vi)return this.Vi;throw fi(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ca.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ca.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ca.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ca.forEach(this.fi,n=>{const r=Vi.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Zi.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ca.or([()=>ca.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sd{constructor(e,t){this.persistence=e,this.pi=new jl(e=>ya(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Bu(this,t)}static mi(e,t){return new sd(e,t)}Ei(){}di(e){return ca.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ca.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ca.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Zi.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ca.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ca.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ca.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ca.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Io(e.data.value)),t}br(e,t,n){return ca.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ca.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class id{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Hl(),r=Hl();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new id(e,t.fromCache,n,r)}}class ad{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class od{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=I()?8:ua(T())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new ad;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(li()<=G.DEBUG&&ci("QueryEngine","SDK will not create cache indexes for query:",Tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ca.resolve()):(li()<=G.DEBUG&&ci("QueryEngine","Query:",Tl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(li()<=G.DEBUG&&ci("QueryEngine","The SDK decides to create cache indexes for query:",Tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xl(t))):ca.resolve())}ys(e,t){if(yl(t))return ca.resolve(null);let n=xl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=_l(t,null,"F"),n=xl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Hl(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,_l(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return yl(t)||r.isEqual(Zi.min())?ca.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?ca.resolve(null):(li()<=G.DEBUG&&ci("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tl(t)),this.vs(e,i,t,na(r,ea)).next(e=>e))})}Ds(e,t){let n=new Xa(Al(e));return t.forEach((t,r)=>{Cl(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return li()<=G.DEBUG&&ci("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.ps.getDocumentsMatchingQuery(e,t,sa.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ld="LocalStore";class cd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Ga(Ai),this.xs=new jl(e=>hl(e),fl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ud(e,t,n,r){return new cd(e,t,n,r)}async function dd(e,t){const n=gi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Hl();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function hd(e){const t=gi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function fd(e,t,n){let r=Hl(),s=Hl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Dl();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Zi.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ci(ld,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function pd(e,t){const n=gi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=fa),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function md(e,t){const n=gi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,ca.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new Nu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function gd(e,t,n){const r=gi(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!da(e))throw e;ci(ld,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function vd(e,t,n){const r=gi(e);let s=Zi.min(),i=Hl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=gi(e),s=r.xs.get(n);return void 0!==s?ca.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,xl(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:Zi.min(),n?i:Hl())).next(e=>(yd(r,Il(t),e),{documents:e,Qs:i})))}function yd(e,t,n){let r=e.Os.get(t)||Zi.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class bd{constructor(){this.activeTargetIds=Wl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wd{constructor(){this.Mo=new bd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xd{Oo(e){}shutdown(){}}const kd="ConnectivityMonitor";class Sd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ci(kd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ci(kd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _d=null;function Ed(){return null===_d?_d=268435456+Math.round(2147483648*Math.random()):_d++,"0x"+_d.toString(16)}const Nd="RestConnection",Td={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===po?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=Ed(),a=this.zo(e,t.toUriEncodedString());ci(Nd,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=k(l);return this.Jo(e,a,o,n,c).then(t=>(ci(Nd,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw di(Nd,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ai,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Td[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Id{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ad="WebChannelConnection";class Pd extends Cd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Ed();return new Promise((s,a)=>{const o=new Gs;o.setWithCredentials(!0),o.listenOnce(Ys.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Xs.NO_ERROR:const n=o.getResponseJson();ci(Ad,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case Xs.TIMEOUT:ci(Ad,"RPC '".concat(e,"' ").concat(i," timed out")),a(new yi(vi.DEADLINE_EXCEEDED,"Request time out"));break;case Xs.HTTP_ERROR:const r=o.getStatus();if(ci(Ad,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vi).indexOf(t)>=0?t:vi.UNKNOWN}(n.status);a(new yi(e,n.message))}else a(new yi(vi.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yi(vi.UNAVAILABLE,"Connection failed."));break;default:fi(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{ci(Ad,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);ci(Ad,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Ed(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ei(),a=Zs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ci(Ad,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new Id({Yo:t=>{h?ci(Ad,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ci(Ad,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ci(Ad,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Qs.EventType.OPEN,()=>{h||(ci(Ad,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Qs.EventType.CLOSE,()=>{h||(h=!0,ci(Ad,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Qs.EventType.ERROR,t=>{h||(h=!0,di(Ad,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new yi(vi.UNAVAILABLE,"The operation could not be completed")))}),p(u,Qs.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];mi(!!s,16349);const i=s,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ci(Ad,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Cc[e];if(void 0!==t)return Pc(t)}(t),s=a.message;void 0===n&&(n=vi.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new yi(n,s)),u.close()}else ci(Ad,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.u_(s)}}),p(a,Js.STAT_EVENT,t=>{t.stat===$s.PROXY?ci(Ad,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===$s.NOPROXY&&ci(Ad,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function jd(){return"undefined"!=typeof document?document:null}function Rd(e){return new $c(e,!0)}class Dd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ci("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Od="PersistentStream";class Ld{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===vi.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===vi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new yi(vi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ci(Od,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ci(Od,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Md extends Ld{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fi(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(mi(void 0===t||"string"==typeof t,58123),eo.fromBase64String(t||"")):(mi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),eo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?vi.UNKNOWN:Pc(e.code);return new yi(t,e.message||"")}(a);n=new Hc(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ou(e,r.document.name),i=nu(r.document.updateTime),a=r.document.createTime?nu(r.document.createTime):Zi.min(),o=new zo({mapValue:{fields:r.document.fields}}),l=Vo.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Vc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ou(e,r.document),i=r.readTime?nu(r.readTime):Zi.min(),a=Vo.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Vc([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ou(e,r.document),i=r.removedTargetIds||[];n=new Vc([],i,s,null)}else{if(!("filter"in t))return fi(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Tc(r,s),a=e.targetId;n=new Bc(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zi.min():t.readTime?nu(t.readTime):Zi.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=uu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=pl(r)?{documents:pu(e,r)}:{query:mu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=eu(e,t.resumeToken);const r=Jc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zi.min())>0){n.readTime=Zc(e,t.snapshotVersion.toTimestamp());const r=Jc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fi(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=uu(this.serializer),t.removeTarget=e,this.q_(t)}}class Fd extends Ld{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){mi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(mi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?nu(e.updateTime):nu(t);return n.isEqual(Zi.min())&&(n=nu(t)),new lc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=nu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=uu(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>fu(this.serializer,e))};this.q_(t)}}class zd{}class Ud extends zd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new yi(vi.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,su(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yi(vi.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,su(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yi(vi.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Vd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ui(t),this.aa=!1):ci("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Bd="RemoteStore";class Hd{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Jd(this)&&(ci(Bd,"Restarting streams for network reachability change."),await async function(e){const t=gi(e);t.Ea.add(4),await Wd(t),t.Ra.set("Unknown"),t.Ea.delete(4),await qd(t)}(this))})}),this.Ra=new Vd(n,r)}}async function qd(e){if(Jd(e))for(const t of e.da)await t(!0)}async function Wd(e){for(const t of e.da)await t(!1)}function Kd(e,t){const n=gi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$d(n)?Xd(n):vh(n).O_()&&Qd(n,t))}function Gd(e,t){const n=gi(e),r=vh(n);n.Ia.delete(t),r.O_()&&Yd(n,t),0===n.Ia.size&&(r.O_()?r.L_():Jd(n)&&n.Ra.set("Unknown"))}function Qd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zi.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vh(e).Y_(t)}function Yd(e,t){e.Va.Ue(t),vh(e).Z_(t)}function Xd(e){e.Va=new Wc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),vh(e).start(),e.Ra.ua()}function $d(e){return Jd(e)&&!vh(e).x_()&&e.Ia.size>0}function Jd(e){return 0===gi(e).Ea.size}function Zd(e){e.Va=void 0}async function eh(e){e.Ra.set("Online")}async function th(e){e.Ia.forEach((t,n)=>{Qd(e,t)})}async function nh(e,t){Zd(e),$d(e)?(e.Ra.ha(t),Xd(e)):e.Ra.set("Unknown")}async function rh(e,t,n){if(e.Ra.set("Online"),t instanceof Hc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ci(Bd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await sh(e,n)}else if(t instanceof Vc?e.Va.Ze(t):t instanceof Bc?e.Va.st(t):e.Va.tt(t),!n.isEqual(Zi.min()))try{const t=await hd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(eo.EMPTY_BYTE_STRING,r.snapshotVersion)),Yd(e,t);const s=new Nu(r.target,t,n,r.sequenceNumber);Qd(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ci(Bd,"Failed to raise snapshot:",t),await sh(e,t)}}async function sh(e,t,n){if(!da(t))throw t;e.Ea.add(1),await Wd(e),e.Ra.set("Offline"),n||(n=()=>hd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ci(Bd,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await qd(e)})}function ih(e,t){return t().catch(n=>sh(e,n,t))}async function ah(e){const t=gi(e),n=yh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fa;for(;oh(t);)try{const e=await pd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,lh(t,e)}catch(e){await sh(t,e)}ch(t)&&uh(t)}function oh(e){return Jd(e)&&e.Ta.length<10}function lh(e,t){e.Ta.push(t);const n=yh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ch(e){return Jd(e)&&!yh(e).x_()&&e.Ta.length>0}function uh(e){yh(e).start()}async function dh(e){yh(e).ra()}async function hh(e){const t=yh(e);for(const n of e.Ta)t.ea(n.mutations)}async function fh(e,t,n){const r=e.Ta.shift(),s=Ec.from(r,t,n);await ih(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ah(e)}async function ph(e,t){t&&yh(e).X_&&await async function(e,t){if(function(e){return Ac(e)&&e!==vi.ABORTED}(t.code)){const n=e.Ta.shift();yh(e).B_(),await ih(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ah(e)}}(e,t),ch(e)&&uh(e)}async function mh(e,t){const n=gi(e);n.asyncQueue.verifyOperationInProgress(),ci(Bd,"RemoteStore received new credentials");const r=Jd(n);n.Ea.add(3),await Wd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await qd(n)}async function gh(e,t){const n=gi(e);t?(n.Ea.delete(2),await qd(n)):t||(n.Ea.add(2),await Wd(n),n.Ra.set("Unknown"))}function vh(e){return e.ma||(e.ma=function(e,t,n){const r=gi(e);return r.sa(),new Md(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:eh.bind(null,e),t_:th.bind(null,e),r_:nh.bind(null,e),H_:rh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),$d(e)?Xd(e):e.Ra.set("Unknown")):(await e.ma.stop(),Zd(e))})),e.ma}function yh(e){return e.fa||(e.fa=function(e,t,n){const r=gi(e);return r.sa(),new Fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:dh.bind(null,e),r_:ph.bind(null,e),ta:hh.bind(null,e),na:fh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ah(e)):(await e.fa.stop(),e.Ta.length>0&&(ci(Bd,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class bh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new bh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yi(vi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wh(e,t){if(ui("AsyncQueue","".concat(t,": ").concat(e)),da(e))return new yi(vi.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class xh{static emptySet(e){return new xh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Vi.comparator(t.key,n.key):(e,t)=>Vi.comparator(e.key,t.key),this.keyedMap=Ll(),this.sortedSet=new Ga(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new xh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class kh{constructor(){this.ga=new Ga(Vi.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):fi(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Sh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Sh(e,t,xh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&El(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _h{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Eh{constructor(){this.queries=Nh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=gi(e),r=n.queries;n.queries=Nh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new yi(vi.ABORTED,"Firestore shutting down"))}}function Nh(){return new jl(e=>Nl(e),El)}async function Th(e,t){const n=gi(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new _h,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=wh(e,"Initialization of query '".concat(Tl(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Ph(n)}async function Ch(e,t){const n=gi(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ih(e,t){const n=gi(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Ph(n)}function Ah(e,t,n){const r=gi(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Ph(e){e.Ca.forEach(e=>{e.next()})}var jh,Rh;(Rh=jh||(jh={})).Ma="default",Rh.Cache="cache";class Dh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Sh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Sh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jh.Cache}}class Oh{constructor(e){this.key=e}}class Lh{constructor(e){this.key=e}}class Mh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Hl(),this.mutatedKeys=Hl(),this.eu=Al(e),this.tu=new xh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new kh,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Cl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fi(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Sh(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Hl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Lh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Oh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Hl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Fh="SyncEngine";class zh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Uh{constructor(e){this.key=e,this.hu=!1}}class Vh{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new jl(e=>Nl(e),El),this.Iu=new Map,this.Eu=new Set,this.du=new Ga(Vi.comparator),this.Au=new Map,this.Ru=new Yu,this.Vu={},this.mu=new Map,this.fu=Ou.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Bh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=uf(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await qh(r,t,n,!0),s}async function Hh(e,t){const n=uf(e);await qh(n,t,!0,!1)}async function qh(e,t,n,r){const s=await md(e.localStore,xl(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Wh(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Kd(e.remoteStore,s),o}async function Wh(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await vd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return rf(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await vd(e.localStore,t,!0),a=new Mh(t,i.Qs),o=a.ru(i.documents),l=Uc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);rf(e,n,c.au);const u=new zh(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Kh(e,t,n){const r=gi(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!El(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gd(r.remoteStore,s.targetId),tf(r,s.targetId)}).catch(la)):(tf(r,s.targetId),await gd(r.localStore,s.targetId,!0))}async function Gh(e,t){const n=gi(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gd(n.remoteStore,r.targetId))}async function Qh(e,t){const n=gi(e);try{const e=await function(e,t){const n=gi(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(eo.EMPTY_BYTE_STRING,Zi.min()).withLastLimboFreeSnapshotVersion(Zi.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=Dl(),l=Hl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(fd(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Zi.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ca.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(mi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?mi(r.hu,14607):e.removedDocuments.size>0&&(mi(r.hu,42227),r.hu=!1))}),await of(n,e,t)}catch(e){await la(e)}}function Yh(e,t,n){const r=gi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=gi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Ph(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xh(e,t,n){const r=gi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new Ga(Vi.comparator);e=e.insert(i,Vo.newNoDocument(i,Zi.min()));const n=Hl().add(i),s=new zc(Zi.min(),new Map,new Ga(Ai),e,n);await Qh(r,s),r.du=r.du.remove(i),r.Au.delete(t),af(r)}else await gd(r.localStore,t,!1).then(()=>tf(r,t,n)).catch(la)}async function $h(e,t){const n=gi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=ca.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);mi(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Hl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ef(n,r,null),Zh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await of(n,e)}catch(e){await la(e)}}async function Jh(e,t,n){const r=gi(e);try{const e=await function(e,t){const n=gi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(mi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ef(r,t,n),Zh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await of(r,e)}catch(n){await la(n)}}function Zh(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function ef(e,t,n){const r=gi(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function tf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||nf(e,t)})}function nf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Gd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),af(e))}function rf(e,t,n){for(const r of n)r instanceof Oh?(e.Ru.addReference(r.key,t),sf(e,r)):r instanceof Lh?(ci(Fh,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||nf(e,r.key)):fi(19791,{wu:r})}function sf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ci(Fh,"New document in limbo: "+n),e.Eu.add(r),af(e))}function af(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Vi(Fi.fromString(t)),r=e.fu.next();e.Au.set(r,new Uh(n)),e.du=e.du.insert(n,r),Kd(e.remoteStore,new Nu(xl(vl(n.path)),r,"TargetPurposeLimboResolution",ha.ce))}}async function of(e,t,n){const r=gi(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=id.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=gi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ca.forEach(t,t=>ca.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ca.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!da(e))throw e;ci(ld,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function lf(e,t){const n=gi(e);if(!n.currentUser.isEqual(t)){ci(Fh,"User change. New user:",t.toKey());const e=await dd(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new yi(vi.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await of(n,e.Ls)}}function cf(e,t){const n=gi(e),r=n.Au.get(t);if(r&&r.hu)return Hl().add(r.key);{let e=Hl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function uf(e){const t=gi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xh.bind(null,t),t.Pu.H_=Ih.bind(null,t.eventManager),t.Pu.yu=Ah.bind(null,t.eventManager),t}function df(e){const t=gi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$h.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jh.bind(null,t),t}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ud(this.persistence,new od,e.initialUser,this.serializer)}Cu(e){return new td(rd.mi,this.serializer)}Du(e){return new wd}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class ff extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mi(this.persistence.referenceDelegate instanceof sd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Uu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Du.withCacheSize(this.cacheSizeBytes):Du.DEFAULT;return new td(e=>sd.mi(e,t),this.serializer)}}class pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Yh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lf.bind(null,this.syncEngine),await gh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Eh}createDatastore(e){const t=Rd(e.databaseInfo.databaseId),n=function(e){return new Pd(e)}(e.databaseInfo);return function(e,t,n,r){return new Ud(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Hd(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Yh(this.syncEngine,e,0),Sd.v()?new Sd:new xd)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Vh(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=gi(e);ci(Bd,"RemoteStore shutting down."),t.Ea.add(5),await Wd(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}pf.provider={build:()=>new pf};class mf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const gf="FirestoreClient";class vf{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ii.UNAUTHENTICATED,this.clientId=Ii.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{ci(gf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ci(gf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yf(e,t){e.asyncQueue.verifyOperationInProgress(),ci(gf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await dd(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function bf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wf(e);ci(gf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>mh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>mh(t.remoteStore,n)),e._onlineComponents=t}async function wf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ci(gf,"Using user provided OfflineComponentProvider");try{await yf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===vi.FAILED_PRECONDITION||e.code===vi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;di("Error using user provided cache. Falling back to memory cache: "+n),await yf(e,new hf)}}else ci(gf,"Using default OfflineComponentProvider"),await yf(e,new ff(void 0));return e._offlineComponents}async function xf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ci(gf,"Using user provided OnlineComponentProvider"),await bf(e,e._uninitializedComponentsProvider._online)):(ci(gf,"Using default OnlineComponentProvider"),await bf(e,new pf))),e._onlineComponents}function kf(e){return xf(e).then(e=>e.syncEngine)}async function Sf(e){const t=await xf(e),n=t.eventManager;return n.onListen=Bh.bind(null,t.syncEngine),n.onUnlisten=Kh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Hh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Gh.bind(null,t.syncEngine),n}function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new mf({next:o=>{i.Nu(),t.enqueueAndForget(()=>Ch(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new yi(vi.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new yi(vi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Dh(vl(n.path),i,{includeMetadataChanges:!0,qa:!0});return Th(e,a)}(await Sf(e),e.asyncQueue,t,n,r)),r.promise}function Ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new bi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new mf({next:n=>{i.Nu(),t.enqueueAndForget(()=>Ch(e,a)),n.fromCache&&"server"===r.source?s.reject(new yi(vi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Dh(n,i,{includeMetadataChanges:!0,qa:!0});return Th(e,a)}(await Sf(e),e.asyncQueue,t,n,r)),r.promise}function Nf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Tf=new Map,Cf="firestore.googleapis.com",If=!0;class Af{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yi(vi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cf,this.ssl=If}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:If;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ru;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Mu)throw new yi(vi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new yi(vi.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new yi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new yi(vi.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Af({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yi(vi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yi(vi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Af(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xi;switch(e.type){case"firstParty":return new Ei(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yi(vi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Tf.get(e);t&&(ci("ComponentProvider","Removing Datastore"),Tf.delete(e),t.terminate())}(this),Promise.resolve()}}function jf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Gi(e,Pf);const s=k(t),i=e._getSettings(),a=u(u({},i),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);s&&(S("https://".concat(o)),N("Firestore",!0)),i.host!==Cf&&i.host!==o&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},i),{},{host:o,ssl:s,emulatorOptions:r});if(!D(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ii.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new yi(vi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ii(s)}e._authCredentials=new ki(new wi(t,n))}}class Rf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Rf(this.firestore,e,this._query)}}class Df{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Of(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Df(this.firestore,e,this._key)}toJSON(){return{type:Df._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Yi(t,Df._jsonSchema))return new Df(e,n||null,new Vi(Fi.fromString(t.referencePath)))}}Df._jsonSchemaVersion="firestore/documentReference/1.0",Df._jsonSchema={type:Qi("string",Df._jsonSchemaVersion),referencePath:Qi("string")};class Of extends Rf{constructor(e,t,n){super(e,t,vl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Df(this.firestore,null,new Vi(e))}withConverter(e){return new Of(this.firestore,e,this._path)}}function Lf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=V(e),Bi("collection","path",t),e instanceof Pf){const n=Fi.fromString(t,...r);return qi(n),new Of(e,null,n)}{if(!(e instanceof Df||e instanceof Of))throw new yi(vi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fi.fromString(t,...r));return qi(n),new Of(e.firestore,null,n)}}function Mf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=V(e),1===arguments.length&&(t=Ii.newId()),Bi("doc","path",t),e instanceof Pf){const n=Fi.fromString(t,...r);return Hi(n),new Df(e,null,new Vi(n))}{if(!(e instanceof Df||e instanceof Of))throw new yi(vi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fi.fromString(t,...r));return Hi(n),new Df(e.firestore,e instanceof Of?e.converter:null,new Vi(n))}}const Ff="AsyncQueue";class zf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dd(this,"async_queue_retry"),this._c=()=>{const e=jd();e&&ci(Ff,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=jd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!da(e))throw e;ci(Ff,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",Uf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=bh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&fi(47125,{Pc:Uf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Uf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Vf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Bf extends Pf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zf,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zf(e),this._firestoreClient=void 0,await e}}}function Hf(e){if(e._terminated)throw new yi(vi.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||qf(e),e._firestoreClient}function qf(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new fo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Nf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new vf(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Wf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wf(eo.fromBase64String(e))}catch(e){throw new yi(vi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Wf(eo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yi(e,Wf._jsonSchema))return Wf.fromBase64String(e.bytes)}}Wf._jsonSchemaVersion="firestore/bytes/1.0",Wf._jsonSchema={type:Qi("string",Wf._jsonSchemaVersion),bytes:Qi("string")};class Kf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new yi(vi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._methodName=e}}class Qf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yi(vi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yi(vi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ai(this._lat,e._lat)||Ai(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qf._jsonSchemaVersion}}static fromJSON(e){if(Yi(e,Qf._jsonSchema))return new Qf(e.latitude,e.longitude)}}Qf._jsonSchemaVersion="firestore/geoPoint/1.0",Qf._jsonSchema={type:Qi("string",Qf._jsonSchemaVersion),latitude:Qi("number"),longitude:Qi("number")};class Yf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Yf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yi(e,Yf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Yf(e.vectorValues);throw new yi(vi.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yf._jsonSchemaVersion="firestore/vectorValue/1.0",Yf._jsonSchema={type:Qi("string",Yf._jsonSchemaVersion),vectorValues:Qi("object")};const Xf=/^__.*__$/;class $f{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new yc(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class Jf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new yc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Zf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fi(40011,{Ac:e})}}class ep{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ep(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Zf(this.Ac)&&Xf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Rd(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ep({Ac:e,methodName:t,Dc:n,path:Ui.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(e){const t=e._freezeSettings(),n=Rd(e._databaseId);return new tp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rp(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);hp("Data must be an object, but it was:",a,r);const o=up(r,a);let l,c;if(i.merge)l=new Ja(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=fp(t,r,n);if(!a.contains(s))throw new yi(vi.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));vp(e,s)||e.push(s)}l=new Ja(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new $f(new zo(o),l,c)}class sp extends Gf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sp}}class ip extends Gf{_toFieldTransform(e){return new oc(e.path,new Zl)}isEqual(e){return e instanceof ip}}function ap(e,t,n,r){const s=e.Cc(1,t,n);hp("Data must be an object, but it was:",s,r);const i=[],a=zo.empty();Wa(r,(e,r)=>{const o=mp(t,e,n);r=V(r);const l=s.yc(o);if(r instanceof sp)i.push(o);else{const e=cp(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Ja(i);return new Jf(a,o,s.fieldTransforms)}function op(e,t,n,r,s,i){const a=e.Cc(1,t,n),o=[fp(t,r,n)],l=[s];if(i.length%2!=0)throw new yi(vi.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(fp(t,i[h])),l.push(i[h+1]);const c=[],u=zo.empty();for(let h=o.length-1;h>=0;--h)if(!vp(c,o[h])){const e=o[h];let t=l[h];t=V(t);const n=a.yc(e);if(t instanceof sp)c.push(e);else{const r=cp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ja(c);return new Jf(u,d,a.fieldTransforms)}function lp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cp(n,e.Cc(r?4:3,t))}function cp(e,t){if(dp(e=V(e)))return hp("Unsupported field value:",t,e),up(e,t);if(e instanceof Gf)return function(e,t){if(!Zf(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=cp(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=V(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ql(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ji.fromDate(e);return{timestampValue:Zc(t.serializer,n)}}if(e instanceof Ji){const n=new Ji(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Zc(t.serializer,n)}}if(e instanceof Qf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Wf)return{bytesValue:eu(t.serializer,e._byteString)};if(e instanceof Df){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ru(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Yf)return function(e,t){return{mapValue:{fields:{[go]:{stringValue:bo},[wo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Kl(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ki(e)))}(e,t)}function up(e,t){const n={};return Ka(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wa(e,(e,r)=>{const s=cp(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function dp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ji||e instanceof Qf||e instanceof Wf||e instanceof Df||e instanceof Gf||e instanceof Yf)}function hp(e,t,n){if(!dp(n)||!Wi(n)){const r=Ki(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function fp(e,t,n){if((t=V(t))instanceof Kf)return t._internalPath;if("string"==typeof t)return mp(e,t);throw gp("Field path arguments must be of type string or ",e,!1,void 0,n)}const pp=new RegExp("[~\\*/\\[\\]]");function mp(e,t,n){if(t.search(pp)>=0)throw gp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Kf(...t.split("."))._internalPath}catch(r){throw gp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new yi(vi.INVALID_ARGUMENT,o+e+l)}function vp(e,t){return e.some(e=>e.isEqual(t))}class yp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Df(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bp extends yp{data(){return super.data()}}function wp(e,t){return"string"==typeof t?mp(e,t):t instanceof Kf?t._internalPath:t._delegate._internalPath}function xp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new yi(vi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class Sp extends kp{}function _p(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof kp&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Np).length,n=e.filter(e=>e instanceof Ep).length;if(t>1||t>0&&n>0)throw new yi(vi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Ep extends Sp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ep(e,t,n)}_apply(e){const t=this._parse(e);return Pp(e._query,t),new Rf(e.firestore,e.converter,Sl(e._query,t))}_parse(e){const t=np(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new yi(vi.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ap(a,i);const t=[];for(const n of a)t.push(Ip(r,e,n));o={arrayValue:{values:t}}}else o=Ip(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ap(a,i),o=lp(n,t,a,"in"===i||"not-in"===i);return Qo.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Np extends kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Np(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Yo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Pp(n,s),n=Sl(n,s)}(e._query,t),new Rf(e.firestore,e.converter,Sl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Tp extends Sp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Tp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new yi(vi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yi(vi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wo(t,n)}(e._query,this._field,this._direction);return new Rf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ml(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Cp(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wp("orderBy",e);return Tp._create(n,t)}function Ip(e,t,n){if("string"==typeof(n=V(n))){if(""===n)throw new yi(vi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bl(t)&&-1!==n.indexOf("/"))throw new yi(vi.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Fi.fromString(n));if(!Vi.isDocumentKey(r))throw new yi(vi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ao(e,new Vi(r))}if(n instanceof Df)return Ao(e,n._key);throw new yi(vi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ki(n),"."))}function Ap(e,t){if(!Array.isArray(e)||0===e.length)throw new yi(vi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Pp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new yi(vi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new yi(vi.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class jp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ro(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(so(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fi(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Wa(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[wo].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>ro(e.doubleValue));return new Yf(n)}convertGeoPoint(e){return new Qf(ro(e.latitude),ro(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=uo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const t=no(e);return new Ji(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fi.fromString(e);mi(Eu(n),9688,{name:e});const r=new mo(n.get(1),n.get(3)),s=new Vi(n.popFirst(5));return r.isEqual(t)||ui("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Rp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Op extends yp{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new yi(vi.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Op._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Op._jsonSchemaVersion="firestore/documentSnapshot/1.0",Op._jsonSchema={type:Qi("string",Op._jsonSchemaVersion),bundleSource:Qi("string","DocumentSnapshot"),bundleName:Qi("string"),bundle:Qi("string")};class Lp extends Op{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Mp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Lp(this._firestore,this._userDataWriter,n.key,n,new Dp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yi(vi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Lp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Lp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Fp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new yi(vi.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ii.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Fp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fi(61501,{type:e})}}function zp(e){e=Gi(e,Df);const t=Gi(e.firestore,Bf);return _f(Hf(t),e._key).then(n=>Kp(t,e,n))}Mp._jsonSchemaVersion="firestore/querySnapshot/1.0",Mp._jsonSchema={type:Qi("string",Mp._jsonSchemaVersion),bundleSource:Qi("string","QuerySnapshot"),bundleName:Qi("string"),bundle:Qi("string")};class Up extends jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Df(this.firestore,null,t)}}function Vp(e,t,n){e=Gi(e,Df);const r=Gi(e.firestore,Bf),s=np(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=V(t))||t instanceof Kf?op(s,"updateDoc",e._key,t,n,o):ap(s,"updateDoc",e._key,t),Wp(r,[i.toMutation(e._key,cc.exists(!0))])}function Bp(e){return Wp(Gi(e.firestore,Bf),[new kc(e._key,cc.none())])}function Hp(e,t){const n=Gi(e.firestore,Bf),r=Mf(e),s=Rp(e.converter,t);return Wp(n,[rp(np(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,cc.exists(!1))]).then(()=>r)}function qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=V(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||Vf(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Vf(n[i])){var o,l,c;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Df)d=Gi(e.firestore,Bf),h=vl(e._key.path),u={next:t=>{n[i]&&n[i](Kp(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=Gi(e,Rf);d=Gi(t.firestore,Bf),h=t._query;const r=new Up(d);u={next:e=>{n[i]&&n[i](new Mp(d,r,t,e))},error:n[i+1],complete:n[i+2]},xp(e._query)}return function(e,t,n,r){const s=new mf(r),i=new Dh(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Th(await Sf(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ch(await Sf(e),i))}}(Hf(d),h,a,u)}function Wp(e,t){return function(e,t){const n=new bi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=df(e);try{const e=await function(e,t){const n=gi(e),r=Ji.now(),s=t.reduce((e,t)=>e.add(t.key),Hl());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Dl(),l=Hl();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=mc(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new yc(e.key,t,Uo(t.value.mapValue),cc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Ml(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Ga(Ai)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await of(r,e.changes),await ah(r.remoteStore)}catch(e){const t=wh(e,"Failed to persist write");n.reject(t)}}(await kf(e),t,n)),n.promise}(Hf(e),t)}function Kp(e,t,n){const r=n.docs.get(t._key),s=new Up(e);return new Op(e,s,t._key,r,new Dp(n.hasPendingWrites,n.fromCache),t.converter)}function Gp(){return new ip("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ai=e}(nt),$e(new B("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Bf(new Si(e.getProvider("auth-internal")),new Ti(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yi(vi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(e.options.projectId,t)}(i,r),i);return s=u({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),it(ri,si,e),it(ri,si,"esm2020")}();const Qp=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Yp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Xp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $p=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Jp=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:d}=e,h=i(e,$p);return(0,r.createElement)("svg",u(u(u({ref:t},Xp),{},{width:s,height:s,stroke:n,strokeWidth:o?24*Number(a)/Number(s):a,className:Yp("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(c)?c:[c]])}),Zp=["className"],em=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{className:a}=n,o=i(n,Zp);return(0,r.createElement)(Jp,u({ref:s,iconNode:t,className:Yp("lucide-".concat((l=Qp(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),a)},o));var l});return n.displayName=Qp(e),n},tm=em("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nm=em("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),rm=em("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),sm=em("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),im=em("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),am=em("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),om=em("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),lm=em("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),cm=em("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),um=em("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),dm=em("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),hm=em("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),fm=em("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),pm=em("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),mm=em("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),gm=em("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),vm=em("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),ym=em("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),bm=em("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),wm=em("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),xm=em("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),km=em("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Sm=em("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),_m=em("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Em=em("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Nm=em("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Tm=em("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Cm=em("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Im=em("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Am=em("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Pm=em("images",[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16",key:"9kzy35"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2",key:"1t0f0t"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor",key:"1obus6"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2",key:"1gvhby"}]]),jm=em("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Rm=em("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Dm=em("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Om=em("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Lm=em("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var Mm=n(579);const Fm=["id"],zm=rt({apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FIREBASE_MEASUREMENT_ID}),Um=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const t=Je(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Je(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(D(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;_t(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ls,persistence:[qr,_r,Ir]}),r=w("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Us)return;const r=null===t||void 0===t?void 0:t.token;Vs!==r&&(Vs=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){V(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){V(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=y("auth");return i&&Gn(n,"http://".concat(i)),n}(zm),Vm=function(e,t){const n="object"==typeof e?e:st(),r="string"==typeof e?e:t||po,s=Je(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&jf(s,...e)}return s}(zm),Bm="vintage-validator-v1",Hm={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GEMINI_API_KEY,qm="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=".concat(Hm);async function Wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.slice(0,4),s=[];n.title&&s.push("Title/Type: ".concat(n.title)),n.maker&&s.push("Maker/Brand: ".concat(n.maker)),n.style&&s.push("Style: ".concat(n.style)),n.materials&&s.push("Materials: ".concat(n.materials)),n.era&&s.push("Era: ".concat(n.era));const i=s.length>0?"The user has already identified the following details (TRUST THESE over your visual estimate if they conflict): ".concat(s.join(", "),"."):"",a=n.clarifications&&Object.keys(n.clarifications).length>0?"\nThe user has answered your previous questions. Use these answers to refine your valuation: ".concat(JSON.stringify(n.clarifications),"."):"",o={contents:[{parts:[{text:"\n    You are an expert archivist and appraiser with distinct specializations in:\n    - Rare Books & Ephemera\n    - Vintage Vinyl & Music\n    - Fine Art & Prints\n    - Antique Jewelry & Watches\n    - Vintage Fashion & Textiles\n    - Mid-Century Modern & Antique Furniture/Decor\n    - Vintage Electronics & Cameras\n    - Retro Toys & Trading Cards\n    - Kitchenware & Glass\n    \n    ".concat(i,"\n    ").concat(a,'\n    \n    Analyze the attached images.\n    \n    CONTEXT FROM USER NOTES/CONTEXT: "').concat(t,'"\n    (Use this information to inform your identification and valuation if relevant).\n    \n    STEP 1: CLASSIFY\n    Determine the specific category of the item.\n\n    STEP 2: ANALYZE (Based on Category)\n    Apply the specific lens for that category to extract details:\n\n    [IF JEWELRY/WATCHES]\n    - Identify: Object type (e.g. "Cocktail Ring") AND specific style (e.g. "Brutalist", "Art Deco").\n    - Details: Material purity (karat), Gemstones (cut/carat), Setting style.\n    - Markings: Hallmarks, Maker\'s marks, Assay marks, Serial numbers.\n    - Map "Maker" to Brand/Silversmith/Artist.\n\n    [IF BOOKS]\n    - Identify: Title, Author, Publisher, Copyright Year.\n    - Details: Edition (1st?), Printing (1st?), Binding (Cloth/Leather/Boards), Dust Jacket presence/condition.\n    - ISBN HANDLING (CRITICAL):\n      * Read ISBN digit-by-digit carefully. ISBN-10 has 10 digits, ISBN-13 has 13 digits starting with 978 or 979.\n      * If ANY digit is unclear, blurry, or uncertain, note it as "ISBN: partially visible [digits you can read]".\n      * NEVER guess or assume digits you cannot clearly see.\n      * Include BOTH ISBN-10 and ISBN-13 if both are visible on the book.\n      * The barcode number below the barcode IS the ISBN-13.\n    - Other Markings: Library stamps/codes, Author signatures, Bookplates, Price clippings.\n    - Map "Maker" to Author (and Publisher if notable, e.g., "Stephen King / Viking Press").\n    - Map "Style" to Genre/Subject.\n    - For first editions: Look for number line (1 2 3 4 5...) - "1" present = first printing.\n\n    [IF VINYL RECORDS]\n    - Identify: Artist, Album Title, Label, Year.\n    - Details: Country of Pressing, Vinyl weight/color, Sleeve type (Gatefold?).\n    - Markings: Catalog Number (CRITICAL), Matrix/Runout codes (if visible).\n    - Map "Maker" to Artist.\n    - Map "Style" to Genre.\n\n    [IF ART/PRINTS]\n    - Identify: Artist, Title (if known), Medium (Lithograph, Oil, Etching, Giclee).\n    - Details: Frame style, Surface texture.\n    - Markings: Signatures (Hand signed vs Plate), Edition Number (e.g. 15/100), Dates.\n    - Map "Maker" to Artist.\n    - Map "Style" to Movement (Expressionism, Pop Art, etc.).\n\n    [IF FURNITURE/DECOR]\n    - Identify: Object, Designer, Manufacturer, Style (MCM, Danish Modern).\n    - Details: Joinery, Veneer vs Solid, Upholstery type.\n    - Map "Maker" to Designer/Manufacturer.\n\n    [IF ELECTRONICS/CAMERAS]\n    - Identify: Brand, Model Name, Model Number (CRITICAL).\n    - Details: Tested status (visual cues), Accessories (remote, lens cap), Physical condition (corrosion?).\n    - Markings: Serial numbers, Manufacture Date, Voltage/Specs.\n    - Map "Maker" to Brand (Sony, Nikon, Nintendo).\n    - Map "Style" to Format (e.g. "VHS", "35mm SLR", "8-bit Console").\n\n    [IF KITCHENWARE/GLASS/POTTERY]\n    - Identify: Brand/Maker (Pyrex, Le Creuset), Pattern Name (CRITICAL), Object Type.\n    - Details: Material (Cast Iron, Uranium Glass), Color, Capacity/Size.\n    - Markings: Bottom stamps, mold numbers, lid numbers.\n    - Map "Maker" to Manufacturer.\n    - Map "Style" to Pattern or Era (e.g. "Starburst", "Depression Glass").\n\n    [IF TOYS/TRADING CARDS]\n    - Identify: Character/Figure Name, Franchise (Star Wars, Pokemon), Year.\n    - Details: Action feature, Holographic/Foil?, Set Number (e.g. 102/150).\n    - Markings: Copyright dates, "Made in" stamps, Card IDs.\n    - Map "Maker" to Company (Hasbro, Wizards of the Coast).\n    - Map "Style" to Series/Set.\n\n    [IF FASHION/SHOES]\n    - Identify: Brand (High-end like Gucci OR Mid-tier like Madewell, Zara, Lululemon), Item Name.\n    - Details: Size (US/EU), Gender, Material (CRITICAL: Silk vs Polyester, Wool vs Acrylic).\n    - Specifics: Look for RN numbers, Style Numbers on inner tags (e.g. J.Crew style #, Zara Art #), Date codes.\n    - Condition Checks: Pilling, stains, loose threads, sole wear, heel drag.\n    - Map "Maker" to Brand.\n    - Map "Style" to Specific Cut/Model (e.g. "Wunder Under", "Ludlow Suit", "Fit & Flare").\n\n    [IF AUTOMOTIVE/PARTS]\n    - Identify: Part Name, Compatible Make/Model/Year (e.g. "1967 Ford Mustang Bumper").\n    - Details: OEM vs Aftermarket, Part Number (CRITICAL), Material (Chrome, Steel).\n    - Markings: Manufacturer stamps, Part numbers, Date codes.\n    - Map "Maker" to Manufacturer (e.g. Ford, Bosch, Hella).\n    - Map "Style" to Vehicle Generation (e.g. "C2 Corvette", "E30 BMW").\n\n    [IF OTHER/MISC]\n    - Identify: Specific Object Name and Primary Function.\n    - Details: Material, Dimensions (visual estimate), Country of Origin.\n    - Markings: Any text, patents, or logos.\n\n    STEP 3: EVALUATE\n    Assess condition (mint, very good, fair) and estimate value based on the identified specifics.\n\n    Provide a JSON response with:\n    - category: Choose one strictly from: [Vinyl & Music, Furniture, Decor & Lighting, Art, Jewelry & Watches, Fashion, Ceramics & Glass, Collectibles, Books, Automotive, Electronics, Other].\n    - title: Rich, SEO-friendly title including key identifiers (Author/Artist/Style + Object).\n    - maker: The primary creator (Artist, Author, Brand, Jeweler).\n    - style: The artistic movement, genre, or design era (specific!).\n    - materials: Detailed materials, binding, or medium.\n    - markings: EXACT transcription of visible text, ISBNs (digit-by-digit), catalog numbers, signatures, or hallmarks. If partially visible, note what IS readable and what is unclear.\n    - era: Specific year or estimated decade.\n    - condition: Professional condition assessment.\n    - valuation_low: Conservative estimate (USD number).\n    - valuation_high: Optimistic estimate (USD number).\n    - reasoning: Explanation of value (rarity, demand, comparables).\n    - search_terms: Specific keywords to find EXACT comparables.\n    - search_terms_broad: A simplified query (2-4 words MAX).\n    - sales_blurb: A comprehensive sales description (3-4 sentences) tailored to the item type (e.g. mentioning binding for books, cut for gems).\n    - questions: Array of strings (max 3) for critical missing info.\n  ')},...r.map(e=>({inlineData:{mimeType:"image/jpeg",data:e.split(",")[1]}}))]}],generationConfig:{responseMimeType:"application/json"},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_ONLY_HIGH"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_ONLY_HIGH"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_ONLY_HIGH"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_ONLY_HIGH"}]};try{var l,c,u,d,h;console.log("API Key loaded:",Hm?"Yes (length: "+Hm.length+")":"NO - Missing!");const e=await fetch(qm,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!e.ok){const t=await e.text();throw console.error("Gemini API Error:",e.status,e.statusText,t),new Error("Gemini API Error: ".concat(e.status," - ").concat(t))}const t=null===(l=(await e.json()).candidates)||void 0===l||null===(c=l[0])||void 0===c||null===(u=c.content)||void 0===u||null===(d=u.parts)||void 0===d||null===(h=d[0])||void 0===h?void 0:h.text;if(!t)throw new Error("No analysis generated - possibly blocked by safety filters or empty response.");let n=t.replace(/```json/g,"").replace(/```/g,"").trim();const r=n.indexOf("{"),s=n.lastIndexOf("}");return-1!==r&&-1!==s&&(n=n.substring(r,s+1)),console.log("AI Raw Response:",n),JSON.parse(n)}catch(f){throw console.error("Analysis failed:",f),f}}const Km=e=>new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=e=>{const r=new Image;r.src=e.target.result,r.onload=()=>{const e=document.createElement("canvas");let n=r.width,s=r.height;const i=800;n>s?n>i&&(s*=i/n,n=i):s>i&&(n*=i/s,s=i),e.width=n,e.height=s;e.getContext("2d").drawImage(r,0,0,n,s),t(e.toDataURL("image/jpeg",.7))},r.onerror=e=>n(e)},r.onerror=e=>n(e)}),Gm=e=>{let{files:t,onConfirm:n,onCancel:s,onAddMoreFiles:i,isProcessingBatch:a=!1}=e;const[o,l]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(new Set),[v,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)(!1),[x,k]=(0,r.useState)(null),S=(0,r.useRef)(null),_=o.reduce((e,t)=>e+t.files.length,0);(0,r.useEffect)(()=>{y(!0);const e=t.map(e=>({id:Math.random().toString(36).substr(2,9),files:[e]}));setTimeout(()=>{l(e),y(!1)},300)},[t]);const E=e=>{const t=new Set(m);t.has(e)?t.delete(e):t.add(e),g(t)},N=e=>{let{stackIndex:t}=e;const n=o[t];if(!n)return null;const[s,i]=(0,r.useState)(null);return(0,Mm.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden flex flex-col max-h-[80vh]",children:[(0,Mm.jsxs)("div",{className:"p-4 border-b border-stone-100 flex justify-between items-center bg-stone-50",children:[(0,Mm.jsxs)("div",{children:[(0,Mm.jsxs)("h3",{className:"font-bold text-stone-800",children:["Refine Stack (",n.files.length," photos)"]}),(0,Mm.jsxs)("p",{className:"text-xs text-stone-500",children:[(0,Mm.jsx)("span",{className:"text-amber-600",children:"\u2b50 First = Hero Image."})," Drag to reorder."]})]}),(0,Mm.jsx)("button",{onClick:()=>h(null),className:"p-2 hover:bg-stone-200 rounded-full text-stone-500",children:(0,Mm.jsx)(tm,{size:20})})]}),(0,Mm.jsxs)("div",{className:"p-6 overflow-y-auto bg-stone-100 min-h-[200px]",children:[(0,Mm.jsx)("div",{className:"flex flex-wrap gap-4 justify-center",children:n.files.map((e,r)=>(0,Mm.jsxs)("div",{className:"relative group",children:[(0,Mm.jsx)("div",{draggable:!0,onDragStart:e=>{i(r),e.dataTransfer.effectAllowed="move"},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:e=>{e.preventDefault(),null!==s&&(((e,t,n)=>{if(t===n)return;const r=[...o],s=r[e],[i]=s.files.splice(t,1);s.files.splice(n,0,i),l(r)})(t,s,r),i(null))},className:"w-24 h-24 rounded-xl overflow-hidden border-2 cursor-grab active:cursor-grabbing transition-all ".concat(0===r?"border-amber-500 ring-2 ring-amber-200":"border-stone-200 hover:border-stone-400"),children:(0,Mm.jsx)("img",{src:URL.createObjectURL(e),className:"w-full h-full object-cover pointer-events-none",alt:"Photo ".concat(r+1)})}),n.files.length>1&&(0,Mm.jsx)("button",{onClick:()=>((e,t)=>{const n=[...o],r=n[e],[s]=r.files.splice(t,1);0===r.files.length&&(n.splice(e,1),h(null)),n.push({id:Math.random().toString(36).substr(2,9),files:[s]}),l(n)})(t,r),className:"absolute -top-2 -right-2 bg-stone-700 hover:bg-stone-900 text-white p-1.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all z-10",title:"Remove from stack (keeps photo)",children:(0,Mm.jsx)(nm,{size:12})}),0===r&&(0,Mm.jsx)("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 bg-amber-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full",children:"HERO"})]},r))}),(0,Mm.jsxs)("p",{className:"text-center text-xs text-stone-400 mt-4",children:["Click ",(0,Mm.jsx)(nm,{size:10,className:"inline mx-1"})," to remove a photo from this stack (returns to grid)"]})]}),(0,Mm.jsx)("div",{className:"p-4 border-t border-stone-100 flex justify-end",children:(0,Mm.jsx)("button",{onClick:()=>h(null),className:"bg-stone-900 text-white px-6 py-2 rounded-xl font-bold shadow-lg hover:bg-stone-800",children:"Done"})})]})})},[T,C]=(0,r.useState)(null),I=e=>{let{stack:t,index:n,isSelected:s,onSelect:i,onRemove:a,draggedIdx:d}=e;const p=t.files.length>1,[m,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),b=d===n,w=null!==d&&d!==n,x=T===n,k=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=URL.createObjectURL(t.files[0]);return g(e),()=>URL.revokeObjectURL(e)},[t.files]);return(0,Mm.jsxs)("div",{ref:k,draggable:!f,onDragStart:e=>{if(f)e.preventDefault();else{if(e.dataTransfer.setData("text/plain",n.toString()),e.dataTransfer.setData("application/json",JSON.stringify({index:n,stackId:t.id})),e.dataTransfer.effectAllowed="move",k.current){const t=k.current.getBoundingClientRect();e.dataTransfer.setDragImage(k.current,t.width/2,t.height/2)}setTimeout(()=>u(n),0)}},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",null!==d&&d!==n&&T!==n&&C(n)},onDragLeave:e=>{var t;e.preventDefault();const r=null===(t=k.current)||void 0===t?void 0:t.getBoundingClientRect();if(r){const{clientX:t,clientY:s}=e;(t<r.left||t>r.right||s<r.top||s>r.bottom)&&T===n&&C(null)}},onDrop:e=>{e.preventDefault(),e.stopPropagation();const t=parseInt(e.dataTransfer.getData("text/plain"),10);isNaN(t)||t===n||((e,t)=>{if(e.preventDefault(),null===c||c===t)return;const n=[...o],r=n[c],s=n[t];s.files=[...s.files,...r.files],n.splice(c,1),l(n),u(null)})(e,n),C(null)},onDragEnd:()=>{u(null),C(null)},onClick:()=>{f?i(t.id):p&&h(n)},className:"relative aspect-square group transition-all duration-200 select-none ".concat(f?"cursor-pointer":"cursor-grab active:cursor-grabbing"," ").concat(s?"scale-90":""," ").concat(b?"opacity-40 scale-95 grayscale":"opacity-100 hover:scale-[1.02]"),style:{touchAction:"none"},children:[x&&(0,Mm.jsx)("div",{className:"absolute -inset-4 rounded-2xl border-4 border-emerald-400 bg-emerald-50/80 z-0 transition-all duration-150"}),w&&!x&&(0,Mm.jsx)("div",{className:"absolute -inset-2 rounded-2xl border-2 border-dashed border-stone-300/60 z-0"}),p&&(0,Mm.jsx)("div",{className:"absolute inset-0 bg-stone-200 rounded-xl rotate-6 scale-95 border border-stone-300 shadow-sm z-[5] pointer-events-none"}),t.files.length>2&&(0,Mm.jsx)("div",{className:"absolute inset-0 bg-stone-300 rounded-xl -rotate-3 scale-95 border border-stone-400 shadow-sm pointer-events-none"}),(0,Mm.jsxs)("div",{className:"absolute inset-0 bg-white rounded-xl shadow-md border overflow-hidden z-10 transition-all duration-150 ".concat(s?"border-rose-500 ring-4 ring-rose-500/30":x?"border-emerald-400 ring-4 ring-emerald-400/40 scale-105":"border-stone-200"),children:[!v&&(0,Mm.jsx)("div",{className:"absolute inset-0 bg-stone-100 animate-pulse flex items-center justify-center",children:(0,Mm.jsx)(rm,{className:"w-5 h-5 text-stone-300 animate-spin"})}),m&&(0,Mm.jsx)("img",{src:m,className:"w-full h-full object-cover pointer-events-none transition-opacity duration-300 ".concat(v?"opacity-100":"opacity-0"),alt:"stack cover",onLoad:()=>y(!0),draggable:!1}),x&&(0,Mm.jsx)("div",{className:"absolute inset-0 bg-emerald-500/30 flex items-center justify-center backdrop-blur-[2px]",children:(0,Mm.jsxs)("div",{className:"bg-emerald-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-xl flex items-center gap-2",children:[(0,Mm.jsx)(sm,{size:16})," Merge Photos"]})}),f&&(0,Mm.jsx)("div",{className:"absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center border-2 transition-colors shadow-sm ".concat(s?"bg-rose-500 border-rose-500":"bg-white/90 border-stone-300"),children:s&&(0,Mm.jsx)(im,{size:14,className:"text-white",strokeWidth:3})}),!f&&!b&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),confirm("Delete this photo/stack permanently?")&&a(n)},className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-md hover:bg-red-600 z-20",title:"Delete permanently",children:(0,Mm.jsx)(am,{size:12,strokeWidth:3})}),(0,Mm.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/70 backdrop-blur-md text-white text-xs font-bold px-2 py-1 rounded-full pointer-events-none",children:[t.files.length," ",1===t.files.length?"photo":"photos"]}),p&&(0,Mm.jsxs)("div",{className:"absolute top-2 left-2 bg-amber-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md flex items-center gap-1 pointer-events-none shadow-sm",children:[(0,Mm.jsx)(om,{size:10})," ",t.files.length]})]})]})},A=e=>{const t=[...o];t.splice(e,1),l(t),0===t.length&&s()};return(0,Mm.jsxs)("div",{className:"fixed inset-0 z-50 bg-[#FDFBF7] flex flex-col",children:[(0,Mm.jsxs)("div",{className:"bg-white border-b border-stone-200 px-4 py-3 flex items-center justify-between shadow-sm z-10",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Mm.jsx)("button",{onClick:s,disabled:a,className:"p-2 text-stone-400 hover:text-stone-600 hover:bg-stone-100 rounded-full transition-colors",title:"Cancel",children:(0,Mm.jsx)(tm,{className:"w-5 h-5"})}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("h2",{className:"text-lg font-serif font-bold text-stone-900",children:"Organize Photos"}),(0,Mm.jsx)("p",{className:"text-xs text-stone-500",children:v?"Loading photos...":"Drag photos together to group them as single items."})]})]}),(0,Mm.jsx)("button",{onClick:()=>{w(!0),k(null),setTimeout(()=>{const e=o.flatMap(e=>e.files);if(0===e.length)return w(!1),k("\u26a0\ufe0f No photos to group"),void setTimeout(()=>k(null),3e3);const t=[...e].sort((e,t)=>e.lastModified-t.lastModified),n=[];let r=[];for(let i=0;i<t.length;i++){const e=t[i];if(0===r.length)r.push(e);else{const t=r[r.length-1];(e.lastModified-t.lastModified)/1e3<180?r.push(e):(n.push({id:Math.random().toString(36).substr(2,9),files:r}),r=[e])}}r.length>0&&n.push({id:Math.random().toString(36).substr(2,9),files:r});const s=n.filter(e=>e.files.length>1).length;l(n),w(!1),k(s>0?"\u2728 Grouped into ".concat(n.length," items! (").concat(s," stacks)"):"\ud83d\udcf7 No time-based groups found. Drag to group manually."),setTimeout(()=>k(null),3e3),p(!1),g(new Set)},500)},disabled:b||v,className:"text-xs font-bold px-3 py-2 rounded-lg transition-all flex items-center gap-2 ".concat(b?"bg-amber-100 text-amber-700 animate-pulse":"text-stone-600 hover:text-stone-900 bg-stone-100 hover:bg-stone-200"),children:b?(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(rm,{className:"w-3 h-3 animate-spin"})," Grouping..."]}):(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(lm,{className:"w-3 h-3"})," Auto-Group"]})})]}),x&&(0,Mm.jsx)("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-20 animate-in slide-in-from-top duration-300",children:(0,Mm.jsx)("div",{className:"bg-stone-900 text-white px-4 py-2 rounded-xl shadow-xl text-sm font-medium",children:x})}),(0,Mm.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:v?(0,Mm.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[(0,Mm.jsx)(rm,{className:"w-8 h-8 text-stone-400 animate-spin"}),(0,Mm.jsxs)("p",{className:"text-stone-500 text-sm",children:["Processing ",t.length," photos..."]})]}):(0,Mm.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-6 p-4",children:o.map((e,t)=>(0,Mm.jsx)(I,{index:t,stack:e,isSelected:m.has(e.id),onSelect:E,onRemove:A,draggedIdx:c},e.id))})}),null!==d&&(0,Mm.jsx)(N,{stackIndex:d}),a&&(0,Mm.jsxs)("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-4",children:[(0,Mm.jsxs)("div",{className:"relative",children:[(0,Mm.jsx)("div",{className:"w-16 h-16 border-4 border-stone-200 border-t-stone-900 rounded-full animate-spin"}),(0,Mm.jsx)(cm,{className:"w-6 h-6 text-amber-500 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),(0,Mm.jsxs)("div",{className:"text-center",children:[(0,Mm.jsxs)("p",{className:"text-lg font-bold text-stone-800",children:["Adding ",o.length," items..."]}),(0,Mm.jsx)("p",{className:"text-sm text-stone-500",children:"This may take a moment"})]})]}),(0,Mm.jsxs)("div",{className:"bg-white border-t border-stone-200 shadow-[0_-4px_20px_rgba(0,0,0,0.05)]",children:[(0,Mm.jsxs)("div",{className:"px-4 py-2 bg-stone-50 border-b border-stone-100 flex items-center justify-center gap-2 text-xs text-stone-500",children:[(0,Mm.jsxs)("span",{className:"font-medium",children:[_," photos"]}),(0,Mm.jsx)("span",{className:"text-stone-300",children:"\u2192"}),(0,Mm.jsxs)("span",{className:"font-bold text-stone-700",children:[o.length," ",1===o.length?"item":"items"]})]}),(0,Mm.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between gap-3",children:[(0,Mm.jsxs)("button",{onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},disabled:a,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold text-stone-600 bg-stone-100 hover:bg-stone-200 transition-all active:scale-95 disabled:opacity-50",children:[(0,Mm.jsx)(um,{className:"w-4 h-4"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Add More"}),(0,Mm.jsx)("span",{className:"sm:hidden",children:"+"})]}),(0,Mm.jsx)("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:S,onChange:e=>{const t=Array.from(e.target.files);if(0===t.length)return;const n=t.map(e=>({id:Math.random().toString(36).substr(2,9),files:[e]}));l(e=>[...e,...n]),k("\ud83d\udcf7 Added ".concat(t.length," more photos!")),setTimeout(()=>k(null),3e3),S.current&&(S.current.value="")}}),(0,Mm.jsx)("button",{onClick:()=>n(o),disabled:v||0===o.length||a,className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-6 py-2.5 rounded-xl text-sm font-bold text-white bg-stone-900 hover:bg-stone-800 shadow-lg transition-all active:scale-95 disabled:opacity-50",children:a?(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(rm,{className:"w-4 h-4 animate-spin"})," Adding..."]}):(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(im,{className:"w-4 h-4"})," Add ",o.length," ",1===o.length?"Item":"Items"]})})]})]})]})},Qm=e=>{let{status:t}=e;const n={keep:"bg-blue-100 text-blue-800 border-blue-200",sell:"bg-green-100 text-green-800 border-green-200",TBD:"bg-amber-100 text-amber-800 border-amber-200",draft:"bg-amber-100 text-amber-800 border-amber-200",unprocessed:"bg-amber-100 text-amber-800 border-amber-200"},r="unprocessed"===t||"draft"===t||"maybe"===t?"TBD":t;return(0,Mm.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium border ".concat(n[r]||n.TBD," uppercase tracking-wide"),children:r})},Ym=()=>(0,Mm.jsxs)("div",{className:"bg-white rounded-xl overflow-hidden border border-stone-100 shadow-sm flex flex-col h-full",children:[(0,Mm.jsx)("div",{className:"aspect-square bg-gradient-to-r from-stone-100 via-stone-200 to-stone-100 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite]"}),(0,Mm.jsxs)("div",{className:"p-3 flex-1 flex flex-col gap-2",children:[(0,Mm.jsx)("div",{className:"h-4 bg-gradient-to-r from-stone-100 via-stone-200 to-stone-100 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite] rounded w-3/4"}),(0,Mm.jsx)("div",{className:"h-3 bg-gradient-to-r from-stone-50 via-stone-150 to-stone-50 bg-[length:200%_100%] animate-[shimmer_1.5s_infinite] rounded w-1/2"}),(0,Mm.jsxs)("div",{className:"mt-auto pt-2 flex justify-between items-center border-t border-stone-50",children:[(0,Mm.jsx)("div",{className:"h-3 bg-stone-100 rounded w-1/3"}),(0,Mm.jsx)("div",{className:"h-3 bg-stone-100 rounded w-1/4"})]})]})]}),Xm=e=>{let{message:t="Processing...",subMessage:n=""}=e;const[s,i]=(0,r.useState)(0),a=["Consulting the AI oracle...","Teaching robots about antiques...","Summoning appraisal spirits...","Crunching vintage data...","Scanning for treasure...","Decoding maker's marks...","Channeling auction wisdom...","Almost there..."];return(0,r.useEffect)(()=>{const e=setInterval(()=>{i(e=>(e+1)%a.length)},2200);return()=>clearInterval(e)},[]),(0,Mm.jsxs)("div",{className:"fixed inset-0 z-[100] bg-white/95 backdrop-blur-md flex flex-col items-center justify-center animate-in fade-in duration-200",children:[(0,Mm.jsxs)("div",{className:"relative mb-6",children:[(0,Mm.jsx)("div",{className:"w-20 h-20 border-4 border-stone-200 border-t-rose-500 rounded-full animate-spin"}),(0,Mm.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,Mm.jsx)(cm,{className:"w-8 h-8 text-rose-400 animate-pulse"})})]}),(0,Mm.jsx)("p",{className:"text-lg font-bold text-stone-800",children:t}),(0,Mm.jsx)("p",{className:"text-sm text-stone-500 mt-2 transition-all duration-300",children:a[s]}),n&&(0,Mm.jsx)("p",{className:"text-xs text-stone-400 mt-1",children:n})]})},$m=e=>{let{files:t,onConfirm:n,onCancel:s}=e;const[i,a]=(0,r.useState)("single"),[o,l]=(0,r.useState)([]);return(0,r.useEffect)(()=>{const e=t.slice(0,4).map(e=>URL.createObjectURL(e));return l(e),()=>{e.forEach(e=>URL.revokeObjectURL(e))}},[t]),(0,Mm.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden scale-100",children:[(0,Mm.jsx)("div",{className:"p-6 border-b border-stone-100 bg-stone-50/50",children:(0,Mm.jsxs)("h3",{className:"text-lg font-serif font-bold text-stone-800",children:["Upload ",t.length," Photos"]})}),(0,Mm.jsx)("div",{className:"p-6 space-y-6",children:(0,Mm.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[o.map((e,t)=>(0,Mm.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-stone-100 border border-stone-200 shadow-sm",children:(0,Mm.jsx)("img",{src:e,className:"w-full h-full object-cover",alt:"preview"})},t)),t.length>4&&(0,Mm.jsxs)("div",{className:"aspect-square rounded-lg bg-stone-100 flex items-center justify-center text-xs font-bold text-stone-500 border border-stone-200 shadow-sm",children:["+",t.length-4]})]})}),(0,Mm.jsxs)("div",{className:"p-4 bg-stone-50 border-t border-stone-100 flex flex-col gap-3",children:[(0,Mm.jsxs)("button",{onClick:()=>n(i,"analyze_now"),className:"w-full bg-stone-900 hover:bg-stone-800 text-white px-6 py-3 rounded-xl text-sm font-bold shadow-lg shadow-stone-200 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,Mm.jsx)(cm,{className:"w-4 h-4 text-rose-300"})," Upload & Analyze"]}),(0,Mm.jsx)("button",{onClick:()=>n(i,"edit_first"),className:"w-full bg-white hover:bg-stone-50 text-stone-600 border border-stone-200 px-6 py-3 rounded-xl text-sm font-bold transition-all active:scale-95",children:"Add Details First"}),(0,Mm.jsx)("button",{onClick:s,className:"w-full text-stone-400 font-bold text-xs hover:text-stone-600 py-2",children:"Cancel"})]})]})})},Jm=e=>{let{item:t,onClick:n,isSelected:s,isSelectionMode:i,onToggleSelect:a,onAnalyze:o}=e;const l=t.images&&t.images.length>0?t.images:t.image?[t.image]:[],[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u(0)},[t.id]);const f=l.length>0?l[c]:null;return(0,Mm.jsxs)("div",{onClick:e=>{i?(e.stopPropagation(),a(t.id)):n(t)},className:"group bg-white rounded-xl shadow-sm transition-all duration-200 border overflow-hidden cursor-pointer flex flex-col h-full relative ".concat(s?"border-[3px] border-rose-500":"border-stone-100 hover:shadow-md border"),children:[i&&(0,Mm.jsx)("div",{className:"absolute top-2 left-2 z-20 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ".concat(s?"bg-rose-500 border-rose-500":"bg-white/50 border-white backdrop-blur-sm"),children:s&&(0,Mm.jsx)(im,{className:"w-4 h-4 text-white",strokeWidth:3})}),(0,Mm.jsxs)("div",{className:"relative aspect-square bg-stone-100 overflow-hidden",children:[f?(0,Mm.jsx)("img",{src:f,alt:t.title||"Item",className:"w-full h-full object-cover transition-transform duration-500"}):(0,Mm.jsx)("div",{className:"w-full h-full flex items-center justify-center text-stone-400",children:(0,Mm.jsx)(dm,{size:48})}),!i&&l.length>1&&(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),u(c>0?e=>e-1:l.length-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-1.5 rounded-full backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:(0,Mm.jsx)(hm,{size:16,strokeWidth:3})}),(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),c<l.length-1?u(e=>e+1):u(0)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-1.5 rounded-full backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity z-10",children:(0,Mm.jsx)(fm,{size:16,strokeWidth:3})}),(0,Mm.jsx)("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center gap-1.5 z-10 pointer-events-none",children:l.slice(0,5).map((e,t)=>(0,Mm.jsx)("div",{className:"w-1.5 h-1.5 rounded-full shadow-sm ".concat(t===c?"bg-white":"bg-white/40"," ").concat(4===t&&l.length>5?"opacity-50":"")},t))})]}),(0,Mm.jsx)("div",{className:"absolute top-2 right-2 flex flex-col gap-1 items-end",children:(0,Mm.jsx)(Qm,{status:t.status})}),t.valuation_high>0&&(0,Mm.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 pt-8 pointer-events-none",children:(0,Mm.jsxs)("p",{className:"text-white font-extrabold text-lg drop-shadow-md",children:["$",t.valuation_low," - $",t.valuation_high]})})]}),(0,Mm.jsxs)("div",{className:"p-3 flex-1 flex flex-col",children:[(0,Mm.jsx)("h3",{className:"font-semibold text-stone-800 line-clamp-1 mb-1",children:sg(t)}),(0,Mm.jsx)("p",{className:"text-xs text-stone-500 line-clamp-2 mb-2 flex-1",children:[t.maker&&"unknown"!==t.maker.toLowerCase()?t.maker:null,t.style&&"unknown"!==t.style.toLowerCase()?t.style:null,t.materials].filter(Boolean).join(" \u2022 ")||t.userNotes||"No details yet"}),(0,Mm.jsxs)("div",{className:"flex items-center justify-between text-xs text-stone-400 mt-auto pt-2 border-t border-stone-50",children:[(0,Mm.jsx)("span",{children:t.category||"Unsorted"}),t.aiLastRun?(0,Mm.jsxs)("span",{className:"flex items-center gap-1 text-emerald-600",title:"AI analyzed ".concat(new Date(t.aiLastRun).toLocaleString()),children:[(0,Mm.jsx)(cm,{className:"w-2.5 h-2.5"}),rg(t.aiLastRun)]}):t.era&&"unknown"!==t.era.toLowerCase()&&(0,Mm.jsx)("span",{children:t.era})]})]})]})},Zm=()=>{(0,r.useEffect)(()=>{(async function(e,t){return await On(e)._initializationPromise,ds(e,t,!1)})(Um).catch(e=>{console.error("Redirect result failed",e)})},[]);return(0,Mm.jsxs)("div",{className:"min-h-[100dvh] flex flex-col items-center justify-center bg-[#FDFBF7] p-6 relative overflow-hidden",children:[(0,Mm.jsx)("div",{className:"absolute top-[-10%] right-[-10%] w-96 h-96 bg-rose-100/30 rounded-full blur-3xl"}),(0,Mm.jsx)("div",{className:"absolute bottom-[-10%] left-[-10%] w-96 h-96 bg-stone-200/30 rounded-full blur-3xl"}),(0,Mm.jsxs)("div",{className:"relative z-10 w-full max-w-sm text-center",children:[(0,Mm.jsx)("div",{className:"w-20 h-20 bg-white rounded-2xl shadow-xl flex items-center justify-center mx-auto mb-8 rotate-3 transform hover:rotate-6 transition-all duration-500",children:(0,Mm.jsx)(cm,{className:"w-10 h-10 text-rose-600",strokeWidth:1.5})}),(0,Mm.jsx)("h1",{className:"text-4xl font-serif font-bold text-stone-900 mb-2 tracking-tight",children:"Stuffboard"}),(0,Mm.jsx)("p",{className:"text-stone-500 text-sm mb-6",children:"Your stuff \u2014 researched, organized & ready"}),(0,Mm.jsxs)("div",{className:"text-left bg-white/60 rounded-xl p-4 mb-8 space-y-3 text-sm border border-stone-100",children:[(0,Mm.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,Mm.jsx)("span",{className:"text-lg leading-none",children:"\ud83d\udcf7"}),(0,Mm.jsxs)("span",{className:"text-stone-600",children:[(0,Mm.jsx)("strong",{children:"Add pic(s)"})," + optional details on any item(s) & AI will get to work"]})]}),(0,Mm.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,Mm.jsx)("span",{className:"text-lg leading-none",children:"\ud83d\udcb0"}),(0,Mm.jsxs)("span",{className:"text-stone-600",children:[(0,Mm.jsx)("strong",{children:"See what it's worth"})," \u2014 price ranges + links to sold comparables"]})]}),(0,Mm.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,Mm.jsx)("span",{className:"text-lg leading-none",children:"\ud83d\uddc2\ufe0f"}),(0,Mm.jsxs)("span",{className:"text-stone-600",children:[(0,Mm.jsx)("strong",{children:"Build a visual vault"})," \u2014 catalog everything, with AI categorization, searchable & synced"]})]}),(0,Mm.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,Mm.jsx)("span",{className:"text-lg leading-none",children:"\u270d\ufe0f"}),(0,Mm.jsxs)("span",{className:"text-stone-600",children:[(0,Mm.jsx)("strong",{children:"Sell smarter"})," \u2014 auto-generated listings ready for eBay, Poshmark, etc."]})]}),(0,Mm.jsxs)("div",{className:"flex items-start gap-2.5",children:[(0,Mm.jsx)("span",{className:"text-lg leading-none",children:"\ud83d\udd17"}),(0,Mm.jsxs)("span",{className:"text-stone-600",children:[(0,Mm.jsx)("strong",{children:"Share with anyone"})," \u2014 buyers, appraisers, insurance, friends & family"]})]})]}),(0,Mm.jsxs)("button",{onClick:async()=>{try{const e=new ur;await async function(e,t,n){if(Ze(e.app))return Promise.reject(Et(e,"operation-not-supported-in-this-environment"));const r=On(e);Ct(e,t,or);const s=Xr(r,n);return new rs(r,"signInViaPopup",t,s).executeNotNull()}(Um,e)}catch(e){if(console.log("Popup failed/closed, falling back to redirect...",e),"auth/popup-blocked"===e.code||"auth/popup-closed-by-user"===e.code||"auth/cancelled-popup-request"===e.code)try{const e=new ur;await us(Um,e)}catch(t){console.error("Redirect login failed",t),alert("Login failed. Check console for details.")}else console.error("Login error:",e),alert("Login failed: ".concat(e.message||"Unknown error"))}},className:"w-full bg-stone-900 hover:bg-stone-800 text-white font-medium py-4 px-6 rounded-xl transition-all flex items-center justify-center gap-3 shadow-lg shadow-stone-200 active:scale-[0.98]",children:[(0,Mm.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"G"}),"Sign in with Google"]}),(0,Mm.jsxs)("div",{className:"mt-8 flex items-center justify-center gap-2 text-xs text-stone-400 uppercase tracking-widest",children:[(0,Mm.jsx)("div",{className:"w-8 h-px bg-stone-200"}),(0,Mm.jsx)("span",{children:"Secure Access"}),(0,Mm.jsx)("div",{className:"w-8 h-px bg-stone-200"})]})]})]})},eg=e=>{var t,n,r;let{formData:s,setFormData:i}=e;const a=e=>{navigator.clipboard.writeText(e),ng();const t=document.createElement("div");t.className="fixed bottom-20 left-1/2 -translate-x-1/2 bg-stone-900 text-white px-4 py-2 rounded-xl shadow-xl text-sm font-medium z-[100] animate-in fade-in slide-in-from-bottom-4",t.textContent="\u2713 Copied to clipboard",document.body.appendChild(t),setTimeout(()=>t.remove(),2e3)},o=null!==(t=s.listing_title)&&void 0!==t?t:(()=>{const e=[];if(s.maker&&"unknown"!==s.maker.toLowerCase()&&e.push(s.maker),s.style&&"unknown"!==s.style.toLowerCase()&&e.push(s.style),s.title){const t=s.title.replace(/^Unknown\s*/i,"").trim();t&&e.push(t)}s.era&&"unknown"!==s.era.toLowerCase()&&e.push(s.era),s.materials&&e.push(s.materials);return[...new Set(e.join(" ").split(" "))].join(" ").substring(0,80)||"Vintage Item"})(),l=null!==(n=s.listing_description)&&void 0!==n?n:(()=>{const e=s.sales_blurb||"",t=e=>{if(!e)return!1;const t=e.toLowerCase().trim();return"unknown"!==t&&"vintage"!==t&&"see photos"!==t&&"contemporary"!==t&&"modern"!==t&&"n/a"!==t&&t.length>0},n=[];t(s.maker)&&n.push("\u2022 Maker/Brand: ".concat(s.maker)),t(s.style)&&n.push("\u2022 Style/Period: ".concat(s.style)),t(s.era)&&n.push("\u2022 Era: ".concat(s.era)),t(s.materials)&&n.push("\u2022 Material: ".concat(s.materials)),s.markings&&n.push("\u2022 Markings: ".concat(s.markings));const r=t(s.condition)?s.condition:"";let i=e;return n.length>0&&(i+="\n\n\ud83c\udff7\ufe0f DETAILS:\n".concat(n.join("\n"))),r&&(i+="\n\n\ud83d\udc8e CONDITION:\n".concat(r)),s.userNotes&&(i+="\n\n\ud83d\udccf NOTES:\n".concat(s.userNotes)),i+="\n\n\ud83d\udcac Message me for measurements, shipping quotes, or more photos!",i.trim()})(),c=null!==(r=s.listing_tags)&&void 0!==r?r:(()=>{const e=[s.category,s.style,s.era,"vintage","retro","preloved",s.maker].filter(e=>e&&"unknown"!==e.toLowerCase());return s.search_terms_broad&&e.push(...s.search_terms_broad.split(" ").filter(e=>"unknown"!==e.toLowerCase())),[...new Set(e)].map(e=>"#".concat(e.replace(/\s+/g,""))).join(" ")})(),d=s.id?s.id.substring(0,8).toUpperCase():"N/A",h=e=>{"title"===e&&i(e=>u(u({},e),{},{listing_title:null})),"description"===e&&i(e=>u(u({},e),{},{listing_description:null})),"tags"===e&&i(e=>u(u({},e),{},{listing_tags:null}))};return(0,Mm.jsxs)("div",{className:"space-y-4 p-1 pb-6",children:[(0,Mm.jsxs)("div",{className:"space-y-2",children:[(0,Mm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mm.jsxs)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider",children:["Optimized Title (",o.length,"/80)"]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[s.listing_title&&(0,Mm.jsxs)("button",{onClick:()=>h("title"),className:"text-stone-400 text-xs hover:text-stone-600 flex items-center gap-1",children:[(0,Mm.jsx)(pm,{className:"w-3 h-3"})," Reset"]}),(0,Mm.jsxs)("button",{onClick:()=>a(o),className:"text-rose-600 text-xs font-bold hover:underline flex items-center gap-1",children:[(0,Mm.jsx)(mm,{className:"w-3 h-3"})," Copy"]})]})]}),(0,Mm.jsx)("input",{type:"text",value:o,onChange:e=>{return t=e.target.value,void i(e=>u(u({},e),{},{listing_title:t}));var t},maxLength:80,className:"w-full p-3 bg-white border border-stone-200 rounded-xl text-sm font-medium text-stone-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-rose-500 focus:border-transparent",placeholder:"Enter listing title..."})]}),(0,Mm.jsxs)("div",{className:"space-y-2",children:[(0,Mm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mm.jsx)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider",children:"Professional Description"}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[s.listing_description&&(0,Mm.jsxs)("button",{onClick:()=>h("description"),className:"text-stone-400 text-xs hover:text-stone-600 flex items-center gap-1",children:[(0,Mm.jsx)(pm,{className:"w-3 h-3"})," Reset"]}),(0,Mm.jsxs)("button",{onClick:()=>a(l),className:"text-rose-600 text-xs font-bold hover:underline flex items-center gap-1",children:[(0,Mm.jsx)(mm,{className:"w-3 h-3"})," Copy"]})]})]}),(0,Mm.jsx)("textarea",{value:l,onChange:e=>{return t=e.target.value,void i(e=>u(u({},e),{},{listing_description:t}));var t},className:"w-full p-3 bg-white border border-stone-200 rounded-xl text-sm font-mono text-stone-600 h-40 md:h-48 focus:outline-none focus:ring-2 focus:ring-rose-500 resize-y shadow-sm",placeholder:"Enter listing description..."})]}),(0,Mm.jsxs)("div",{className:"space-y-2",children:[(0,Mm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mm.jsxs)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider flex items-center gap-1.5",children:[(0,Mm.jsx)("span",{className:"text-blue-500",children:"#"})," SEO Tags"]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[s.listing_tags&&(0,Mm.jsxs)("button",{onClick:()=>h("tags"),className:"text-stone-400 text-xs hover:text-stone-600 flex items-center gap-1",children:[(0,Mm.jsx)(pm,{className:"w-3 h-3"})," Reset"]}),(0,Mm.jsxs)("button",{onClick:()=>a(c),className:"text-rose-600 text-xs font-bold hover:underline flex items-center gap-1",children:[(0,Mm.jsx)(mm,{className:"w-3 h-3"})," Copy"]})]})]}),(0,Mm.jsx)("textarea",{value:c,onChange:e=>{return t=e.target.value,void i(e=>u(u({},e),{},{listing_tags:t}));var t},rows:2,className:"w-full p-3 bg-blue-50 border border-blue-200 rounded-xl text-sm font-medium text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y shadow-sm",placeholder:"#vintage #retro #collectible..."}),(0,Mm.jsx)("p",{className:"text-[10px] text-stone-400",children:"Add custom hashtags like #penny #pennies for better search visibility"})]}),(0,Mm.jsxs)("div",{className:"space-y-2",children:[(0,Mm.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Mm.jsx)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider",children:"SKU"}),(0,Mm.jsxs)("button",{onClick:()=>a(d),className:"text-rose-600 text-xs font-bold hover:underline flex items-center gap-1",children:[(0,Mm.jsx)(mm,{className:"w-3 h-3"})," Copy"]})]}),(0,Mm.jsx)("div",{className:"p-2 bg-stone-100 border border-stone-200 rounded-lg text-sm font-mono text-stone-700 inline-block",children:d})]}),(0,Mm.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 p-4 rounded-xl",children:[(0,Mm.jsxs)("h4",{className:"text-blue-800 font-bold text-sm mb-1 flex items-center gap-2",children:[(0,Mm.jsx)("span",{children:"\u270f\ufe0f"})," Fully Editable"]}),(0,Mm.jsx)("p",{className:"text-blue-700/80 text-xs leading-relaxed",children:'Edit any field above to customize for your listing. Your changes are saved automatically. Use "Reset" to restore AI-generated content.'})]}),(0,Mm.jsxs)("button",{onClick:()=>a("".concat(o,"\n\n").concat(l,"\n\n").concat(c,"\n\nSKU: ").concat(d)),className:"w-full py-3 bg-stone-900 hover:bg-stone-800 text-white text-sm font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 active:scale-[0.98]",children:[(0,Mm.jsx)(mm,{className:"w-4 h-4"})," Copy Everything"]})]})},tg=e=>{var t;let{item:n,onClose:s,onSave:i,onDelete:a,onNext:o,onPrev:l,hasNext:c,hasPrev:d}=e;const[h,f]=(0,r.useState)(u(u({},n),{},{images:n.images||(n.image?[n.image]:[]),clarifications:n.clarifications||{},provenance:n.provenance||{user_story:n.userNotes||"",date_claim:"",is_locked:!0},valuation_context:n.valuation_context||null})),[p,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(0),[y,b]=(0,r.useState)(!0),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),[N,T]=(0,r.useState)(null),C=(0,r.useRef)(null),I=(0,r.useRef)(null),A=e=>{_||w&&!window.confirm("You have unsaved changes. Continue without saving?")||(T(e),E(!0),setTimeout(()=>{"next"===e?null===o||void 0===o||o():null===l||void 0===l||l(),setTimeout(()=>{E(!1),T(null)},150)},200))};(0,r.useEffect)(()=>{f(u(u({},n),{},{images:n.images||(n.image?[n.image]:[]),clarifications:n.clarifications||{},provenance:n.provenance||{user_story:n.userNotes||"",date_claim:"",is_locked:!0},valuation_context:n.valuation_context||null})),v(0),x(!1),b(!0)},[n.id]);const P=(0,r.useMemo)(()=>((e,t,n)=>{if(!t)return[];const r=encodeURIComponent(t),s=t.split(" ").slice(0,3).join(" "),i=encodeURIComponent(n||s),a=(e||"").toLowerCase(),o=[{name:"eBay Sold",domain:"ebay.com",url:"https://www.ebay.com/sch/i.html?_nkw=".concat(r,"&_sacat=0&LH_Sold=1&LH_Complete=1"),color:"text-blue-700 bg-blue-50 border-blue-200"},{name:"Google Images",domain:"google.com",url:"https://www.google.com/search?q=".concat(r,"&tbm=isch"),color:"text-stone-700 bg-stone-50 border-stone-200"}],l=a.includes("jewelry")||a.includes("brooch")||a.includes("ring")||a.includes("necklace")||a.includes("bracelet")||a.includes("watch"),c=a.includes("furniture")||a.includes("lighting")||a.includes("decor")||a.includes("rug")||a.includes("ceramic")||a.includes("glass")||a.includes("pottery"),u=a.includes("art")||a.includes("painting")||a.includes("print")||a.includes("sculpture"),d=a.includes("clothing")||a.includes("fashion")||a.includes("bag")||a.includes("shoe")||a.includes("accessory"),h=a.includes("record")||a.includes("vinyl")||a.includes("lp")||a.includes("music")||a.includes("instrument"),f=a.includes("car")||a.includes("auto")||a.includes("vehicle")||a.includes("motor"),p=a.includes("book")||a.includes("ephemera"),m=a.includes("collectible")||a.includes("toy")||a.includes("card")||a.includes("comic");return l?(o.push({name:"Ruby Lane",url:"https://www.rubylane.com/search?q=".concat(i),color:"text-rose-700 bg-rose-50 border-rose-200"}),o.push({name:"The RealReal",url:"https://www.therealreal.com/products?keywords=".concat(i),color:"text-emerald-700 bg-emerald-50 border-emerald-200"}),o.push({name:"1stDibs",url:"https://www.1stdibs.com/search/?q=".concat(i),color:"text-amber-700 bg-amber-50 border-amber-200"})):c?(o.push({name:"Chairish",url:"https://www.chairish.com/search?q=".concat(i),color:"text-pink-700 bg-pink-50 border-pink-200"}),o.push({name:"1stDibs",url:"https://www.1stdibs.com/search/?q=".concat(i),color:"text-amber-700 bg-amber-50 border-amber-200"}),o.push({name:"Pamono",url:"https://www.pamono.com/catalogsearch/result/?q=".concat(i),color:"text-stone-800 bg-stone-100 border-stone-300"})):u?(o.push({name:"1stDibs",url:"https://www.1stdibs.com/search/?q=".concat(i),color:"text-amber-700 bg-amber-50 border-amber-200"}),o.push({name:"LiveAuctioneers",url:"https://www.liveauctioneers.com/search/?keyword=".concat(i,"&sort=relevance&status=archive"),color:"text-stone-800 bg-stone-100 border-stone-300"}),o.push({name:"Artsy",url:"https://www.artsy.net/search?term=".concat(i),color:"text-purple-700 bg-purple-50 border-purple-200"})):d?(o.push({name:"Poshmark",url:"https://poshmark.com/search?query=".concat(r),color:"text-red-700 bg-red-50 border-red-200"}),o.push({name:"Depop",url:"https://www.depop.com/search/?q=".concat(i),color:"text-red-600 bg-white border-red-600"}),o.push({name:"The RealReal",url:"https://www.therealreal.com/products?keywords=".concat(i),color:"text-emerald-700 bg-emerald-50 border-emerald-200"}),o.push({name:"Grailed",url:"https://www.grailed.com/shop?keyword=".concat(i),color:"text-stone-800 bg-stone-100 border-stone-300"}),o.push({name:"Vestiaire",url:"https://us.vestiairecollective.com/search/?q=".concat(i),color:"text-orange-700 bg-orange-50 border-orange-200"})):h?(o.push({name:"Discogs",url:"https://www.discogs.com/search/?q=".concat(r,"&type=all"),color:"text-stone-800 bg-yellow-50 border-yellow-200"}),o.push({name:"Reverb",url:"https://reverb.com/marketplace?query=".concat(i),color:"text-orange-600 bg-orange-50 border-orange-200"})):f?(o.push({name:"Bring a Trailer",url:"https://bringatrailer.com/search/?s=".concat(i),color:"text-stone-800 bg-stone-200 border-stone-400"}),o.push({name:"Hemmings",url:"https://www.hemmings.com/classifieds?q=".concat(i),color:"text-blue-800 bg-blue-100 border-blue-300"}),o.push({name:"ClassicCars",url:"https://classiccars.com/listings/find?q=".concat(i),color:"text-red-800 bg-red-100 border-red-300"})):p?o.push({name:"AbeBooks",url:"https://www.abebooks.com/servlet/SearchResults?sts=t&kn=".concat(i),color:"text-red-700 bg-red-50 border-red-200"}):(m||o.push({name:"Etsy",url:"https://www.etsy.com/search?q=".concat(r),color:"text-orange-700 bg-orange-50 border-orange-200"}),o.push({name:"Mercari",url:"https://www.mercari.com/search/?keyword=".concat(i),color:"text-purple-700 bg-purple-50 border-purple-200"})),o})(h.category,h.search_terms,h.search_terms_broad),[h.category,h.search_terms,h.search_terms_broad]),[j,R]=(0,r.useState)(!1),[D,O]=(0,r.useState)(null),[L,M]=(0,r.useState)("details");(0,r.useEffect)(()=>{const e=JSON.stringify(h)!==JSON.stringify(u(u({},n),{},{images:n.images||(n.image?[n.image]:[]),clarifications:n.clarifications||{},provenance:n.provenance||{user_story:n.userNotes||"",date_claim:"",is_locked:!0},valuation_context:n.valuation_context||null}));x(e)},[h,n]),(0,r.useEffect)(()=>{const e=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(_||("ArrowRight"===e.key&&c?A("next"):"ArrowLeft"===e.key&&d&&A("prev")))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c,d,_,w]);const F=()=>{i(u(u({},h),{},{image:h.images.length>0?h.images[0]:null})),ng(),s()},z=e=>{e.target.style.opacity="1",O(null)},U=async()=>{if(0!==h.images.length){m(!0);try{const e=await Wm(h.images,h.userNotes||"",h);f(t=>u(u(u({},t),e),{},{aiLastRun:(new Date).toISOString()}))}catch(e){alert("Analysis failed. Please check your Gemini API Key in the code.")}finally{m(!1)}}};return(0,Mm.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:e=>{I.current&&!I.current.contains(e.target)&&(w?S(!0):s())},children:[(0,Mm.jsx)("div",{className:"fixed inset-0 bg-black z-[100] pointer-events-none transition-opacity duration-200 flex items-center justify-center ".concat(_?"opacity-100":"opacity-0"),children:N&&(0,Mm.jsx)("div",{className:"text-white/50 text-sm font-medium flex items-center gap-2 animate-pulse",children:"next"===N?(0,Mm.jsxs)(Mm.Fragment,{children:["Next item ",(0,Mm.jsx)(fm,{size:16})]}):(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(hm,{size:16})," Previous item"]})})}),d&&!_&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),A("prev")},className:"hidden sm:flex fixed left-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full backdrop-blur-sm z-[60] transition-all",children:(0,Mm.jsx)(hm,{size:24})}),c&&!_&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),A("next")},className:"hidden sm:flex fixed right-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full backdrop-blur-sm z-[60] transition-all",children:(0,Mm.jsx)(fm,{size:24})}),k&&(0,Mm.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/50 animate-in fade-in duration-150",onClick:e=>e.stopPropagation(),children:(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-2xl max-w-sm w-full mx-4 animate-in zoom-in-95 duration-200",children:[(0,Mm.jsx)("h3",{className:"text-lg font-bold text-stone-900 mb-2",children:"Save Changes?"}),(0,Mm.jsx)("p",{className:"text-sm text-stone-600 mb-6",children:"You have unsaved changes. Would you like to save before closing?"}),(0,Mm.jsxs)("div",{className:"flex gap-2",children:[(0,Mm.jsx)("button",{onClick:()=>{S(!1),s()},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-stone-600 bg-stone-100 hover:bg-stone-200 rounded-xl transition-colors",children:"Discard"}),(0,Mm.jsx)("button",{onClick:()=>{S(!1),F()},className:"flex-1 px-4 py-2.5 text-sm font-bold text-white bg-stone-900 hover:bg-stone-800 rounded-xl transition-colors",children:"Save"})]})]})}),j&&(0,Mm.jsxs)("div",{className:"fixed inset-0 z-[70] bg-black flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:e=>{e.stopPropagation(),R(!1)},children:[(0,Mm.jsx)("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 text-white/70 hover:text-white p-2 z-50",children:(0,Mm.jsx)(tm,{size:32})}),(0,Mm.jsx)("img",{src:h.images[g],className:"max-w-full max-h-full object-contain pointer-events-none select-none",alt:"Full view"})]}),(0,Mm.jsxs)("div",{ref:I,className:"bg-white sm:rounded-2xl w-full max-w-2xl h-[100dvh] sm:h-auto sm:max-h-[90vh] overflow-hidden shadow-2xl flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Mm.jsxs)("div",{className:"px-3 py-2.5 border-b border-stone-200 bg-white flex items-center gap-2 shrink-0",children:[(0,Mm.jsxs)("div",{className:"flex-1 flex gap-1",children:[(0,Mm.jsxs)("button",{onClick:()=>f(e=>u(u({},e),{},{status:"keep"})),className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("keep"===h.status?"bg-blue-100 text-blue-700 border-2 border-blue-400 shadow-sm":"bg-stone-50 text-stone-500 border-2 border-transparent hover:bg-stone-100"),children:[(0,Mm.jsx)(gm,{size:14}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Keep"})]}),(0,Mm.jsxs)("button",{onClick:()=>f(e=>u(u({},e),{},{status:"sell"})),className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("sell"===h.status?"bg-emerald-100 text-emerald-700 border-2 border-emerald-400 shadow-sm":"bg-stone-50 text-stone-500 border-2 border-transparent hover:bg-stone-100"),children:[(0,Mm.jsx)(vm,{size:14}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Sell"})]}),(0,Mm.jsxs)("button",{onClick:()=>f(e=>u(u({},e),{},{status:"TBD"})),className:"flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-bold transition-all ".concat("TBD"!==h.status&&h.status?"bg-stone-50 text-stone-500 border-2 border-transparent hover:bg-stone-100":"bg-amber-100 text-amber-700 border-2 border-amber-400 shadow-sm"),children:[(0,Mm.jsx)(ym,{size:14}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"TBD"})]})]}),(0,Mm.jsxs)("button",{onClick:U,disabled:p||0===h.images.length,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold transition-all shrink-0 ".concat(p?"bg-stone-100 text-stone-400 cursor-wait":"bg-rose-500 text-white hover:bg-rose-600 shadow-sm hover:shadow active:scale-95"),children:[p?(0,Mm.jsx)(rm,{className:"w-3.5 h-3.5 animate-spin"}):(0,Mm.jsx)(lm,{className:"w-3.5 h-3.5"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:p?"Analyzing...":h.aiLastRun?"Re-Run":"Analyze"})]}),(0,Mm.jsx)("button",{onClick:()=>w?S(!0):s(),className:"p-2 text-stone-400 hover:text-stone-600 hover:bg-stone-100 rounded-full shrink-0 transition-colors",children:(0,Mm.jsx)(tm,{className:"w-5 h-5"})})]}),(0,Mm.jsxs)("div",{className:"px-3 py-3 bg-stone-100 border-b border-stone-200 flex gap-3 overflow-x-auto no-scrollbar shrink-0",children:[h.images.length>0?(0,Mm.jsx)(Mm.Fragment,{children:h.images.map((e,t)=>(0,Mm.jsxs)("div",{draggable:!0,onDragStart:e=>((e,t)=>{O(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t),e.target.style.opacity="0.5"})(e,t),onDragOver:e=>(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"})(e),onDrop:e=>((e,t)=>{e.preventDefault();const n=parseInt(e.dataTransfer.getData("text/plain"),10);if(isNaN(n)||n===t)return;const r=[...h.images],[s]=r.splice(n,1);r.splice(t,0,s),f(e=>u(u({},e),{},{images:r})),g===n?v(t):t<=g&&n>g?v(g+1):t>=g&&n<g&&v(g-1),O(null)})(e,t),onDragEnd:z,onClick:()=>{v(t),R(!0)},className:"relative flex-shrink-0 w-24 h-24 rounded-xl overflow-hidden cursor-pointer border-2 transition-all shadow-sm hover:shadow-md ".concat(g===t?"border-rose-500 ring-2 ring-rose-200":"border-white hover:border-stone-300"),children:[(0,Mm.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover",draggable:!1}),0===t&&(0,Mm.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-[9px] font-bold text-center py-0.5",children:"HERO"}),h.images.length>1&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation();const n=h.images.filter((e,n)=>n!==t);f(e=>u(u({},e),{},{images:n})),g>=n.length&&v(0)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 hover:opacity-100 transition-opacity shadow-md",children:(0,Mm.jsx)(tm,{size:10})})]},e))}):(0,Mm.jsxs)("div",{className:"flex items-center gap-2 text-stone-400 text-xs py-2",children:[(0,Mm.jsx)(dm,{size:16})," No photos yet"]}),(0,Mm.jsxs)("button",{onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},className:"flex-shrink-0 w-24 h-24 rounded-xl border-2 border-dashed border-stone-300 bg-white hover:bg-stone-50 flex flex-col items-center justify-center text-stone-400 hover:text-stone-600 transition-colors shadow-sm",children:[(0,Mm.jsx)(sm,{size:20}),(0,Mm.jsx)("span",{className:"text-[10px] font-bold mt-1",children:"ADD"})]}),(0,Mm.jsx)("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:C,onChange:async e=>{const t=Array.from(e.target.files);if(0===t.length)return;const n=[];for(const r of t)n.push(await Km(r));f(e=>u(u({},e),{},{images:[...e.images,...n]}))}}),h.images.length>0&&(0,Mm.jsx)("div",{className:"flex-shrink-0 flex items-center text-[10px] text-stone-400 pl-2 border-l border-stone-200 ml-1",children:(0,Mm.jsx)("span",{children:"\ud83d\udcf7 AI uses first 4"})})]}),(0,Mm.jsxs)("div",{className:"px-3 py-2.5 bg-gradient-to-r from-emerald-50 to-emerald-100/50 border-b border-emerald-100 flex items-center justify-between shrink-0",children:[(0,Mm.jsx)("span",{className:"text-xs font-bold text-emerald-700 uppercase tracking-wider",children:"Estimated Value"}),(0,Mm.jsxs)("div",{className:"flex items-center gap-1.5 bg-white px-3 py-1.5 rounded-lg border border-emerald-200 shadow-sm",children:[(0,Mm.jsx)("span",{className:"text-emerald-600 text-sm font-bold",children:"$"}),(0,Mm.jsx)("input",{type:"number",placeholder:"Min",value:h.valuation_low||"",onChange:e=>f(t=>u(u({},t),{},{valuation_low:e.target.value})),className:"w-16 bg-transparent text-center font-bold text-emerald-800 focus:outline-none text-sm"}),(0,Mm.jsx)("span",{className:"text-emerald-300 font-bold",children:"\u2014"}),(0,Mm.jsx)("input",{type:"number",placeholder:"Max",value:h.valuation_high||"",onChange:e=>f(t=>u(u({},t),{},{valuation_high:e.target.value})),className:"w-16 bg-transparent text-center font-bold text-emerald-800 focus:outline-none text-sm"})]})]}),(0,Mm.jsx)("div",{className:"px-3 py-2 bg-white border-b border-stone-100 shrink-0",children:(0,Mm.jsxs)("div",{className:"flex p-1 bg-stone-100 rounded-xl",children:[(0,Mm.jsx)("button",{onClick:()=>M("details"),className:"flex-1 py-1.5 text-xs font-bold rounded-lg transition-all ".concat("details"===L?"bg-white text-stone-800 shadow-sm":"text-stone-500 hover:text-stone-700"),children:"Analysis & Details"}),(0,Mm.jsxs)("button",{onClick:()=>M("listing"),className:"flex-1 py-1.5 text-xs font-bold rounded-lg transition-all flex items-center justify-center gap-1 ".concat("listing"===L?"bg-white text-rose-600 shadow-sm":"text-stone-500 hover:text-stone-700"),children:[(0,Mm.jsx)(cm,{className:"w-3 h-3"})," Listing Helper"]})]})}),(0,Mm.jsx)("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 space-y-3 bg-stone-50",children:"listing"===L?(0,Mm.jsx)(eg,{formData:h,setFormData:f}):(0,Mm.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Mm.jsxs)("div",{children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider",children:"Title"}),(0,Mm.jsxs)("div",{className:"group relative flex items-center",children:[(0,Mm.jsx)(bm,{className:"w-3.5 h-3.5 text-stone-400 cursor-help"}),(0,Mm.jsx)("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block w-max max-w-[200px] px-2 py-1 bg-stone-800 text-white text-[10px] rounded shadow-lg z-50 pointer-events-none",children:"AI makes mistakes, please check"})]})]}),(0,Mm.jsx)("textarea",{name:"title",rows:2,value:h.title||"",onChange:e=>f(t=>u(u({},t),{},{title:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 font-medium resize-none text-sm shadow-sm"})]}),h.questions&&h.questions.length>0&&(0,Mm.jsxs)("div",{className:"bg-rose-50 border border-rose-100 rounded-xl overflow-hidden shadow-sm",children:[(0,Mm.jsxs)("div",{className:"bg-rose-100/50 px-3 py-2.5 flex items-center justify-between cursor-pointer hover:bg-rose-100 transition-colors",onClick:()=>b(!y),children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Mm.jsx)(ym,{className:"w-4 h-4 text-rose-600"}),(0,Mm.jsx)("span",{className:"text-sm font-bold text-rose-900",children:"Improve Valuation"})]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Mm.jsxs)("span",{className:"text-[10px] uppercase font-bold text-rose-600 bg-white/50 px-2 py-0.5 rounded-full",children:[h.questions.length," Questions"]}),(0,Mm.jsx)(fm,{className:"w-4 h-4 text-rose-400 transition-transform ".concat(y?"rotate-90":"")})]})]}),y&&(0,Mm.jsxs)("div",{className:"p-3 space-y-3",children:[(0,Mm.jsx)("p",{className:"text-[11px] text-rose-800/70 italic",children:"Help the AI give you a more accurate price."}),h.questions.map((e,t)=>{var n;return(0,Mm.jsxs)("div",{className:"space-y-1",children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-rose-800",children:e}),(0,Mm.jsx)("input",{type:"text",inputMode:"text",enterKeyHint:"next",placeholder:"Your answer...",value:(null===(n=h.clarifications)||void 0===n?void 0:n[e])||"",onChange:t=>f(n=>u(u({},n),{},{clarifications:u(u({},n.clarifications),{},{[e]:t.target.value})})),className:"w-full p-2.5 text-sm bg-white border border-rose-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-500"})]},t)}),(0,Mm.jsxs)("button",{onClick:U,className:"w-full mt-2 bg-rose-600 hover:bg-rose-700 text-white text-xs font-bold py-2.5 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors shadow-sm active:scale-95",children:[(0,Mm.jsx)(pm,{className:"w-3.5 h-3.5"})," Re-Appraise with Answers"]})]})]}),P.length>0&&(0,Mm.jsxs)("div",{className:"space-y-2",children:[(0,Mm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mm.jsxs)("h4",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider flex items-center gap-1.5",children:[(0,Mm.jsx)(wm,{className:"w-3 h-3"})," Market Comps"]}),(0,Mm.jsx)("span",{className:"text-[10px] text-stone-400 truncate max-w-[120px]",children:h.search_terms})]}),(0,Mm.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-1.5",children:P.map((e,t)=>(0,Mm.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",referrerPolicy:"no-referrer",className:"flex items-center justify-between px-2.5 py-2 rounded-lg border transition-all hover:shadow-sm text-xs ".concat(e.color),children:[(0,Mm.jsx)("span",{className:"font-semibold",children:e.name}),(0,Mm.jsx)(wm,{className:"w-3 h-3 opacity-50"})]},t))})]}),(0,Mm.jsxs)("div",{className:"space-y-4",children:[(0,Mm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Maker / Brand"}),(0,Mm.jsx)("input",{type:"text",value:h.maker||"",onChange:e=>f(t=>u(u({},t),{},{maker:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 font-medium text-sm"})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Style / Period"}),(0,Mm.jsx)("input",{type:"text",value:h.style||"",onChange:e=>f(t=>u(u({},t),{},{style:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 font-medium text-sm"})]})]}),(0,Mm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Category"}),(0,Mm.jsx)("input",{type:"text",list:"category-options",value:h.category||"",onChange:e=>f(t=>u(u({},t),{},{category:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 text-sm"}),(0,Mm.jsxs)("datalist",{id:"category-options",children:[(0,Mm.jsx)("option",{value:"Vinyl & Music"}),(0,Mm.jsx)("option",{value:"Furniture"}),(0,Mm.jsx)("option",{value:"Decor & Lighting"}),(0,Mm.jsx)("option",{value:"Art"}),(0,Mm.jsx)("option",{value:"Jewelry & Watches"}),(0,Mm.jsx)("option",{value:"Fashion"}),(0,Mm.jsx)("option",{value:"Ceramics & Glass"}),(0,Mm.jsx)("option",{value:"Collectibles"}),(0,Mm.jsx)("option",{value:"Books"}),(0,Mm.jsx)("option",{value:"Automotive"}),(0,Mm.jsx)("option",{value:"Electronics"}),(0,Mm.jsx)("option",{value:"Other"})]})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Era"}),(0,Mm.jsx)("input",{type:"text",value:h.era||"",onChange:e=>f(t=>u(u({},t),{},{era:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500"})]})]}),(0,Mm.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Markings / Signatures"}),(0,Mm.jsx)("input",{type:"text",value:h.markings||"",onChange:e=>f(t=>u(u({},t),{},{markings:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 font-medium text-sm"})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Condition"}),(0,Mm.jsx)("input",{type:"text",value:h.condition||"",onChange:e=>f(t=>u(u({},t),{},{condition:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 font-medium text-sm"})]})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Materials"}),(0,Mm.jsx)("textarea",{rows:3,value:h.materials||"",onChange:e=>f(t=>u(u({},t),{},{materials:e.target.value})),className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 text-sm resize-y"})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"block text-xs font-semibold text-stone-500 uppercase tracking-wider mb-1",children:"Sales Blurb"}),(0,Mm.jsx)("textarea",{rows:4,value:h.sales_blurb||"",onChange:e=>f(t=>u(u({},t),{},{sales_blurb:e.target.value})),placeholder:"AI generated sales text will appear here...",className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-rose-500 text-sm resize-y"})]}),h.reasoning&&(0,Mm.jsxs)("div",{className:"p-4 bg-stone-100 rounded-xl border border-stone-200 text-sm text-stone-600",children:[(0,Mm.jsx)("span",{className:"font-bold text-stone-700 block mb-1",children:"AI Reasoning:"}),h.reasoning]}),(0,Mm.jsxs)("div",{className:"bg-white rounded-xl border border-stone-200 shadow-sm overflow-hidden",children:[(0,Mm.jsxs)("div",{className:"p-3 bg-stone-50 border-b border-stone-100 flex items-center gap-2",children:[(0,Mm.jsx)(xm,{className:"w-4 h-4 text-stone-500"}),(0,Mm.jsx)("span",{className:"text-sm font-bold text-stone-700 uppercase tracking-wider",children:"Notes / Context"})]}),(0,Mm.jsx)("div",{className:"p-4",children:(0,Mm.jsx)("textarea",{value:(null===(t=h.provenance)||void 0===t?void 0:t.user_story)||h.userNotes||"",onChange:e=>f(t=>u(u({},t),{},{userNotes:e.target.value,provenance:u(u({},t.provenance),{},{user_story:e.target.value})})),rows:4,placeholder:"Add any details you know about this item (e.g. bought in 1980, signed by artist, minor damage)...",className:"w-full p-3 bg-white border border-stone-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-stone-500 text-sm leading-relaxed placeholder:text-stone-400 resize-y"})})]})]})]})}),(0,Mm.jsxs)("div",{className:"p-3 bg-white border-t border-stone-200 shrink-0 flex items-center justify-between gap-3",children:[(0,Mm.jsxs)("button",{onClick:()=>{confirm("Delete this item permanently? This cannot be undone.")&&(a(n.id),s())},className:"flex items-center gap-2 px-4 py-2.5 text-sm font-semibold text-red-600 hover:text-red-700 bg-red-50 hover:bg-red-100 rounded-xl transition-all active:scale-95",children:[(0,Mm.jsx)(am,{className:"w-4 h-4"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Delete"})]}),(0,Mm.jsxs)("button",{onClick:F,className:"flex-1 sm:flex-none px-6 py-2.5 bg-stone-900 hover:bg-stone-800 text-white text-sm font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 active:scale-95",children:[(0,Mm.jsx)(km,{className:"w-4 h-4"})," Save Changes"]})]})]})]})},ng=()=>{navigator.vibrate&&navigator.vibrate(50)},rg=e=>{if(!e)return null;const t=new Date(e),n=new Date-t,r=Math.floor(n/6e4),s=Math.floor(n/36e5),i=Math.floor(n/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):s<24?"".concat(s,"h ago"):i<7?"".concat(i,"d ago"):t.toLocaleDateString()},sg=e=>{const t=e.title||"",n=(e.maker&&"unknown"!==e.maker.toLowerCase()&&e.maker,e.style&&"unknown"!==e.style.toLowerCase()?e.style:null),r=e.category||"";if(!t||t.toLowerCase().startsWith("unknown")){const e=[n,r].filter(Boolean);return e.length>0?e.join(" "):"Untitled Item"}return t.replace(/^Unknown\s*/i,"").trim()||"Untitled Item"},ig=e=>{let{shareId:t,shareToken:n,filterParam:s}=e;const[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(s||"all"),[g,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(""),[w,x]=(0,r.useState)("newest");(0,r.useEffect)(()=>{(async()=>{try{const e=Mf(Vm,"artifacts",Bm,"shares",t),r=await zp(e);if(!r.exists())return d("This share link is invalid or has expired."),void l(!1);const s=r.data();if(s.token!==n)return d("Invalid share token."),void l(!1);if(!s.isActive)return d("This share link has been deactivated."),void l(!1);f(s.ownerName||"A collector");const i=_p(Lf(Vm,"artifacts",Bm,"users",s.userId,"inventory"),Cp("timestamp","desc")),o=(await function(e){e=Gi(e,Rf);const t=Gi(e.firestore,Bf),n=Hf(t),r=new Up(t);return xp(e._query),Ef(n,e._query).then(n=>new Mp(t,r,e,n))}(i)).docs.map(e=>u({id:e.id},e.data()));a(o),l(!1)}catch(e){console.error("Error loading shared collection:",e),d("Failed to load collection. Please try again."),l(!1)}})()},[t,n]);const k=(0,r.useMemo)(()=>{let e=i;if("all"!==p&&(e="TBD"===p?e.filter(e=>"draft"===e.status||"TBD"===e.status||"unprocessed"===e.status||"maybe"===e.status):e.filter(e=>e.status===p)),y.trim()){const t=y.toLowerCase().trim();e=e.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.maker&&e.maker.toLowerCase().includes(t)||e.category&&e.category.toLowerCase().includes(t)||e.style&&e.style.toLowerCase().includes(t))}switch(w){case"oldest":e=[...e].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp));break;case"value_high":e=[...e].sort((e,t)=>(Number(t.valuation_high)||0)-(Number(e.valuation_high)||0));break;case"value_low":e=[...e].sort((e,t)=>(Number(e.valuation_low)||0)-(Number(t.valuation_low)||0));break;case"alpha":e=[...e].sort((e,t)=>(e.title||"").localeCompare(t.title||""));break;default:e=[...e].sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp))}return e},[i,p,y,w]),S=(0,r.useMemo)(()=>["all","keep","sell","TBD"].reduce((e,t)=>{const n="all"===t?i:"TBD"===t?i.filter(e=>"draft"===e.status||"TBD"===e.status||"unprocessed"===e.status||"maybe"===e.status):i.filter(e=>e.status===t);return e[t]={count:n.length,low:n.reduce((e,t)=>e+(Number(t.valuation_low)||0),0),high:n.reduce((e,t)=>e+(Number(t.valuation_high)||0),0)},e},{}),[i]),[_,E]=(0,r.useState)(0),N=["Loading collection...","Summoning treasures...","Dusting off the goods...","Polishing the vintage...","Unpacking the goodies...","Consulting the oracle...","Waking the artifacts...","Loading wizard fodder...","Cataloging curiosities...","Brewing the inventory..."];return(0,r.useEffect)(()=>{if(!o)return;const e=setInterval(()=>{E(e=>(e+1)%N.length)},1800);return()=>clearInterval(e)},[o]),o?(0,Mm.jsx)("div",{className:"min-h-screen bg-[#FDFBF7] flex items-center justify-center",children:(0,Mm.jsxs)("div",{className:"text-center",children:[(0,Mm.jsx)("div",{className:"w-16 h-16 bg-stone-100 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse",children:(0,Mm.jsx)(cm,{className:"w-8 h-8 text-rose-400"})}),(0,Mm.jsx)("p",{className:"text-stone-600 font-medium transition-all duration-300",children:N[_]}),(0,Mm.jsx)("p",{className:"text-stone-400 text-xs mt-2",children:"This might take a moment for large collections"})]})}):c?(0,Mm.jsx)("div",{className:"min-h-screen bg-[#FDFBF7] flex items-center justify-center p-4",children:(0,Mm.jsxs)("div",{className:"text-center max-w-md",children:[(0,Mm.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Mm.jsx)(Sm,{className:"w-10 h-10 text-red-500"})}),(0,Mm.jsx)("h1",{className:"text-xl font-bold text-stone-800 mb-2",children:"Link Not Available"}),(0,Mm.jsx)("p",{className:"text-stone-600",children:c})]})}):(0,Mm.jsxs)("div",{className:"min-h-screen bg-[#FDFBF7] pb-12",children:[(0,Mm.jsxs)("header",{className:"bg-white/80 backdrop-blur-md border-b border-stone-100 sticky top-0 z-20",children:[(0,Mm.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,Mm.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Mm.jsx)("div",{className:"w-10 h-10 bg-stone-900 rounded-xl flex items-center justify-center",children:(0,Mm.jsx)(cm,{className:"w-5 h-5 text-rose-400",fill:"currentColor"})}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsxs)("h1",{className:"text-lg font-serif font-bold text-stone-900",children:[h,"'s Collection"]}),(0,Mm.jsxs)("p",{className:"text-xs text-stone-500 flex items-center gap-1",children:[(0,Mm.jsx)(_m,{className:"w-3 h-3"})," Shared collection \u2022 ",i.length," items"]})]})]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Mm.jsxs)("div",{className:"relative",children:[(0,Mm.jsx)(Em,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-stone-400 pointer-events-none"}),(0,Mm.jsx)("input",{type:"text",placeholder:"Search...",value:y,onChange:e=>b(e.target.value),className:"w-32 sm:w-40 pl-8 pr-2 py-1.5 text-xs bg-stone-100 border border-transparent focus:border-stone-300 focus:bg-white rounded-lg focus:outline-none transition-all placeholder:text-stone-400"}),y&&(0,Mm.jsx)("button",{onClick:()=>b(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600",children:(0,Mm.jsx)(tm,{className:"w-3 h-3"})})]}),(0,Mm.jsxs)("select",{value:w,onChange:e=>x(e.target.value),className:"text-xs bg-stone-100 border border-transparent focus:border-stone-300 rounded-lg px-2 py-1.5 focus:outline-none cursor-pointer hover:bg-stone-200 transition-colors",children:[(0,Mm.jsx)("option",{value:"newest",children:"Newest"}),(0,Mm.jsx)("option",{value:"oldest",children:"Oldest"}),(0,Mm.jsx)("option",{value:"value_high",children:"Value: High\u2192Low"}),(0,Mm.jsx)("option",{value:"value_low",children:"Value: Low\u2192High"}),(0,Mm.jsx)("option",{value:"alpha",children:"A-Z"})]}),(0,Mm.jsxs)("a",{href:"/",className:"hidden sm:flex text-xs font-semibold text-rose-600 hover:text-rose-700 items-center gap-1",children:["Create yours ",(0,Mm.jsx)(Nm,{className:"w-3 h-3"})]})]})]})}),(0,Mm.jsx)("div",{className:"px-4 py-2 border-t border-stone-50 bg-stone-50/50 overflow-x-auto",children:(0,Mm.jsx)("div",{className:"max-w-6xl mx-auto flex gap-2",children:[{value:"all",label:"All",icon:Tm},{value:"keep",label:"Keep",icon:gm},{value:"sell",label:"Sell",icon:vm},{value:"TBD",label:"TBD",icon:ym}].map(e=>{let{value:t,label:n,icon:r}=e;const s=S[t],i=p===t;return(0,Mm.jsx)("button",{onClick:()=>m(t),className:"flex-shrink-0 transition-all duration-200 ".concat(i?"bg-white rounded-xl shadow-md border border-stone-200 px-3 py-2":"px-3 py-1.5 rounded-full text-xs font-bold bg-white/80 text-stone-500 border border-stone-200 hover:border-stone-400 hover:bg-white"),children:i?(0,Mm.jsxs)("div",{className:"flex flex-col items-start",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Mm.jsx)(r,{className:"w-3 h-3 text-stone-600"}),(0,Mm.jsx)("span",{className:"text-xs font-bold text-stone-800",children:n}),(0,Mm.jsx)("span",{className:"text-[10px] font-bold text-stone-400 bg-stone-100 px-1.5 py-0.5 rounded-full",children:s.count})]}),s.high>0&&(0,Mm.jsxs)("span",{className:"text-sm font-bold text-emerald-600 mt-0.5",children:["$",s.low.toLocaleString()," - $",s.high.toLocaleString()]})]}):(0,Mm.jsxs)("span",{className:"text-xs font-bold whitespace-nowrap flex items-center gap-1",children:[(0,Mm.jsx)(r,{className:"w-3 h-3"}),n," ",(0,Mm.jsx)("span",{className:"opacity-60",children:s.count})]})},t)})})})]}),(0,Mm.jsx)("main",{className:"max-w-6xl mx-auto px-4 py-6",children:0===k.length?(0,Mm.jsx)("div",{className:"text-center py-16",children:(0,Mm.jsx)("p",{className:"text-stone-500",children:"No items to display"})}):(0,Mm.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:k.map((e,t)=>(0,Mm.jsx)(ag,{item:e,onExpand:()=>v(t)},e.id))})}),null!==g&&k[g]&&(0,Mm.jsx)(ag,{item:k[g],isExpandedView:!0,onClose:()=>v(null),onNext:()=>v(e=>Math.min(e+1,k.length-1)),onPrev:()=>v(e=>Math.max(e-1,0)),hasNext:g<k.length-1,hasPrev:g>0}),(0,Mm.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-stone-100 py-3 px-4",children:(0,Mm.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-center gap-2 text-xs text-stone-500",children:[(0,Mm.jsx)(cm,{className:"w-3 h-3 text-rose-400"}),(0,Mm.jsx)("span",{children:"Powered by Stuffboard"})]})})]})},ag=e=>{let{item:t,onExpand:n,isExpandedView:s,onClose:i,onNext:a,onPrev:o,hasNext:l,hasPrev:c}=e;const[u,d]=(0,r.useState)(0),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(!1),y=t.images&&t.images.length>0?t.images:t.image?[t.image]:[],b=y.length>0?y[u]:null,w=e=>{h||(m(e),f(!0),setTimeout(()=>{"next"===e?null===a||void 0===a||a():null===o||void 0===o||o(),setTimeout(()=>{f(!1),m(null)},150)},200))};return(0,r.useEffect)(()=>{if(!s)return;const e=e=>{"Escape"!==e.key?h||("ArrowRight"===e.key?u<y.length-1?d(e=>e+1):l&&!g&&w("next"):"ArrowLeft"===e.key&&(u>0?d(e=>e-1):c&&!g&&w("prev"))):g?v(!1):null===i||void 0===i||i()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,u,y.length,l,c,h,g]),(0,r.useEffect)(()=>{d(0)},[t.id]),s?(0,Mm.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center",onClick:i,children:[(0,Mm.jsx)("div",{className:"absolute inset-0 bg-black z-50 pointer-events-none transition-opacity duration-200 flex items-center justify-center ".concat(h?"opacity-100":"opacity-0"),children:p&&(0,Mm.jsx)("div",{className:"text-white/50 text-sm font-medium flex items-center gap-2 animate-pulse",children:"next"===p?(0,Mm.jsxs)(Mm.Fragment,{children:["Next item ",(0,Mm.jsx)(fm,{size:16})]}):(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)(hm,{size:16})," Previous item"]})})}),c&&!h&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),w("prev")},className:"absolute left-2 md:left-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full backdrop-blur-sm z-10 transition-all",children:(0,Mm.jsx)(hm,{size:24})}),l&&!h&&(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),w("next")},className:"absolute right-2 md:right-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full backdrop-blur-sm z-10 transition-all",children:(0,Mm.jsx)(fm,{size:24})}),(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto mx-4",onClick:e=>e.stopPropagation(),children:[g&&b&&(0,Mm.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black flex items-center justify-center cursor-zoom-out",onClick:()=>v(!1),children:[(0,Mm.jsx)("img",{src:b,alt:"",className:"max-w-full max-h-full object-contain select-none"}),(0,Mm.jsx)("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-black/50 text-white/70 text-xs px-3 py-1.5 rounded-full",children:"Click anywhere or press Escape to close"}),(0,Mm.jsx)("button",{onClick:()=>v(!1),className:"absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full transition-colors",children:(0,Mm.jsx)(tm,{size:24})}),y.length>1&&(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),d(e=>e>0?e-1:y.length-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full transition-colors",children:(0,Mm.jsx)(hm,{size:24})}),(0,Mm.jsx)("button",{onClick:e=>{e.stopPropagation(),d(e=>e<y.length-1?e+1:0)},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/10 hover:bg-white/20 text-white p-3 rounded-full transition-colors",children:(0,Mm.jsx)(fm,{size:24})}),(0,Mm.jsxs)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 text-white text-sm font-bold px-3 py-1.5 rounded-full",children:[u+1," / ",y.length]})]})]}),(0,Mm.jsxs)("div",{className:"relative aspect-square bg-stone-900",children:[b&&(0,Mm.jsx)("img",{src:b,alt:"",className:"w-full h-full object-contain cursor-zoom-in",onDoubleClick:()=>v(!0),title:"Double-click to view fullscreen"}),(0,Mm.jsx)("button",{onClick:i,className:"absolute top-3 right-3 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-colors",children:(0,Mm.jsx)(tm,{size:20})}),y.length>1&&(0,Mm.jsxs)("div",{className:"absolute top-3 left-3 bg-black/50 text-white text-xs font-bold px-2 py-1 rounded-full",children:[u+1," / ",y.length]}),y.length>1&&(0,Mm.jsxs)(Mm.Fragment,{children:[(0,Mm.jsx)("button",{onClick:()=>d(e=>e>0?e-1:y.length-1),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full transition-colors",children:(0,Mm.jsx)(hm,{size:20})}),(0,Mm.jsx)("button",{onClick:()=>d(e=>e<y.length-1?e+1:0),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full transition-colors",children:(0,Mm.jsx)(fm,{size:20})})]}),y.length>1&&(0,Mm.jsx)("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 px-4",children:y.map((e,t)=>(0,Mm.jsx)("button",{onClick:()=>d(t),className:"w-12 h-12 rounded-lg overflow-hidden border-2 transition-all ".concat(t===u?"border-white scale-105":"border-transparent opacity-60 hover:opacity-100"),children:(0,Mm.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"})},t))})]}),(0,Mm.jsxs)("div",{className:"p-4 space-y-3",children:[(0,Mm.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Mm.jsx)("h2",{className:"text-lg font-bold text-stone-900",children:sg(t)}),(0,Mm.jsxs)("span",{className:"px-2 py-1 rounded-full text-[10px] font-bold uppercase flex items-center gap-1 shrink-0 ".concat("keep"===t.status?"bg-blue-100 text-blue-700":"sell"===t.status?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:["keep"===t.status&&(0,Mm.jsx)(gm,{size:10}),"sell"===t.status&&(0,Mm.jsx)(vm,{size:10}),("draft"===t.status||"unprocessed"===t.status||"TBD"===t.status||!t.status)&&(0,Mm.jsx)(ym,{size:10}),"draft"===t.status||"unprocessed"===t.status?"TBD":t.status||"TBD"]})]}),t.valuation_high>0&&(0,Mm.jsxs)("div",{className:"bg-emerald-50 p-3 rounded-xl",children:[(0,Mm.jsx)("p",{className:"text-xs text-emerald-600 font-semibold mb-1",children:"Estimated Value"}),(0,Mm.jsxs)("p",{className:"text-xl font-bold text-emerald-700",children:["$",t.valuation_low," - $",t.valuation_high]})]}),t.sales_blurb&&(0,Mm.jsx)("p",{className:"text-sm text-stone-600",children:t.sales_blurb}),(0,Mm.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[t.maker&&"unknown"!==t.maker.toLowerCase()&&(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("span",{className:"text-stone-400",children:"Maker:"})," ",(0,Mm.jsx)("span",{className:"font-medium",children:t.maker})]}),t.era&&"unknown"!==t.era.toLowerCase()&&(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("span",{className:"text-stone-400",children:"Era:"})," ",(0,Mm.jsx)("span",{className:"font-medium",children:t.era})]}),t.materials&&(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("span",{className:"text-stone-400",children:"Materials:"})," ",(0,Mm.jsx)("span",{className:"font-medium",children:t.materials})]}),t.condition&&(0,Mm.jsxs)("div",{className:"col-span-2",children:[(0,Mm.jsx)("span",{className:"text-stone-400",children:"Condition:"})," ",(0,Mm.jsx)("span",{className:"font-medium",children:t.condition})]})]}),(0,Mm.jsxs)("p",{className:"text-xs text-stone-400 text-center pt-2 border-t border-stone-100",children:[y.length>1&&"\u2190 \u2192 to browse photos \u2022 ","Use arrow keys to navigate items"]})]})]})]}):(0,Mm.jsxs)("div",{onClick:()=>null===n||void 0===n?void 0:n(t),className:"group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 border border-stone-100 overflow-hidden cursor-pointer",children:[(0,Mm.jsxs)("div",{className:"relative aspect-square bg-stone-100",children:[y[0]?(0,Mm.jsx)("img",{src:y[0],alt:t.title||"Item",className:"w-full h-full object-cover"}):(0,Mm.jsx)("div",{className:"w-full h-full flex items-center justify-center text-stone-400",children:(0,Mm.jsx)(dm,{size:32})}),y.length>1&&(0,Mm.jsxs)("div",{className:"absolute top-2 left-2 bg-black/60 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md flex items-center gap-1",children:[(0,Mm.jsx)(om,{size:10})," ",y.length]}),(0,Mm.jsx)("div",{className:"absolute top-2 right-2",children:(0,Mm.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-bold uppercase flex items-center gap-1 ".concat("keep"===t.status?"bg-blue-100 text-blue-700":"sell"===t.status?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"),children:["keep"===t.status&&(0,Mm.jsx)(gm,{size:10}),"sell"===t.status&&(0,Mm.jsx)(vm,{size:10}),("draft"===t.status||"unprocessed"===t.status||"TBD"===t.status||!t.status)&&(0,Mm.jsx)(ym,{size:10}),"draft"===t.status||"unprocessed"===t.status?"TBD":t.status||"TBD"]})}),t.valuation_high>0&&(0,Mm.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3 pt-8",children:(0,Mm.jsxs)("p",{className:"text-white font-bold text-lg drop-shadow-md",children:["$",t.valuation_low," - $",t.valuation_high]})})]}),(0,Mm.jsxs)("div",{className:"p-3",children:[(0,Mm.jsx)("h3",{className:"font-semibold text-stone-800 text-sm line-clamp-1",children:sg(t)}),(0,Mm.jsx)("p",{className:"text-xs text-stone-500 line-clamp-1 mt-0.5",children:[t.maker,t.style].filter(e=>e&&"unknown"!==e.toLowerCase()).join(" \u2022 ")||t.category||""})]})]})},og=e=>{let{user:t,items:n,onClose:s}=e;const[i,a]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)("all"),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=Mf(Vm,"artifacts",Bm,"shares",t.uid),n=await zp(e);if(n.exists())a(n.data());else{const n={userId:t.uid,ownerName:t.displayName||"A collector",token:Math.random().toString(36).substr(2,16)+Math.random().toString(36).substr(2,16),isActive:!0,createdAt:(new Date).toISOString()};await function(e,t,n){e=Gi(e,Df);const r=Gi(e.firestore,Bf),s=Rp(e.converter,t,n);return Wp(r,[rp(np(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,cc.none())])}(e,n),a(n)}}catch(e){console.error("Error with share:",e)}finally{l(!1)}})()},[t]);const p=()=>{const e=window.location.origin+window.location.pathname,n=new URLSearchParams(u({share:t.uid,token:(null===i||void 0===i?void 0:i.token)||""},"all"!==c&&{filter:c}));return"".concat(e,"?").concat(n.toString())},m={all:n.length,sell:n.filter(e=>"sell"===e.status).length,keep:n.filter(e=>"keep"===e.status).length,TBD:n.filter(e=>"draft"===e.status||"TBD"===e.status||"unprocessed"===e.status||"maybe"===e.status).length};return(0,Mm.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:s,children:(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl overflow-hidden animate-in zoom-in-95 fade-in duration-200",onClick:e=>e.stopPropagation(),children:[(0,Mm.jsxs)("div",{className:"p-4 border-b border-stone-100 flex items-center justify-between",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Mm.jsx)("div",{className:"w-10 h-10 bg-rose-100 rounded-xl flex items-center justify-center",children:(0,Mm.jsx)(Cm,{className:"w-5 h-5 text-rose-600"})}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("h2",{className:"font-bold text-stone-900",children:"Share Collection"}),(0,Mm.jsx)("p",{className:"text-xs text-stone-500",children:"Create a public link to your items"})]})]}),(0,Mm.jsx)("button",{onClick:s,className:"p-2 text-stone-400 hover:bg-stone-100 rounded-full",children:(0,Mm.jsx)(tm,{className:"w-5 h-5"})})]}),o?(0,Mm.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,Mm.jsx)(rm,{className:"w-6 h-6 animate-spin text-stone-400"})}):(0,Mm.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Mm.jsxs)("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-xl",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[null!==i&&void 0!==i&&i.isActive?(0,Mm.jsx)(Im,{className:"w-4 h-4 text-emerald-600"}):(0,Mm.jsx)(Sm,{className:"w-4 h-4 text-stone-400"}),(0,Mm.jsx)("span",{className:"text-sm font-medium text-stone-700",children:null!==i&&void 0!==i&&i.isActive?"Sharing enabled":"Sharing disabled"})]}),(0,Mm.jsx)("button",{onClick:async()=>{if(!i)return;const e=!i.isActive,n=Mf(Vm,"artifacts",Bm,"shares",t.uid);await Vp(n,{isActive:e}),a(u(u({},i),{},{isActive:e}))},className:"relative w-12 h-6 rounded-full transition-colors ".concat(null!==i&&void 0!==i&&i.isActive?"bg-emerald-500":"bg-stone-300"),children:(0,Mm.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow transition-transform ".concat(null!==i&&void 0!==i&&i.isActive?"left-7":"left-1")})})]}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider mb-2 block",children:"What to share"}),(0,Mm.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{value:"all",label:"Everything",icon:Tm},{value:"sell",label:"For Sale",icon:vm},{value:"keep",label:"Keepers",icon:gm},{value:"TBD",label:"Undecided",icon:ym}].map(e=>{let{value:t,label:n,icon:r}=e;return(0,Mm.jsxs)("button",{onClick:()=>d(t),className:"p-3 rounded-xl border-2 transition-all flex items-center gap-2 ".concat(c===t?"border-rose-500 bg-rose-50 text-rose-700":"border-stone-200 hover:border-stone-300 text-stone-600"),children:[(0,Mm.jsx)(r,{className:"w-4 h-4"}),(0,Mm.jsx)("span",{className:"text-sm font-medium",children:n}),(0,Mm.jsx)("span",{className:"ml-auto text-xs opacity-60",children:m[t]})]},t)})})]}),(null===i||void 0===i?void 0:i.isActive)&&(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("label",{className:"text-xs font-bold text-stone-500 uppercase tracking-wider mb-2 block",children:"Share Link"}),(0,Mm.jsxs)("div",{className:"flex gap-2",children:[(0,Mm.jsx)("input",{type:"text",readOnly:!0,value:p(),className:"flex-1 p-3 bg-stone-100 rounded-xl text-sm text-stone-600 font-mono truncate"}),(0,Mm.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(p()),f(!0),ng(),setTimeout(()=>f(!1),2e3)},className:"px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 transition-all ".concat(h?"bg-emerald-500 text-white":"bg-stone-900 text-white hover:bg-stone-800"),children:[h?(0,Mm.jsx)(im,{className:"w-4 h-4"}):(0,Mm.jsx)(mm,{className:"w-4 h-4"}),h?"Copied!":"Copy"]})]})]}),(0,Mm.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-amber-50 rounded-xl",children:[(0,Mm.jsx)(Am,{className:"w-4 h-4 text-amber-600 mt-0.5"}),(0,Mm.jsxs)("p",{className:"text-xs text-amber-800",children:["Anyone with this link can view the selected items.",(0,Mm.jsx)("button",{onClick:async()=>{if(!confirm("This will invalidate all existing share links. Continue?"))return;const e=Math.random().toString(36).substr(2,16)+Math.random().toString(36).substr(2,16),n=Mf(Vm,"artifacts",Bm,"shares",t.uid);await Vp(n,{token:e}),a(u(u({},i),{},{token:e}))},className:"underline ml-1 hover:text-amber-900",children:"Generate new link"})," to revoke access."]})]})]})]})})};function lg(){var e;const[t,n]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)("all"),[h,f]=(0,r.useState)("date-desc"),[p,m]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)([]),[_,E]=(0,r.useState)(!0),[N,T]=(0,r.useState)(new Set),[C,I]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[j,R]=(0,r.useState)(!1),[D,O]=(0,r.useState)("dashboard"),[L,M]=(0,r.useState)(!1),F=(0,r.useRef)(null),z=(0,r.useRef)(null),U=(0,r.useMemo)(()=>new URLSearchParams(window.location.search),[]),B=U.get("share"),H=U.get("token"),q=U.get("filter");if(B&&H)return(0,Mm.jsx)(ig,{shareId:B,shareToken:H,filterParam:q});const W=async e=>{try{const n=await Wm(e.images||[e.image],e.userNotes||"",e);await Vp(Mf(Vm,"artifacts",Bm,"users",t.uid,"inventory",e.id),u(u({},n),{},{aiLastRun:(new Date).toISOString()}))}catch(n){console.error("Quick analysis failed",n),alert("Analysis failed. Please check your Gemini API Key.")}},K=e=>{const t=new Set(N);t.has(e)?t.delete(e):t.add(e),T(t)};(0,r.useEffect)(()=>{const e=function(e,t,n,r){return V(e).onAuthStateChanged(t,n,r)}(Um,e=>{n(e),E(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{if(!t)return;const e=qp(_p(Lf(Vm,"artifacts",Bm,"users",t.uid,"inventory"),Cp("timestamp","desc")),e=>{a(e.docs.map(e=>u({id:e.id},e.data()))),l(!1)},e=>{console.error(e),l(!1)});return()=>e()},[t]);const G=(e,t)=>{const n=Array.from(e.target.files);if(0!==n.length){if("single"===t&&n.length>4)return alert("Select up to 4 photos to start. You can add more later on the item page!"),void(e.target.value="");S(n),"bulk"===t&&O("staging")}},Q=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"analyze_now",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!t)return;const s=r.length>0?r:[k];if(0===s.length||0===s[0].length)return;const i="single"===e&&"analyze_now"===n;x(!0),i&&R(!0),S([]);try{for(const r of s){const s=[];for(const e of r)s.push(await Km(e));let o={};if(i)try{o=await Wm(s,"")}catch(a){console.error("Auto-analysis failed:",a),alert("Item uploaded, but AI analysis failed: ".concat(a.message))}const l=await Hp(Lf(Vm,"artifacts",Bm,"users",t.uid,"inventory"),u(u({images:s,image:s[0],status:"TBD",title:"",category:"",materials:"",maker:"",style:"",markings:"",condition:"",userNotes:"",timestamp:Gp(),valuation_low:0,valuation_high:0},o),{},{aiLastRun:i&&o.title?(new Date).toISOString():null}));"single"===e&&"edit_first"===n&&b({id:l.id,images:s,image:s[0],status:"TBD",title:"",category:"",materials:"",maker:"",style:"",markings:"",condition:"",userNotes:"",valuation_low:0,valuation_high:0})}}catch(o){console.error(o),alert("Upload failed: ".concat(o.message))}x(!1),R(!1)},Y=()=>{if(0===s.length)return;const e=e=>{const t=[e.maker&&"unknown"!==e.maker.toLowerCase()?e.maker:null,e.style&&"unknown"!==e.style.toLowerCase()?e.style:null,e.title?e.title.replace(/^Unknown\s*/i,"").trim():null,e.era&&"unknown"!==e.era.toLowerCase()?e.era:null,e.materials].filter(Boolean);return[...new Set(t.join(" ").split(" "))].join(" ").substring(0,80)||"Vintage Item"},t=e=>{const t=e.sales_blurb||"",n=e=>{if(!e)return!1;const t=e.toLowerCase().trim();return"unknown"!==t&&"vintage"!==t&&"see photos"!==t&&"contemporary"!==t&&"modern"!==t&&"n/a"!==t&&t.length>0},r=[];n(e.maker)&&r.push("- Maker/Brand: ".concat(e.maker)),n(e.style)&&r.push("- Style/Period: ".concat(e.style)),n(e.era)&&r.push("- Era: ".concat(e.era)),n(e.materials)&&r.push("- Material: ".concat(e.materials)),e.markings&&r.push("- Markings: ".concat(e.markings));let s=t;return r.length>0&&(s+="\n\nDETAILS:\n".concat(r.join("\n"))),n(e.condition)&&(s+="\n\nCONDITION:\n".concat(e.condition)),e.userNotes&&(s+="\n\nNOTES:\n".concat(e.userNotes)),s+="\n\nMessage for measurements or more details!",s.trim()},n=e=>{const t=[e.category,e.style,e.era,"vintage","retro",e.maker].filter(e=>e&&"unknown"!==e.toLowerCase());return e.search_terms_broad&&t.push(...e.search_terms_broad.split(" ").filter(e=>"unknown"!==e.toLowerCase())),[...new Set(t)].map(e=>"#".concat(e.replace(/\s+/g,""))).join(" ")},r=e=>e.id?e.id.substring(0,8).toUpperCase():Math.random().toString(36).substr(2,8).toUpperCase(),i=s.map(s=>['"'.concat((s.title||"").replace(/"/g,'""'),'"'),'"'.concat((s.category||"").replace(/"/g,'""'),'"'),'"'.concat((s.era||"").replace(/"/g,'""'),'"'),'"'.concat((s.maker||"").replace(/"/g,'""'),'"'),'"'.concat((s.style||"").replace(/"/g,'""'),'"'),'"'.concat((s.materials||"").replace(/"/g,'""'),'"'),'"'.concat((s.condition||"").replace(/"/g,'""'),'"'),'"'.concat((s.markings||"").replace(/"/g,'""'),'"'),s.valuation_low||0,s.valuation_high||0,'"'.concat((s.userNotes||"").replace(/"/g,'""'),'"'),s.status,r(s),'"'.concat(e(s).replace(/"/g,'""'),'"'),'"'.concat(t(s).replace(/"/g,'""'),'"'),'"'.concat(n(s).replace(/"/g,'""'),'"')]),a=[["Title","Category","Era","Maker","Style","Materials","Condition","Markings","Low Estimate","High Estimate","Notes","Status","SKU","Optimized Title","Listing Description","SEO Tags"].join(","),...i.map(e=>e.join(","))].join("\n"),o=document.createElement("a");o.setAttribute("href",URL.createObjectURL(new Blob([a],{type:"text/csv;charset=utf-8;"}))),o.setAttribute("download","vintage_inventory_".concat((new Date).toISOString().split("T")[0],".csv")),document.body.appendChild(o),o.click(),document.body.removeChild(o)},X=(0,r.useMemo)(()=>{let e=s;if("all"!==c&&(e=e.filter(e=>"TBD"===c?"draft"===e.status||"TBD"===e.status||"unprocessed"===e.status||"maybe"===e.status:e.status===c)),p.trim()){const t=p.toLowerCase().trim();e=e.filter(e=>[e.title,e.maker,e.category,e.style,e.materials,e.search_terms,e.search_terms_broad].filter(Boolean).join(" ").toLowerCase().includes(t))}return e.sort((e,t)=>{var n,r,s,i;switch(h){case"date-desc":return((null===(n=t.timestamp)||void 0===n?void 0:n.seconds)||0)-((null===(r=e.timestamp)||void 0===r?void 0:r.seconds)||0);case"date-asc":return((null===(s=e.timestamp)||void 0===s?void 0:s.seconds)||0)-((null===(i=t.timestamp)||void 0===i?void 0:i.seconds)||0);case"value-desc":return(Number(t.valuation_high)||0)-(Number(e.valuation_high)||0);case"value-asc":return(Number(e.valuation_high)||0)-(Number(t.valuation_high)||0);case"alpha-asc":return(e.title||"").localeCompare(t.title||"");case"category-asc":return(e.category||"").localeCompare(t.category||"");default:return 0}})},[s,c,h,p]),$=((0,r.useMemo)(()=>X.reduce((e,t)=>e+(Number(t.valuation_low)||0),0),[X]),(0,r.useMemo)(()=>X.reduce((e,t)=>e+(Number(t.valuation_high)||0),0),[X]),(0,r.useMemo)(()=>["all","keep","sell","TBD"].reduce((e,t)=>{const n=(e=>"all"===e?s:"TBD"===e?s.filter(e=>"draft"===e.status||"TBD"===e.status||"unprocessed"===e.status||"maybe"===e.status):s.filter(t=>t.status===e))(t);return e[t]={count:n.length,low:n.reduce((e,t)=>e+(Number(t.valuation_low)||0),0),high:n.reduce((e,t)=>e+(Number(t.valuation_high)||0),0)},e},{}),[s]));return _?(0,Mm.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#FDFBF7] gap-4",children:[(0,Mm.jsx)("div",{className:"w-14 h-14 bg-stone-900 rounded-2xl flex items-center justify-center animate-pulse",children:(0,Mm.jsx)(cm,{className:"w-7 h-7 text-rose-400"})}),(0,Mm.jsx)("p",{className:"text-stone-500 text-sm",children:"Waking up the AI..."})]}):t?(0,Mm.jsxs)("div",{className:"min-h-screen bg-[#FDFBF7] font-sans text-stone-900 pb-32",children:[(0,Mm.jsxs)("header",{className:"bg-white/80 backdrop-blur-md border-b border-stone-100 sticky top-0 z-30 overflow-visible",children:[(0,Mm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 h-14 flex items-center justify-between gap-3",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,Mm.jsx)("div",{className:"w-8 h-8 bg-stone-900 rounded-lg flex items-center justify-center shadow-sm",children:(0,Mm.jsx)(cm,{className:"w-4 h-4 text-rose-400",fill:"currentColor"})}),(0,Mm.jsxs)("h1",{className:"text-base font-serif font-bold text-stone-900 tracking-tight hidden lg:block",children:[(null===(e=t.displayName)||void 0===e?void 0:e.split(" ")[0])||"My","'s Stuffboard"]})]}),(0,Mm.jsxs)("div",{className:"flex-1 max-w-xs relative",children:[(0,Mm.jsx)(Em,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400 pointer-events-none"}),(0,Mm.jsx)("input",{type:"text",placeholder:"Search items...",value:p,onChange:e=>m(e.target.value),className:"w-full pl-9 pr-3 py-2 text-sm bg-stone-100 border border-transparent focus:border-stone-300 focus:bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-stone-200 transition-all placeholder:text-stone-400"}),p&&(0,Mm.jsx)("button",{onClick:()=>m(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-stone-400 hover:text-stone-600 p-1",children:(0,Mm.jsx)(tm,{className:"w-3 h-3"})})]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 shrink-0",children:[(0,Mm.jsxs)("div",{className:"relative group/tooltip",children:[(0,Mm.jsxs)("button",{onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.click()},disabled:w,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-xs font-bold transition-all duration-200 bg-stone-900 text-white hover:bg-stone-800 hover:shadow-md hover:scale-[1.02] shadow-sm active:scale-95 disabled:opacity-50 disabled:hover:scale-100",children:[(0,Mm.jsx)(um,{className:"w-4 h-4"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Add"})]}),(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),"Add single item (1-4 photos)"]})]}),(0,Mm.jsxs)("div",{className:"relative group/tooltip",children:[(0,Mm.jsxs)("button",{onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},disabled:w,className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-xs font-bold transition-all duration-200 bg-white text-stone-700 hover:bg-stone-50 hover:shadow-md hover:scale-[1.02] border border-stone-200 shadow-sm active:scale-95 disabled:opacity-50 disabled:hover:scale-100",children:[(0,Mm.jsx)(Pm,{className:"w-4 h-4"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Bulk"})]}),(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),"Bulk upload & organize photos"]})]}),(0,Mm.jsxs)("div",{className:"relative group/tooltip",children:[(0,Mm.jsx)("button",{onClick:()=>I(!C),className:"flex items-center gap-1.5 px-2.5 sm:px-3 py-1.5 rounded-lg text-xs font-bold transition-all duration-200 border hover:shadow-md hover:scale-[1.02] active:scale-95 ".concat(C?"bg-rose-100 text-rose-700 border-rose-200 shadow-sm":"bg-white text-stone-600 border-stone-200 hover:bg-stone-50"),children:(0,Mm.jsx)(lm,{className:"w-4 h-4 ".concat(C?"fill-current":"")})}),(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),C?"Exit batch mode":"Select items for batch analysis"]})]}),(0,Mm.jsx)("div",{className:"hidden md:block w-px h-6 bg-stone-200 mx-1"}),(0,Mm.jsxs)("div",{className:"hidden md:block relative group/tooltip",children:[(0,Mm.jsx)("button",{onClick:()=>M(!0),disabled:0===s.length,className:"p-2 rounded-lg text-stone-500 hover:text-rose-600 hover:bg-rose-50 transition-all duration-200 disabled:opacity-40 disabled:hover:bg-transparent disabled:hover:text-stone-500",children:(0,Mm.jsx)(Cm,{className:"w-4 h-4"})}),(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),"Share collection"]})]}),(0,Mm.jsxs)("div",{className:"hidden md:block relative group/tooltip",children:[(0,Mm.jsx)("button",{onClick:Y,disabled:0===s.length,className:"p-2 rounded-lg text-stone-500 hover:text-emerald-600 hover:bg-emerald-50 transition-all duration-200 disabled:opacity-40 disabled:hover:bg-transparent disabled:hover:text-stone-500",children:(0,Mm.jsx)(jm,{className:"w-4 h-4"})}),(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/tooltip:opacity-100 group-hover/tooltip:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),"Export to CSV"]})]}),(0,Mm.jsxs)("div",{className:"relative group cursor-pointer ml-1 z-50",children:[(0,Mm.jsx)("div",{className:"transition-all duration-200 hover:scale-105 hover:shadow-md rounded-full",children:t.photoURL?(0,Mm.jsx)("img",{src:t.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full border-2 border-stone-200 shadow-sm transition-all duration-200 group-hover:border-stone-400"}):(0,Mm.jsx)("div",{className:"w-8 h-8 rounded-full bg-stone-200 flex items-center justify-center transition-all duration-200 group-hover:bg-stone-300",children:(0,Mm.jsx)(Rm,{className:"w-5 h-5 text-stone-400"})})}),(0,Mm.jsx)("div",{className:"absolute right-0 top-full pt-2 hidden group-hover:block z-[100]",children:(0,Mm.jsxs)("div",{className:"w-52 bg-white rounded-xl shadow-2xl border border-stone-100 overflow-hidden p-1.5 animate-in fade-in slide-in-from-top-2 duration-200",children:[(0,Mm.jsxs)("div",{className:"px-3 py-2.5 bg-gradient-to-r from-stone-50 to-stone-100 rounded-lg mb-1.5",children:[(0,Mm.jsx)("p",{className:"text-sm font-bold text-stone-900 truncate",children:t.displayName}),(0,Mm.jsxs)("p",{className:"text-[10px] text-stone-500 truncate flex items-center gap-1 mt-0.5",children:[(0,Mm.jsx)(Dm,{className:"w-2.5 h-2.5 text-emerald-500"})," Synced \u2022 ",t.email]})]}),(0,Mm.jsxs)("button",{onClick:()=>M(!0),disabled:0===s.length,className:"w-full text-left px-3 py-2.5 text-xs font-medium text-stone-600 hover:bg-stone-50 hover:text-stone-900 rounded-lg flex items-center gap-2.5 disabled:opacity-50 transition-all duration-150 group/item",children:[(0,Mm.jsx)("div",{className:"w-7 h-7 rounded-md bg-rose-50 group-hover/item:bg-rose-100 flex items-center justify-center transition-colors",children:(0,Mm.jsx)(Cm,{className:"w-3.5 h-3.5 text-rose-600"})}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("span",{className:"block",children:"Share Collection"}),(0,Mm.jsx)("span",{className:"text-[10px] text-stone-400",children:"Create a public link"})]})]}),(0,Mm.jsxs)("button",{onClick:Y,disabled:0===s.length,className:"w-full text-left px-3 py-2.5 text-xs font-medium text-stone-600 hover:bg-stone-50 hover:text-stone-900 rounded-lg flex items-center gap-2.5 disabled:opacity-50 transition-all duration-150 group/item",children:[(0,Mm.jsx)("div",{className:"w-7 h-7 rounded-md bg-stone-100 group-hover/item:bg-stone-200 flex items-center justify-center transition-colors",children:(0,Mm.jsx)(jm,{className:"w-3.5 h-3.5"})}),(0,Mm.jsxs)("div",{children:[(0,Mm.jsx)("span",{className:"block",children:"Export CSV"}),(0,Mm.jsx)("span",{className:"text-[10px] text-stone-400",children:"Download your inventory"})]})]}),(0,Mm.jsx)("div",{className:"h-px bg-stone-100 my-1"}),(0,Mm.jsxs)("button",{onClick:()=>function(e){return V(e).signOut()}(Um),className:"w-full text-left px-3 py-2.5 text-xs font-medium text-red-600 hover:bg-red-50 rounded-lg flex items-center gap-2.5 transition-all duration-150 group/item",children:[(0,Mm.jsx)("div",{className:"w-7 h-7 rounded-md bg-red-50 group-hover/item:bg-red-100 flex items-center justify-center transition-colors",children:(0,Mm.jsx)(Om,{className:"w-3.5 h-3.5"})}),(0,Mm.jsx)("span",{children:"Sign Out"})]})]})})]})]})]}),(0,Mm.jsx)("div",{className:"border-t border-stone-50 bg-stone-50/50 overflow-visible",children:(0,Mm.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-2 flex items-center gap-2",children:[[{value:"all",label:"All",icon:Tm},{value:"keep",label:"Keep",icon:gm},{value:"sell",label:"Sell",icon:vm},{value:"TBD",label:"TBD",icon:ym}].map(e=>{let{value:t,label:n,icon:r}=e;const s=$[t],i=c===t;return(0,Mm.jsx)("button",{onClick:()=>d(t),className:"flex-shrink-0 transition-all duration-200 ".concat(i?"bg-white rounded-xl shadow-md border border-stone-200 px-3 py-2 scale-[1.02]":"px-3 py-1.5 rounded-full text-xs font-bold bg-white/80 text-stone-500 border border-stone-200 hover:border-stone-400 hover:bg-white hover:shadow-sm hover:scale-[1.02] active:scale-95"),children:i?(0,Mm.jsxs)("div",{className:"flex flex-col items-start",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Mm.jsx)(r,{className:"w-3 h-3 text-stone-600"}),(0,Mm.jsx)("span",{className:"text-xs font-bold text-stone-800",children:n}),(0,Mm.jsx)("span",{className:"text-[10px] font-bold text-stone-400 bg-stone-100 px-1.5 py-0.5 rounded-full",children:s.count})]}),s.high>0&&(0,Mm.jsxs)("span",{className:"text-sm font-bold text-emerald-600 mt-0.5",children:["$",s.low.toLocaleString()," ",(0,Mm.jsx)("span",{className:"text-stone-300 font-normal",children:"-"})," $",s.high.toLocaleString()]})]}):(0,Mm.jsxs)("span",{className:"text-xs font-bold whitespace-nowrap flex items-center gap-1",children:[(0,Mm.jsx)(r,{className:"w-3 h-3"}),n," ",(0,Mm.jsx)("span",{className:"opacity-60",children:s.count})]})},t)}),(0,Mm.jsxs)("div",{className:"ml-auto flex-shrink-0 relative group/sort",children:[(0,Mm.jsxs)("button",{onClick:()=>v(!g),disabled:o,className:"flex items-center gap-1.5 text-xs font-bold text-stone-500 hover:text-stone-700 bg-white/80 hover:bg-white hover:shadow-sm px-2.5 py-1.5 rounded-lg border border-stone-200 hover:border-stone-300 transition-all duration-200 hover:scale-[1.02] active:scale-95",children:[(0,Mm.jsx)(Lm,{className:"w-3.5 h-3.5"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:{"date-desc":"Newest","date-asc":"Oldest","value-desc":"High $","value-asc":"Low $","alpha-asc":"A-Z","category-asc":"Category"}[h]})]}),!g&&(0,Mm.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-2 px-3 py-1.5 bg-stone-900 text-white text-[11px] font-medium rounded-lg shadow-xl whitespace-nowrap opacity-0 invisible group-hover/sort:opacity-100 group-hover/sort:visible transition-all duration-200 delay-300 pointer-events-none z-50",children:[(0,Mm.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-stone-900 rotate-45"}),"Sort items"]}),g&&(0,Mm.jsx)("div",{className:"fixed inset-0 z-[60]",onClick:()=>v(!1)}),g&&(0,Mm.jsx)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-xl shadow-2xl border border-stone-100 overflow-hidden z-[70] animate-in fade-in zoom-in-95 duration-200",children:(0,Mm.jsx)("div",{className:"p-1.5",children:[{label:"Newest First",value:"date-desc"},{label:"Oldest First",value:"date-asc"},{label:"High \u2192 Low $",value:"value-desc"},{label:"Low \u2192 High $",value:"value-asc"},{label:"A \u2192 Z",value:"alpha-asc"},{label:"By Category",value:"category-asc"}].map(e=>(0,Mm.jsxs)("button",{onClick:()=>{f(e.value),v(!1)},className:"w-full text-left px-3 py-2.5 rounded-lg text-xs font-medium flex items-center justify-between transition-all duration-150 ".concat(h===e.value?"bg-rose-50 text-rose-700":"text-stone-600 hover:bg-stone-50 hover:text-stone-900"),children:[e.label,h===e.value&&(0,Mm.jsx)(im,{className:"w-3.5 h-3.5"})]},e.value))})})]})]})})]}),(0,Mm.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-4",children:[0===s.length&&!w&&!o&&(0,Mm.jsxs)("div",{className:"text-center py-20 opacity-80 animate-in fade-in zoom-in duration-500 max-w-sm mx-auto",children:[(0,Mm.jsx)("div",{className:"w-32 h-32 bg-gradient-to-tr from-rose-100 to-stone-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-sm border border-white",children:(0,Mm.jsx)(cm,{className:"w-12 h-12 text-rose-400"})}),(0,Mm.jsx)("h3",{className:"text-2xl font-serif font-bold text-stone-800 mb-3",children:"Start Your Discovery"}),(0,Mm.jsx)("p",{className:"text-stone-500 mb-8 leading-relaxed",children:"Upload photos of your vintage items to reveal their history, value, and where to sell them."}),(0,Mm.jsxs)("button",{onClick:()=>{var e;return null===(e=fileInputRef.current)||void 0===e?void 0:e.click()},className:"bg-stone-900 hover:bg-stone-800 text-white px-8 py-4 rounded-xl font-bold shadow-xl shadow-stone-200 transition-all active:scale-95 flex items-center gap-3 mx-auto",children:[(0,Mm.jsx)(dm,{className:"w-5 h-5"}),"Identify Your First Item"]})]}),!o&&s.length>0&&0===X.length&&(0,Mm.jsxs)("div",{className:"text-center py-16 animate-in fade-in duration-300",children:[(0,Mm.jsx)("div",{className:"w-20 h-20 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Mm.jsx)(Em,{className:"w-8 h-8 text-stone-400"})}),(0,Mm.jsx)("h3",{className:"text-lg font-semibold text-stone-700 mb-2",children:p?'No results for "'.concat(p,'"'):'No items marked as "'.concat(c,'"')}),(0,Mm.jsx)("p",{className:"text-sm text-stone-500 mb-4",children:p?"Try a different search term or clear your search":"You haven't marked any items as \"".concat(c,'" yet')}),(0,Mm.jsx)("button",{onClick:()=>{m(""),d("all")},className:"text-rose-600 text-sm font-semibold hover:underline",children:"Clear filters"})]}),(0,Mm.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4",children:o?Array.from({length:10}).map((e,t)=>(0,Mm.jsx)(Ym,{},t)):X.map(e=>(0,Mm.jsx)(Jm,{item:e,onClick:b,isSelected:N.has(e.id),isSelectionMode:C,onToggleSelect:K,onAnalyze:W},e.id))})]}),C&&(0,Mm.jsx)("div",{className:"fixed bottom-6 md:bottom-12 left-4 right-4 md:left-1/2 md:right-auto md:-translate-x-1/2 md:w-full md:max-w-xl z-50 animate-in slide-in-from-bottom-10 fade-in duration-300",children:(0,Mm.jsxs)("div",{className:"bg-stone-900 text-white rounded-2xl shadow-2xl shadow-stone-900/50 p-4 border border-stone-700/50 flex items-center justify-between gap-4 backdrop-blur-md",children:[(0,Mm.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 pl-1 sm:pl-2",children:[(0,Mm.jsxs)("div",{className:"bg-stone-700 px-2 sm:px-3 py-1.5 rounded-lg text-xs sm:text-sm font-bold shadow-inner",children:[N.size,"/",X.length]}),(0,Mm.jsx)("button",{onClick:()=>{N.size===X.length?T(new Set):T(new Set(X.map(e=>e.id)))},className:"text-stone-300 hover:text-white text-xs sm:text-sm font-medium transition-colors whitespace-nowrap",children:N.size===X.length?"Deselect All":"Select All"}),(0,Mm.jsx)("button",{onClick:()=>{T(new Set),I(!1)},className:"text-stone-500 hover:text-stone-300 text-xs sm:text-sm font-medium transition-colors",children:"Cancel"})]}),(0,Mm.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,Mm.jsx)("button",{onClick:async()=>{if(!confirm("Delete ".concat(N.size," items? This cannot be undone.")))return;const e=Array.from(N);for(const n of e)await Bp(Mf(Vm,"artifacts",Bm,"users",t.uid,"inventory",n));T(new Set),I(!1)},disabled:0===N.size,className:"p-2 sm:p-2.5 rounded-xl hover:bg-stone-800 text-red-400 hover:text-red-300 transition-colors border border-transparent hover:border-stone-700 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Selected",children:(0,Mm.jsx)(am,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,Mm.jsxs)("button",{onClick:async()=>{if(0===N.size)return;P(!0);const e=s.filter(e=>N.has(e.id));for(const r of e)if(!(r.valuation_low>0)&&r.images&&0!==r.images.length)try{const e=await Wm(r.images,r.userNotes||"",r);await Vp(Mf(Vm,"artifacts",Bm,"users",t.uid,"inventory",r.id),u(u({},e),{},{aiLastRun:(new Date).toISOString()}))}catch(n){console.error("Failed to analyze item ".concat(r.id),n)}P(!1),T(new Set),I(!1),alert("Batch analysis complete!")},disabled:A||0===N.size,className:"bg-rose-500 hover:bg-rose-600 text-white px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl text-xs sm:text-sm font-bold flex items-center gap-2 shadow-lg shadow-rose-900/20 transition-all active:scale-95 border-t border-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[A?(0,Mm.jsx)(rm,{className:"w-4 h-4 animate-spin"}):(0,Mm.jsx)(cm,{className:"w-4 h-4 fill-white"}),(0,Mm.jsx)("span",{className:"hidden sm:inline",children:"Analyze"}),(0,Mm.jsx)("span",{className:"sm:hidden",children:"AI"})]})]})]})}),!C&&(0,Mm.jsxs)("div",{className:"fixed bottom-6 right-6 z-30 md:hidden flex flex-col gap-3",children:[(0,Mm.jsx)("button",{onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},disabled:w,className:"h-12 w-12 rounded-full shadow-lg shadow-stone-900/10 flex items-center justify-center transition-all active:scale-90 bg-white text-stone-700 border border-stone-200",children:(0,Mm.jsx)(om,{className:"w-5 h-5"})}),(0,Mm.jsx)("button",{onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.click()},disabled:w,className:"h-16 w-16 rounded-full shadow-xl shadow-rose-900/20 flex items-center justify-center transition-all active:scale-90 border-2 border-white ".concat(w?"bg-stone-100 cursor-wait":"bg-stone-900 text-white"),children:w?(0,Mm.jsx)(rm,{className:"w-8 h-8 animate-spin text-stone-400"}):(0,Mm.jsx)(sm,{className:"w-8 h-8",strokeWidth:2.5})})]}),j&&(0,Mm.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:(0,Mm.jsxs)("div",{className:"bg-white rounded-2xl p-8 flex flex-col items-center max-w-sm mx-auto text-center shadow-2xl animate-in zoom-in-95",children:[(0,Mm.jsxs)("div",{className:"w-16 h-16 mb-4 relative",children:[(0,Mm.jsx)("div",{className:"absolute inset-0 border-4 border-stone-100 rounded-full"}),(0,Mm.jsx)("div",{className:"absolute inset-0 border-4 border-rose-500 rounded-full border-t-transparent animate-spin"}),(0,Mm.jsx)(cm,{className:"absolute inset-0 m-auto w-6 h-6 text-rose-500 animate-pulse"})]}),(0,Mm.jsx)("h3",{className:"text-xl font-bold text-stone-800 mb-2",children:"Analyzing Item..."}),(0,Mm.jsx)("p",{className:"text-stone-500 text-sm",children:"Our AI is identifying your item, estimating its value, and finding resale comps."})]})}),(0,Mm.jsx)("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",ref:F,onChange:e=>G(e,"single")}),(0,Mm.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.gif,.webp,.heic,.heif",className:"hidden",ref:z,onChange:e=>G(e,"bulk")}),k.length>0&&"staging"!==D&&(0,Mm.jsx)($m,{files:k,onConfirm:(e,t)=>(async e=>{await Q("single",e,[k])})(t),onCancel:()=>{S([]),F.current&&(F.current.value="")}}),"staging"===D&&(0,Mm.jsx)(Gm,{files:k,onConfirm:async e=>{const t=e.map(e=>e.files);await Q("bulk","process_batch",t),O("dashboard")},onCancel:()=>{S([]),O("dashboard"),z.current&&(z.current.value="")},isProcessingBatch:w}),y&&(0,Mm.jsx)(tg,{item:y,onClose:()=>b(null),onSave:async e=>{t&&await Vp(Mf(Vm,"artifacts",Bm,"users",t.uid,"inventory",e.id),(e=>{let{id:t}=e;return i(e,Fm)})(e))},onDelete:async e=>{t&&await Bp(Mf(Vm,"artifacts",Bm,"users",t.uid,"inventory",e))},onNext:()=>{const e=X.findIndex(e=>e.id===y.id);e<X.length-1&&b(X[e+1])},onPrev:()=>{const e=X.findIndex(e=>e.id===y.id);e>0&&b(X[e-1])},hasNext:X.findIndex(e=>e.id===y.id)<X.length-1,hasPrev:X.findIndex(e=>e.id===y.id)>0}),L&&(0,Mm.jsx)(og,{user:t,items:s,onClose:()=>M(!1)}),w&&"staging"!==D&&(0,Mm.jsx)(Xm,{message:"Adding item...",subMessage:"AI is analyzing your photo"}),A&&(0,Mm.jsx)(Xm,{message:"Analyzing ".concat(N.size," items..."),subMessage:"This may take a moment"})]}):(0,Mm.jsx)(Zm,{})}const cg=document.getElementById("root");(0,s.createRoot)(cg).render((0,Mm.jsx)(r.StrictMode,{children:(0,Mm.jsx)(lg,{})}))})();
//# sourceMappingURL=main.2c8a1d01.js.map